window.__require=function t(e,o,n){function r(s,a){if(!o[s]){if(!e[s]){var c=s.split("/");if(c=c[c.length-1],!e[c]){var l="function"==typeof __require&&__require;if(!a&&l)return l(c,!0);if(i)return i(c,!0);throw new Error("Cannot find module '"+s+"'")}s=c}var u=o[s]={exports:{}};e[s][0].call(u.exports,function(t){return r(e[s][1][t]||t)},u,u.exports,t,e,o,n)}return o[s].exports}for(var i="function"==typeof __require&&__require,s=0;s<n.length;s++)r(n[s]);return r}({AdMgr:[function(t,e,o){"use strict";cc._RF.push(e,"1e5df/DgoRAAJ3KjQ8JunDt","AdMgr"),Object.defineProperty(o,"__esModule",{value:!0}),o.AdMgr=void 0;var n=t("../enum/Enums"),r=t("../Global"),i=t("./AndroidAD"),s=t("./DyPlatform"),a=t("./QQPlatform"),c=t("./WxPlatform"),l=function(){function t(){}return t.closeAd=function(){switch(cc.sys.platform){case cc.sys.WECHAT_GAME:if(window.qq)return a.QQPlatform.ins.hideBanner(),a.QQPlatform.ins.hideCustomAd(),a.QQPlatform.ins.hideCustomAd1(),this.bannerOn=!1,void(this.customOn=!1);c.WxPlatform.ins.hideBanner(),c.WxPlatform.ins.hideCustomAd(),c.WxPlatform.ins.hideCustomAd1(),this.bannerOn=!1,this.customOn=!1;break;case cc.sys.BYTEDANCE_GAME:s.DyPlatform.ins.hideBanner(),s.DyPlatform.ins.hideCustomAd(),s.DyPlatform.ins.hideCustomAd1(),this.bannerOn=!1,this.customOn=!1;break;case cc.sys.ANDROID:}},t.showBanner=function(){switch(cc.sys.platform){case cc.sys.WECHAT_GAME:this.bannerOn||(window.qq?a.QQPlatform:c.WxPlatform).ins.showBanner();break;case cc.sys.BYTEDANCE_GAME:this.bannerOn||s.DyPlatform.ins.showBanner();break;case cc.sys.ANDROID:i.AndroidAD.ins.showBanner()}},t.showInterstial=function(t){switch(void 0===t&&(t=0),cc.sys.platform){case cc.sys.BYTEDANCE_GAME:s.DyPlatform.ins.showInterstitialAd(t);break;case cc.sys.WECHAT_GAME:if(window.qq)return void a.QQPlatform.ins.showInterstitialAd(t);c.WxPlatform.ins.showInterstitialAd(t);break;case cc.sys.MOBILE_BROWSER:case cc.sys.DESKTOP_BROWSER:break;case cc.sys.ANDROID:i.AndroidAD.ins.showInterstitial()}},t.showCustomAd=function(t){switch(cc.sys.platform){case cc.sys.WECHAT_GAME:if(window.qq)return void(this.customOn||a.QQPlatform.ins.showCustomAd(t));this.customOn||c.WxPlatform.ins.showCustomAd(t);break;case cc.sys.BYTEDANCE_GAME:this.customOn||s.DyPlatform.ins.showCustomAd(t);break;case cc.sys.ANDROID:}},t.showCustomAd1=function(t){switch(cc.sys.platform){case cc.sys.WECHAT_GAME:if(window.qq)return void(this.customOn1||a.QQPlatform.ins.showCustomAd1(t));this.customOn1||c.WxPlatform.ins.showCustomAd1(t);break;case cc.sys.BYTEDANCE_GAME:this.customOn1||s.DyPlatform.ins.showCustomAd1(t);break;case cc.sys.ANDROID:}},t.hideCustomAd1=function(){switch(cc.sys.platform){case cc.sys.WECHAT_GAME:if(window.qq)return a.QQPlatform.ins.hideCustomAd1(),void(this.customOn1=!1);c.WxPlatform.ins.hideCustomAd1(),this.customOn1=!1;break;case cc.sys.BYTEDANCE_GAME:s.DyPlatform.ins.hideCustomAd1(),this.customOn1=!1;break;case cc.sys.ANDROID:}},t.showVideo=function(t){var e=this;void 0===t&&(t=null);var o=[],l=Symbol("showVideo");switch(cc.sys.platform){case cc.sys.MOBILE_BROWSER:case cc.sys.DESKTOP_BROWSER:t&&t();break;case cc.sys.WECHAT_GAME:if(r.Global.Pause(),window.qq)return void a.QQPlatform.ins.showRewardVideo(function(o){1==o?(t&&t(),r.Global.Pause(!1),cc.director.emit(n.events.Toast,"\u83b7\u53d6\u5956\u52b1\u6210\u529f")):2==o?(r.Global.Pause(!1),r.Global.enableShareAd?(cc.director.emit(n.events.Toast,"\u6682\u65e0\u5e7f\u544a\uff0c\u5206\u4eab\u53ef\u4ee5\u83b7\u5f97\u5956\u52b1\u5594"),e.shareFn(t)):(r.Global.Pause(!1),cc.director.emit(n.events.Toast,"\u83b7\u53d6\u5956\u52b1\u5931\u8d25"))):(r.Global.Pause(!1),cc.director.emit(n.events.Toast,"\u83b7\u53d6\u5956\u52b1\u5931\u8d25"))});c.WxPlatform.ins.showRewardVideo(function(o){1==o?(t&&t(),r.Global.Pause(!1),cc.director.emit(n.events.Toast,"\u83b7\u53d6\u5956\u52b1\u6210\u529f")):2==o?(r.Global.Pause(!1),r.Global.enableShareAd?(cc.director.emit(n.events.Toast,"\u6682\u65e0\u5e7f\u544a\uff0c\u5206\u4eab\u53ef\u4ee5\u83b7\u5f97\u5956\u52b1\u5594"),e.shareFn(t)):(r.Global.Pause(!1),cc.director.emit(n.events.Toast,"\u83b7\u53d6\u5956\u52b1\u5931\u8d25"))):(r.Global.Pause(!1),cc.director.emit(n.events.Toast,"\u83b7\u53d6\u5956\u52b1\u5931\u8d25"))});break;case cc.sys.BYTEDANCE_GAME:r.Global.Pause(),s.DyPlatform.ins.showRewardVideo(function(i){if(1==i){if(o.includes(l))return;t&&t(),r.Global.Pause(!1),cc.director.emit(n.events.Toast,"\u83b7\u53d6\u5956\u52b1\u6210\u529f")}else 2==i?(r.Global.Pause(!1),r.Global.enableShareAd?(cc.director.emit(n.events.Toast,"\u6682\u65e0\u5e7f\u544a\uff0c\u5206\u4eab\u53ef\u4ee5\u83b7\u5f97\u5956\u52b1\u5594"),e.shareFn(t)):(r.Global.Pause(!1),cc.director.emit(n.events.Toast,"\u83b7\u53d6\u5956\u52b1\u5931\u8d25")),o.push(l)):(r.Global.Pause(!1),cc.director.emit(n.events.Toast,"\u83b7\u53d6\u5956\u52b1\u5931\u8d25"),o.push(l))});break;case cc.sys.ANDROID:i.AndroidAD.ins.showRewardVideo()}},t.shareFn=function(t){window.wx||window.tt?window.tt?s.DyPlatform.ins.showShare("",function(e){e&&t&&t()}):window.wx&&setTimeout(function(){(window.qq?a.QQPlatform:c.WxPlatform).ins.showShare(),setTimeout(function(){t&&t()},1500)},500):t()},t.shareVideoFn=function(t,e){window.wx||window.tt?window.tt&&s.DyPlatform.ins.videoShare(t,"",function(t){t&&e&&e()}):e()},t.prototype.showCustomAd=function(t){t(0)},t.bannerOn=!1,t.customOn=!1,t.customOn1=!1,t}();o.AdMgr=l,cc._RF.pop()},{"../Global":"Global","../enum/Enums":"Enums","./AndroidAD":"AndroidAD","./DyPlatform":"DyPlatform","./QQPlatform":"QQPlatform","./WxPlatform":"WxPlatform"}],AndroidAD:[function(t,e,o){"use strict";cc._RF.push(e,"0dab2sI4NNNhYvkib9Bn4d0","AndroidAD"),Object.defineProperty(o,"__esModule",{value:!0}),o.AndroidAD=void 0;var n=t("../manager/Main"),r=function(){function t(){}return Object.defineProperty(t,"ins",{get:function(){return this._ins||(this._ins=new t),this._ins},enumerable:!1,configurable:!0}),t.prototype.showRewardVideo=function(){var t=n.default.ins.Platforms[2].videoId[0];jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","jiaZaiJiLiShiPin","(Ljava/lang/String;)V",t)},t.prototype.showInterstitial=function(){var t=n.default.ins.Platforms[2].intersitialId[0];jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","jiaZaiChaPing","(Ljava/lang/String;)V",t,300,450)},t.prototype.showBanner=function(){var t=n.default.ins.Platforms[3].bannerId[0];jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","jiaZaiBanner","(Ljava/lang/String;)V",t,600,50)},t}();o.AndroidAD=r,cc._RF.pop()},{"../manager/Main":void 0}],BaseView:[function(t,e,o){"use strict";cc._RF.push(e,"fb67fEaisdFoqMmY6i2kNSB","BaseView");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../ad/AdMgr"),a=t("../enum/Enums"),c=t("../manager/SoundMgr"),l=t("../manager/PoolMgr"),u=t("../utils/Tools"),h=cc._decorator,p=h.ccclass,f=h.property,d=cc.Button.prototype._onTouchEnded;cc.Button.prototype._onTouchEnded=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];d.apply(this,t),c.SoundMgr.ins.playSound(a.Clips.Button_Click,.5)};var y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.showBannerAd=!1,e.bannerDelay=0,e.hideBannerOnClose=!0,e.displayinSmallscreen=!0,e.showIntersitialAd=!1,e.intersitialDelay=0,e.showVideoAd=!1,e.showGridAd=!1,e.showMatrixAd=!1,e.videoDelay=0,e.tweenView=!0,e.root=null,e.tweenTime=.25,e.playBtnClip=!0,e}return r(e,t),e.prototype.showAds=function(t){var e=this;void 0===t&&(t=!0),this.showBannerAd&&this.scheduleOnce(function(){e.showBanner()},this.bannerDelay),this.showIntersitialAd&&t&&this.scheduleOnce(function(){e.showIntersitial()},this.intersitialDelay),this.showVideoAd&&t&&this.scheduleOnce(function(){e.showVideo()},this.bannerDelay),this.showGridAd&&this.scheduleOnce(function(){e.showCustomAd()},this.bannerDelay),this.showMatrixAd&&t&&this.scheduleOnce(function(){e.showMatrixAdFn()},this.bannerDelay)},e.prototype.closeAd=function(t){void 0===t&&(t=!1),s.AdMgr.closeAd(),t||s.AdMgr.hideCustomAd1()},e.prototype.showCustomAd=function(t){void 0===t&&(t=function(){}),s.AdMgr.showCustomAd(t)},e.prototype.showMatrixAdFn=function(t){void 0===t&&(t=function(){}),s.AdMgr.showCustomAd1(t)},e.prototype.showBanner=function(){s.AdMgr.showBanner()},e.prototype.showVideo=function(t){void 0===t&&(t=null),s.AdMgr.showVideo(t)},e.prototype.showIntersitial=function(){s.AdMgr.showInterstial(this.bannerDelay)},e.prototype.share=function(t){void 0===t&&(t=null),console.log("\u5206\u4eab"),s.AdMgr.shareFn(t)},e.prototype.shareVideo=function(t,e){void 0===e&&(e=null),console.log("\u89c6\u9891\u5206\u4eab"),s.AdMgr.shareVideoFn(t,e)},e.prototype.onDisable=function(){this.hideBannerOnClose&&this.closeAd()},e.prototype.onLoad=function(){},e.prototype.onEnable=function(){var t=this;this.playBtnClip&&c.SoundMgr.ins.playSound(a.Clips.Button_Click,.5),this.tweenView&&(this.root?u.Tools.fadeIn(this.root):(this.root=this.node,this.scheduleOnce(function(){u.Tools.fadeIn(t.root)}))),this.showAds()},e.prototype.close=function(){this.playBtnClip&&c.SoundMgr.ins.playSound(a.Clips.Button_Click,.5),this.showBannerAd&&this.closeAd(),this.tweenView?this.root||(this.root=this.node):l.PoolMgr.ins.putNode(this.node)},i([f({tooltip:"\u5728\u5f00\u59cb\u65f6\u663e\u793a\u6a2a\u5e45\u5e7f\u544a"})],e.prototype,"showBannerAd",void 0),i([f({visible:function(){return this.showBannerAd},range:[0,5]})],e.prototype,"bannerDelay",void 0),i([f({visible:function(){return this.showBannerAd},tooltip:"\u5728\u5173\u95ed\u65f6\u9690\u85cf\u6a2a\u5e45\u5e7f\u544a"})],e.prototype,"hideBannerOnClose",void 0),i([f({visible:function(){return this.showBannerAd}})],e.prototype,"displayinSmallscreen",void 0),i([f({tooltip:"\u5728\u5f00\u59cb\u65f6\u663e\u793a\u63d2\u9875\u5f0f\u5e7f\u544a"})],e.prototype,"showIntersitialAd",void 0),i([f({visible:function(){return this.showIntersitialAd},range:[0,5]})],e.prototype,"intersitialDelay",void 0),i([f({tooltip:"\u5728\u5f00\u59cb\u65f6\u663e\u793a\u89c6\u9891\u5e7f\u544a"})],e.prototype,"showVideoAd",void 0),i([f({tooltip:"\u5728\u5f00\u59cb\u65f6\u663e\u793a\u7f51\u683c\u5e7f\u544a"})],e.prototype,"showGridAd",void 0),i([f({tooltip:"\u5728\u5f00\u59cb\u65f6\u663e\u793a\u7f51\u683c\u77e9\u9635\u5e7f\u544a"})],e.prototype,"showMatrixAd",void 0),i([f({visible:function(){return this.showVideoAd},range:[0,5]})],e.prototype,"videoDelay",void 0),i([f({})],e.prototype,"tweenView",void 0),i([f({type:cc.Node,visible:function(){return this.tweenView}})],e.prototype,"root",void 0),i([f({visible:function(){return this.tweenView}})],e.prototype,"tweenTime",void 0),i([f({})],e.prototype,"playBtnClip",void 0),i([p],e)}(cc.Component);o.default=y,cc._RF.pop()},{"../ad/AdMgr":"AdMgr","../enum/Enums":"Enums","../manager/PoolMgr":"PoolMgr","../manager/SoundMgr":"SoundMgr","../utils/Tools":"Tools"}],1:[function(t,e){var o,n,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(o===setTimeout)return setTimeout(t,0);if((o===i||!o)&&setTimeout)return o=setTimeout,setTimeout(t,0);try{return o(t,0)}catch(e){try{return o.call(null,t,0)}catch(e){return o.call(this,t,0)}}}function c(t){if(n===clearTimeout)return clearTimeout(t);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{return n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(function(){try{o="function"==typeof setTimeout?setTimeout:i}catch(t){o=i}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(t){n=s}})();var l,u=[],h=!1,p=-1;function f(){h&&l&&(h=!1,l.length?u=l.concat(u):p=-1,u.length&&d())}function d(){if(!h){var t=a(f);h=!0;for(var e=u.length;e;){for(l=u,u=[];++p<e;)l&&l[p].run();p=-1,e=u.length}l=null,h=!1,c(t)}}function y(t,e){this.fun=t,this.array=e}function v(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)e[o-1]=arguments[o];u.push(new y(t,e)),1!==u.length||h||a(d)},y.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=v,r.addListener=v,r.once=v,r.off=v,r.removeListener=v,r.removeAllListeners=v,r.emit=v,r.prependListener=v,r.prependOnceListener=v,r.listeners=function(){return[]},r.binding=function(){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},{}],CoinMgr:[function(t,e,o){"use strict";cc._RF.push(e,"94b6e1i2uxOzqLY2ErzBVGT","CoinMgr");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../Global"),a=cc._decorator,c=a.ccclass,l=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.coinLabel=null,e}var o;return r(e,t),o=e,e.prototype.start=function(){console.log(" CoinMgr.Start............. "),o.ins=this,this.setCoinLabel()},e.prototype.setCoinLabel=function(){this.coinLabel.string=s.Global.getCurrentCoin().toString()},e.prototype.getLabelPosition=function(){return this.coinLabel.node.position},e.ins=null,i([l(cc.Label)],e.prototype,"coinLabel",void 0),o=i([c],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../Global":"Global"}],CupMgr:[function(t,e,o){"use strict";cc._RF.push(e,"89a06/Izi1Nqq2YBjp55jPJ","CupMgr");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{c(n.next(t))}catch(e){i(e)}}function a(t){try{c(n.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return c([t,e])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../Global"),l=t("../ad/DyRecorderManager"),u=t("../enum/Enums"),h=t("../game/Cup"),p=t("../game/WaterFlow"),f=t("./CoinMgr"),d=cc._decorator,y=d.ccclass,v=d.property,g=d.executeInEditMode,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cupPrefab=null,e.levelCfg=null,e._debugLevel=0,e._isPlaying=!1,e._waterFlow=null,e.selectedCup=null,e.layout_v=null,e._cups=[],e.curCfg=[],e}var o;return r(e,t),o=e,Object.defineProperty(e.prototype,"debugLevel",{get:function(){return this._debugLevel},set:function(t){this._debugLevel=t,c.Global.setLv(t),this.startGame()},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){var t=new cc.Node;t.parent=this.node,this._waterFlow=t.addComponent(p.WaterFlow),this.startGame()},e.prototype.onClickCup=function(t){console.log(" CupMgr.OnClickCup............ Cup\uff1a ",t.node.name),1!=t.getFinishState()?this.selectedCup?this.selectedCup==t?(this.doSelect(t,!1),this.selectedCup=null):this.checkPour(this.selectedCup,t)?this.startPour(this.selectedCup,t):(this.doSelect(this.selectedCup,!1),this.selectedCup=null):(this.selectedCup=t,this.doSelect(t,!0)):cc.director.emit(u.events.Toast,"Cup is Full")},e.prototype.doSelect=function(t,e){var o=t.orignPt.y+(e?t.node.height*u.AnimationTime.moveTime:0);cc.tween(t.node).stop(),cc.tween(t.node).to(u.AnimationTime.moveTime,{y:o}).start()},e.prototype.startPour=function(t,e){var o=this;console.log("  CupMgr.StartPour.........  ");var n=cc.v2(e.node.position),r=e.node.parent.convertToWorldSpaceAR(n),i=cc.view.getVisibleSize(),s=r.x>.5*i.width,a=JSON.parse(JSON.stringify(t.getTop())),c=Math.min(a.topColorNum,e.getTop().emptyNum),l=this.pourLiquid(t,e,{dstPt:n,dstGlobal:r,viewSize:i,isRight:s});n=l.dstPt,s=l.isRight,this.selectedCup=null,this._isPlaying=!0,t.moveToPour(n,s,c),t.setPourOutCallback(function(){return o.onPourStart(t,e,a)},function(){return o.onPourFinish(t,e,o._waterFlow)})},e.prototype.onPourFinish=function(t,e,o){var n=t.node.convertToWorldSpaceAR(cc.v2());n=o.node.parent.convertToNodeSpaceAR(n);var r=cc.v2(n.x,e.getWaterSurfacePosY(!0));(r=o.node.parent.convertToNodeSpaceAR(r)).x=n.x,o.playFlowAni(n,r,u.AnimationTime.moveTime,!0,function(){o.clear()}),t.setNormalAnchor();var i=t.orignPt;cc.tween(t.node).to(u.AnimationTime.moveTime,{x:i.x,y:i.y,angle:0},{easing:"sineOut"}).call(function(){t.node.zIndex=0,t.node.parent.zIndex=0}).start()},e.prototype.checkPour=function(t,e){var o=t.getTop(),n=o.topColorId,r=(o.topColorNum,e.getTop()),i=r.topColorId,s=r.emptyNum;return!(!n||i&&i!==n||!s)},e.prototype.createCupNode=function(t){var e=c.Global.cupSetting.current,o=cc.instantiate(this.cupPrefab),n=o.getComponent(h.default);return n.changeImg(+e-1),this.node.addChild(o),n.setCupInfo(t),console.log(" CreateCupNode:::: SetOnClick........ "),n.setOnClick(this.onClickCup.bind(this,n)),n},e.prototype.initCfg=function(){this.curCfg=[];var t=c.Global.lv;console.log(" CupMgr.initCfg::::::: ",t);for(var e=this.levelCfg.json[t-1],o=0;o<e.length;){var n={colorIds:[e[o],e[o+1]||0,e[o+2]||0,e[o+3]||0]};this.curCfg.push(n),o+=4}},e.prototype._createLayout=function(t,e,o){var n=new cc.Node(o);n.parent=e;var r=n.addComponent(cc.Layout);return r.type=t,r.resizeMode=cc.Layout.ResizeMode.CONTAINER,r},e.prototype.pourLiquid=function(t,e,o){var n=o.dstPt,r=o.dstGlobal,i=o.viewSize,s=o.isRight;return e.node.zIndex=0,e.node.parent.zIndex=0,t.node.zIndex=10,t.node.parent.zIndex=10,Math.abs(r.x-.5*i.width)<2&&(s=t.node.parent.convertToWorldSpaceAR(cc.v2(t.node.position)).x<.5*i.width),n.y+=30+.5*e.node.height,n.x=n.x+(s?-0:0),n=e.node.parent.convertToWorldSpaceAR(n),t.setPourAnchor(s),{dstPt:n=t.node.parent.convertToNodeSpaceAR(n),isRight:s}},e.prototype.onPourStart=function(t,e,o){var n=this;console.log(" CupMgr.onPourStart:::: SRC::: ",t,"  DST::: ",e);var r=this._waterFlow;r.setLineScale(this.layout_v.node.scale);var i=t.node.convertToWorldSpaceAR(cc.v2());i=r.node.parent.convertToNodeSpaceAR(i);var s=cc.v2(i.x,e.getWaterSurfacePosY());(s=r.node.parent.convertToNodeSpaceAR(s)).x=i.x,r.strokeColor=(new cc.Color).fromHEX(o.colorHex);var a=Math.min(o.topColorNum,e.getTop().emptyNum),c=function(){n._isPlaying=!1,n.onPourOneFinished(t,e,o.topColorId,a)};e.setStartAddWater(o.topColorId,a),r.playFlowAni(i,s,u.AnimationTime.moveTime,!1,function(){e.setPourInCallback(c),e.startAddWater(o.topColorId,a)})},e.prototype.onPourOneFinished=function(t,e,o,n){console.log(" CupMgr.OnPourOneFinished::: From: ",t," To: ",e);var r=this._cups.indexOf(t),i=this._cups.indexOf(e);c.Global.action_list.length==c.Global.action_step&&c.Global.action_list.shift(),c.Global.action_list.push({from:r,to:i,colorId:o,num:n}),this.checkIsAllFinished()?cc.director.emit(u.events.LevelFinish):cc.director.emit(u.events.Pour)},e.prototype.checkIsAllFinished=function(){console.log("Check  Is  All  Finished \u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026",this._cups);for(var t=0,e=this._cups;t<e.length;t++)if(!e[t].checkFinishImpDontChangeState())return!1;return!0},e.prototype.createCups=function(){return s(this,void 0,void 0,function(){var t,e,o,n,r,i,s,c,l,h,p,f,d;return a(this,function(){if(this.layout_v&&this.layout_v.node.destroyAllChildren(),this._cups=[],0==(t=this.curCfg.length))return[2];for(i=0;i<t;i++)e=this.curCfg[i],(d=this.createCupNode(e)).setCupIndex(i),this._cups.push(d);for(this.layout_v||(this.layout_v=this._createLayout(cc.Layout.Type.VERTICAL,this.node,"layout_v"),this.layout_v.node.zIndex=1),o=[],n=this.createCupIndexGroups(t),console.log(" CupMgr.CreateCups::::::::::::: ",n),r=1,i=0;i<n.length;i++)s=n[i],r=s.length,h=this.createCupLayout(n,this._cups[0].node.getContentSize(),r,u.spacesArr,i),o.push(h);for(this.layout_v.enabled=!0,this.layout_v.node.scale=u.spacesArr[r][1],this.layout_v.spacingY=u.spacesArr[r][2]||40,c=0,l=o;c<l.length;c++)(h=l[c]).updateLayout(),h.enabled=!1;for(this.layout_v.updateLayout(),this.layout_v.enabled=!1,p=0,f=this._cups;p<f.length;p++)(d=f[p]).setOrignPt(d.node.position);return[2]})})},e.prototype.createCupIndexGroups=function(t){var e=[];if(t<=4){for(var o=[],n=0;n<this._cups.length;n++)o.push(n);e.push(o)}else if(t<=15){o=[],n=0;for(var r=t/2;n<r;n++)o.push(n);for(e.push(o),o=[];n<t;n++)o.push(n);e.push(o),o=[]}return e},e.prototype.createCupLayout=function(t,e,o,n,r){void 0===r&&(r=0);var i=this._createLayout(cc.Layout.Type.HORIZONTAL,this.layout_v.node,"layout_h_"+r);i.node.height=e.height,console.log("  createCupLayout.Size::::  MaxNum ",o," \u95f4\u9694Value:  ",n[o][0]),i.spacingX=n[o][0],i.node.scale=1,i.spacingY=n[o][2]||40;for(var s=t[r],a=0;a<s.length;a++){var c=s[a];this._cups[c].node.parent=i.node}return i},e.prototype.start=function(){o.ins=this,cc.director.on(u.events.Reset,this.resetLv,this),cc.director.on(u.events.Back,this.undoAction,this),cc.director.on(u.events.Start,this.startGame,this),cc.director.on(u.events.AddTube,this.addcup,this)},e.prototype.onDisable=function(){cc.director.off(u.events.Reset,this.resetLv,this),cc.director.off(u.events.Back,this.undoAction,this),cc.director.off(u.events.Start,this.startGame,this),cc.director.off(u.events.AddTube,this.addcup,this)},e.prototype.resetLv=function(){c.Global.action_list=[],this.startGame()},e.prototype.startGame=function(){c.Global.action_list=[],this._isPlaying||(this.initCfg(),this.createCups(),1===c.Global.lv&&(console.log(" startGame........... LV:: ",c.Global.lv),setTimeout(function(){cc.systemEvent.emit(u.events.ExcuteGuideTask,{taskFlie:"GuideTask",stepIndex:0})},300)),l.DyRecorderManager.ins.start())},e.prototype.undoAction=function(t){return s(this,void 0,void 0,function(){var e,o,n,r,i,s,l,u,h;return a(this,function(){return this.checkCanUndo()?t&&!t()?[2,!1]:null==(e=c.Global.action_list.pop())?[2,!1]:(o=e.from,n=e.to,r=e.num,i=e.colorId,s=this._cups[n],l=this._cups[o],u=s.checkFinishImp(!1),h=l.checkFinishImp(!1),1==u&&(s.resetCheckFinishedState(),c.Global.subCoin(c.Global.tubeRewardCoin),f.default.ins.setCoinLabel()),1==h&&(l.resetCheckFinishedState(),c.Global.subCoin(c.Global.tubeRewardCoin),f.default.ins.setCoinLabel()),s.isPouring()||l.isPouring()?[2,!1]:(s.removeTopWaterImmediately(r),l.addWaterImmediately(i,r),[2,!0])):[2]})})},e.prototype.addcup=function(){this.checkCanAddTube()&&(this.selectedCup&&(this.doSelect(this.selectedCup,!1),this.selectedCup=null),this._waterFlow.clear(),this.curCfg.push({colorIds:[0,0,0,0]}),this.createCups())},e.prototype.checkCanUndo=function(){return!this._isPlaying&&c.Global.action_list.length>0},e.prototype.checkCanAddTube=function(){return!this._isPlaying&&this.curCfg.length<c.Global.maxTube},e.ins=null,i([v(cc.Prefab)],e.prototype,"cupPrefab",void 0),i([v(cc.JsonAsset)],e.prototype,"levelCfg",void 0),i([v],e.prototype,"_debugLevel",void 0),i([v({tooltip:!1})],e.prototype,"debugLevel",null),o=i([y,g],e)}(cc.Component);o.default=m,cc._RF.pop()},{"../Global":"Global","../ad/DyRecorderManager":"DyRecorderManager","../enum/Enums":"Enums","../game/Cup":"Cup","../game/WaterFlow":"WaterFlow","./CoinMgr":"CoinMgr"}],Cup:[function(t,e,o){"use strict";cc._RF.push(e,"72491RYDJhHaIEzhn1QrUBe","Cup");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.CupImgs=void 0;var s=t("../base/Math"),a=t("../enum/Enums"),c=t("../manager/SoundMgr"),l=t("../view/GameView"),u=t("./Water"),h=cc._decorator,p=h.ccclass,f=h.property,d=h.executeInEditMode,y=function(){function t(){this.tub=null,this.mask=null}return i([f(cc.SpriteFrame)],t.prototype,"tub",void 0),i([f(cc.SpriteFrame)],t.prototype,"mask",void 0),i([p("CupImgs")],t)}();o.CupImgs=y;var v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.water=null,e.info=null,e._finishState=!1,e._cupIndex=0,e.tubeNode=null,e.maskNode=null,e.finishMaskNode=null,e.cupImgs=[],e._colors=[],e._default_color="",e.tween=null,e._orignPt=null,e._upInfo=null,e.onClick=null,e}return r(e,t),e.prototype.changeImg=function(t){this.tubeNode.spriteFrame=this.cupImgs[t].tub,this.maskNode.spriteFrame=this.cupImgs[t].mask,this.finishMaskNode.spriteFrame=this.cupImgs[t].mask,this.finishMaskNode.enabled=!1},e.prototype.setWaterColor=function(t,e){void 0===t&&(t=a.WaterColors),void 0===e&&(e=a.defaultColor),this._colors=t,this._default_color=e},e.prototype.onLoad=function(){this.setWaterColor(),this._finishState=!1},e.prototype.getCupIndex=function(){return this._cupIndex},e.prototype.setCupIndex=function(t){this._cupIndex=t},e.prototype.initWater=function(){for(var t=this,e=this.info,o=[],n=a.SPLIT_COUNT-1;n>=0;n--){var r=e.colorIds[n];if(0!=r){var i=o[o.length-1];i&&i==r?i.height+=1/a.SPLIT_COUNT:o.push({height:1/a.SPLIT_COUNT,colorId:r})}}o.forEach(function(e){var o=t._colors[e.colorId]||t._default_color;e.color=(new cc.Color).fromHEX(o),e.height*=a.HEIGHT_FACTOR}),this.water.initInfos(o)},e.prototype.setCupInfo=function(t){this.info=t,this.initWater()},e.prototype.update=function(){this.water.tiltAngle!=this.node.angle&&(this.water.tiltAngle=this.node.angle)},e.prototype.getFinishState=function(){return this._finishState},e.prototype.checkIsFinshed=function(t){return 1==this._finishState?this._finishState:this.checkFinishImp(t)},e.prototype.checkFinishImp=function(t){for(var e=!1,o=this.info.colorIds,n=o[0],r=0,i=0;i<a.SPLIT_COUNT&&n==o[i];i++)r++;return r==a.SPLIT_COUNT&&0!=n&&(e=!0),console.log(" Check is finish. SplitCount:::: ",r," CupIndex: ",this._cupIndex," FinishState: ",e," TmpId: ",n),0==this._finishState&&1==e&&(t&&l.default.ins.playCoinAnimation(this.node),this.finishMaskNode.enabled=!0,this._finishState=!0),e},e.prototype.checkFinishImpDontChangeState=function(){for(var t=!1,e=this.info.colorIds,o=e[0],n=0,r=0;r<a.SPLIT_COUNT&&o==e[r];r++)n++;return n==a.SPLIT_COUNT&&(t=!0),t},e.prototype.resetCheckFinishedState=function(){this._finishState=!1,this.finishMaskNode.enabled=!1},e.prototype.setStartAddWater=function(t,e){for(var o=0,n=a.SPLIT_COUNT-1;n>=0&&(0!=this.info.colorIds[n]||(this.info.colorIds[n]=t,++o!=e));n--);},e.prototype.startAddWater=function(t,e){var o=this._colors[t]||this._default_color;this.water.addInfo({colorId:t,height:e/a.SPLIT_COUNT*a.HEIGHT_FACTOR,color:(new cc.Color).fromHEX(o)}),c.SoundMgr.ins.playSoundAtTime(a.Clips.pourWater,e/a.SPLIT_COUNT)},Object.defineProperty(e.prototype,"orignPt",{get:function(){return this._orignPt},enumerable:!1,configurable:!0}),e.prototype.setOrignPt=function(t){this._orignPt=t},e.prototype.setPourAnchor=function(t){var e=cc.v2(3,2);e.x=t?this.node.width-e.x:e.x,e.y=this.node.height-e.y,e.x=e.x/this.node.width,e.y=e.y/this.node.height,this.setAnchor(e)},e.prototype.setAnchor=function(t){var e=this.node.getAnchorPoint(),o=this.node.getPosition(),n=this.water.node.getPosition();this.node.setAnchorPoint(t);var r=cc.v2(t.x-e.x,t.y-e.y),i=cc.v2(r.x*this.node.width,r.y*this.node.height);i=s.rotatePt(i,this.node.angle),o.x+=i.x,o.y+=i.y,this.node.setPosition(o),n.x-=r.x*this.node.width,n.y-=r.y*this.node.height,this.water.node.setPosition(n)},e.prototype.moveToPour=function(t,e,o){var n=this,r=this.water.getPourStartAngle(),i=this.water.getPourEndAngle();this.water.onStartPour(o),e&&(r*=-1,i*=-1);var s=a.AnimationTime.moveTime,c=a.AnimationTime.pourTime;this.tween=cc.tween(this.node).set({angle:0}).to(s,{x:t.x,y:t.y,angle:r}).to(c,{angle:i}).call(function(){n.tween=null}).start(),this.pourSameColor(o)},e.prototype.backToInitPos=function(){var t=this;this.tween&&(this.tween.stop(),this.tween=null),this.tween=cc.tween(this.node).to(a.AnimationTime.moveTime,{position:this._orignPt,angle:0}).call(function(){t.tween=null}).start()},Object.defineProperty(e.prototype,"upCupInfo",{get:function(){return this._upInfo},enumerable:!1,configurable:!0}),e.prototype.pourSameColor=function(t){var e=0,o=this.getTop(),n=this.info.colorIds;this._upInfo=JSON.parse(JSON.stringify(o));for(var r=0;r<a.SPLIT_COUNT;r++){var i=n[r];if(0!=i){if(o.topColorId!=i)break;if(e++==t)break;n[r]=0}}},e.prototype.getTop=function(){for(var t=this.info.colorIds,e=0,o=0,n=0,r=0;r<a.SPLIT_COUNT;r++)if(0!=t[r]){if(0!=o&&o!=t[r])break;o=t[r],n++}else e++;return{emptyNum:e,topColorId:o,topColorNum:n,colorHex:this._colors[o]||this._default_color}},e.prototype.getBottleMouthCenter=function(){return{x:this.node.x,y:this.node.y+this.node.width/2}},e.prototype.setOnClick=function(t){this.onClick=t},e.prototype.changeCheckedState=function(){this.isPouring()||this.onClick&&this.onClick(this)},e.prototype.isPouring=function(){return Math.abs(this.node.angle)>1},e.prototype.getWaterSurfacePosY=function(t){void 0===t&&(t=!1);var e=this.getTop(),o=(a.SPLIT_COUNT-e.emptyNum)/a.SPLIT_COUNT;o<.02?o=.02:t&&(o-=1/a.SPLIT_COUNT*a.HEIGHT_FACTOR),o*=a.HEIGHT_FACTOR,o-=.5;var n=cc.v2(0,this.water.node.height*o);return(n=this.water.node.convertToWorldSpaceAR(n)).y},e.prototype.setPourInCallback=function(t){var e=this;console.log(" SetPourInCallBack  Cup Index: ",this._cupIndex),this.water.setPourInCallback(function(){e._upInfo=null;var o=e.checkIsFinshed(!0);t&&t(e,o),o&&(console.log(" Cup.SetPourInCallBack.Finished.... "),c.SoundMgr.ins.playSound(a.Clips.ContainerFinish,.3))}.bind(this))},e.prototype.setPourOutCallback=function(t,e){console.log(" setPourOutCallback  Cup Index: ",this.node.name),this.water.setPourOutCallback(function(){t&&t(this)}.bind(this),function(){this.tween&&(this.tween.stop(),this.tween=null),e&&e(this)}.bind(this))},e.prototype.setNormalAnchor=function(){this.setAnchor(cc.v2(.5,.5))},e.prototype.addWaterImmediately=function(t,e){for(var o=0,n=a.SPLIT_COUNT-1;n>=0&&(0!=this.info.colorIds[n]||(this.info.colorIds[n]=t,++o!=e));n--);this.initWater()},e.prototype.removeTopWaterImmediately=function(t){console.log(" removeTopWaterImmediately \u676f\u5b50: ",this.node.name);for(var e=0,o=this.getTop(),n=this.info.colorIds,r=0;r<a.SPLIT_COUNT;r++){var i=n[r];if(0!=i){if(o.topColorId!=i)break;if(n[r]=0,++e>=t)break}}return this.initWater(),o},i([f(u.default)],e.prototype,"water",void 0),i([f(cc.Sprite)],e.prototype,"tubeNode",void 0),i([f(cc.Sprite)],e.prototype,"maskNode",void 0),i([f(cc.Sprite)],e.prototype,"finishMaskNode",void 0),i([f([y])],e.prototype,"cupImgs",void 0),i([p,d],e)}(cc.Component);o.default=v,cc._RF.pop()},{"../base/Math":"Math","../enum/Enums":"Enums","../manager/SoundMgr":"SoundMgr","../view/GameView":"GameView","./Water":"Water"}],DyPlatform:[function(t,e,o){"use strict";cc._RF.push(e,"d896fdeDmxB8JA6ayUwKTxf","DyPlatform"),Object.defineProperty(o,"__esModule",{value:!0}),o.DyPlatform=void 0;var n=t("../manager/Main"),r=function(){function t(){this.tt=window.tt,this.haveSideReward=!1,this.rewardVideoList=new Map}return t.prototype.openToScence=function(){this.tt&&this.tt.navigateToScene({scene:"sidebar",fail:console.log,success:console.log})},Object.defineProperty(t,"ins",{get:function(){return this._ins?this._ins:(this._ins=new t,this._ins.init(),this._ins)},enumerable:!1,configurable:!0}),t.prototype.init=function(){var t=this,e=n.default.ins.Shares[0].sharePics;e.length>0&&this.tt&&(this.tt.onShareAppMessage(function(){var t=Math.floor(Math.random()*e.length);return{title:e[t].shareText,templateId:e[t].shareId,imageUrl:e[t].shareLink}}),this.tt.showShareMenu({withShareTicket:!0})),this.tt?(this.tt.onShow(function(e){var o={launch_from:"homepage",location:"sidebar_card",scene:"021036"},n=!1;for(var r in o)e[r]!==o[r]&&(n=!0);n||(t.haveSideReward=!0),console.log(e,"op")}),this.initInterstitialAd()):this.haveSideReward=!0},t.prototype.getLaunchOption=function(){return this.tt.getLaunchOptionsSync().query},t.prototype.getScene=function(){return this.tt.getLaunchOptionsSync().scene},t.prototype.showShare=function(t,e){if(void 0===t&&(t=""),n.default.ins.Shares[0]){var o=n.default.ins.Shares[0].sharePics;if(!(o.length<=0)){var r=Math.floor(Math.random()*o.length);this.tt&&this.tt.shareAppMessage({channel:"article",title:o[r].shareText,templateId:o[r].shareId,imageUrl:o[r].shareLink,query:t,success:function(){console.log("\u5206\u4eab\u6210\u529f"),e(1)},fail:function(){console.log("\u5206\u4eab\u5931\u8d25"),e(0)}})}}},t.prototype.videoShare=function(t,e,o){if(void 0===e&&(e=""),n.default.ins.ShareVideoes[0]){var r=n.default.ins.ShareVideoes[0].sharePics;if(!(r.length<=0)){var i=Math.floor(Math.random()*r.length);console.log(i,e,r),this.tt&&this.tt.shareAppMessage({channel:"video",query:e,templateId:r[i].shareId,title:r[i].title,desc:r[i].desc,extra:{videoPath:t,videoTopics:r[i].videoTopics,hashtag_list:r[i].videoTopics},success:function(){console.log("\u5206\u4eab\u89c6\u9891\u6210\u529f"),o(1)},fail:function(){console.log("\u5206\u4eab\u89c6\u9891\u5931\u8d25"),o(0)}})}}},t.prototype.hideBanner=function(){null!=this.banner&&(this.banner.destroy(),this.banner=null)},t.prototype.showBanner=function(t){var e=this;void 0===t&&(t=2);var o=n.default.ins.Platforms[0].bannerId[0];if(this.tt&&o){if(null!=this.banner)return this.banner.destroy(),void(this.banner=null);var r=this.tt.getSystemInfoSync();console.log(o,"id");var i=this.tt.createBannerAd({adUnitId:o,adIntervals:30,style:{top:r.windowHeight,width:300}});console.log(i,"bannerAd"),i.style.left=(r.windowWidth-300)/2,i.onResize(function(t){i.style.top=r.windowHeight-t.height/2+20,i.style.left=(r.windowWidth-t.width)/2}),1==t?(r.windowWidth,i.style.width):2==t&&(r.windowWidth,i.style.width),i.onLoad(function(){console.log("banner \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),e.banner=i,i.show()}),i.onError(function(t){console.log("banner \u5e7f\u544a\u52a0\u8f7d\u9519\u8bef",t)})}},t.prototype.showRewardVideo=function(t){var e=this,o=function(e){e&&e.isEnded?(console.log("res:  ",e),t(1),i.offClose(o)):(console.log("\u64ad\u653e\u4e2d\u9014\u9000\u51fa"),i.offClose(o),t(0))},r=n.default.ins.Platforms[0].videoId[0];null!=this.rewardVideo2&&this.rewardVideo2.offClose(o);var i=this.tt.createRewardedVideoAd({adUnitId:r});this.rewardVideo2=i,i.load().then(function(){e.tt.showToast({title:"\u52a0\u8f7d\u4e2d\uff0c\u8bf7\u7a0d\u540e",icon:"success",duration:1500,success:function(){},fail:function(){},complete:function(){}}),console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),i.show().then(function(){i.onClose(o)})});var s=!1;i.onError(function(o){console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u663e\u793a\u5931\u8d25",o),s||(s=!0,e.tt.showToast({title:"\u8bf7\u7a0d\u540e\u518d\u8bd5",icon:"fail",duration:1500,success:function(){},fail:function(){},complete:function(){}}),t(2))})},t.prototype.initInterstitialAd=function(){var t=this;if(cc.sys.BYTEDANCE_GAME){var e=n.default.ins.Platforms[0].intersitialId[0];this.interstitialAd=this.tt.createInterstitialAd({adUnitId:e});var o=function(){setTimeout(function(){t.interstitialAd.load().then(function(){console.log("\u63d2\u5c4f \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),t.interstitialAd.onClose(function(t){o(),console.log("\u5173\u95ed\u63d2\u5c4f\u5e7f\u544a",t)}),t.interstitialAd.onError(function(t){console.log("err:\u63d2\u5c4f\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25",t)}),t.interstitialAd.show().catch(function(t){o(),console.log("\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u5931\u8d25",t)})})},35e3)};o()}},t.prototype.showInterstitialAd=function(t){void 0===t&&(t=5)},t.prototype.showCustomAd=function(t){t(0)},t.prototype.hideCustomAd1=function(){this.custom1&&(this.custom1.hide(),this.custom1=null)},t.prototype.showCustomAd1=function(t){var e=this;if(this.tt){var o,r=n.default.ins.Platforms[2].customId[1];if(r)if(this.tt.getSystemInfoSync(),o={width:128,left:64,top:300,fixed:0},this.custom1)this.custom1.show();else{var i=this.tt.createBlockAd({adUnitId:r,orientation:"vertical",size:1,style:o});i.onLoad(function(){console.log("\u539f\u751f\u6a21\u677f \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),t(1),i.show().then(function(){return console.log("\u539f\u751f\u6a21\u677f \u5e7f\u544a\u663e\u793a\u6210\u529f")}).catch(function(e){console.log("\u539f\u751f\u6a21\u677f \u5e7f\u544a\u663e\u793a\u5931\u8d25",e),t(0)}),e.custom1=i}),i.onError(function(e){console.log("\u539f\u751f\u6a21\u677fCustomAd \u5e7f\u544a\u52a0\u8f7d\u5931\u8d25\uff1a",e),t(0)})}}},t.prototype.hideCustomAd=function(){this.custom&&(this.custom=null)},t}();o.DyPlatform=r,cc._RF.pop()},{"../manager/Main":void 0}],DyRecorderManager:[function(t,e,o){"use strict";cc._RF.push(e,"18173XOTpVPbZqjYd9QnBKj","DyRecorderManager");var n=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{c(n.next(t))}catch(e){i(e)}}function a(t){try{c(n.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return c([t,e])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.DyRecorderManager=void 0;var i=function(){function t(){this.tt=window.tt}return Object.defineProperty(t,"ins",{get:function(){return this._ins?this._ins:(this._ins=new t,this._ins.init(),this._ins)},enumerable:!1,configurable:!0}),t.prototype.init=function(){this.tt&&(this.systemInfo=this.tt.getSystemInfoSync(),this.getGameRecorderManager=this.tt.getGameRecorderManager(),this.maskInfo=this.getGameRecorderManager.getMark(),this.onError())},t.prototype.start=function(t){var e,o;if(void 0===t&&(t={duration:30,isMarkOpen:!0}),this.tt){var n=(this.systemInfo.screenWidth-this.maskInfo.markWidth)/2,r=(this.systemInfo.screenHeight-this.maskInfo.markHeight)/2;null!==(e=t.locLeft)&&void 0!==e||(t.locLeft=n),null!==(o=t.locTop)&&void 0!==o||(t.locTop=r),this.onStart(),this.getGameRecorderManager.start(t)}},t.prototype.stop=function(){return n(this,void 0,void 0,function(){var t;return r(this,function(){return this.tt?(t=this.onStop(),this.getGameRecorderManager.stop(),[2,t]):[2]})})},t.prototype.onStart=function(){this.getGameRecorderManager.onStart(function(t){console.log(t,"\u5f55\u5c4f\u5f00\u59cb")})},t.prototype.onStop=function(){var t=this;return new Promise(function(e){t.getGameRecorderManager.onStop(function(t){console.log(t,t.videoPath,"\u5f55\u5c4f\u7ed3\u675f"),e(t.videoPath)})})},t.prototype.onError=function(){this.getGameRecorderManager.onError(function(t){console.log(t,"\u5f55\u5c4f\u5931\u8d25")})},t}();o.DyRecorderManager=i,cc._RF.pop()},{}],2:[function(t,e,o){(function(t){var n;n=function(e){"use strict";function o(t,...e){return(...o)=>t(...e,...o)}function n(t){return function(...e){var o=e.pop();return t.call(this,e,o)}}var r="function"==typeof queueMicrotask&&queueMicrotask,i="function"==typeof setImmediate&&setImmediate,s="object"==typeof t&&"function"==typeof t.nextTick;function a(t){setTimeout(t,0)}function c(t){return(e,...o)=>t(()=>e(...o))}var l=c(r?queueMicrotask:i?setImmediate:s?t.nextTick:a);function u(t){return f(t)?function(...e){const o=e.pop();return h(t.apply(this,e),o)}:n(function(e,o){var n;try{n=t.apply(this,e)}catch(r){return o(r)}if(n&&"function"==typeof n.then)return h(n,o);o(null,n)})}function h(t,e){return t.then(t=>{p(e,null,t)},t=>{p(e,t&&t.message?t:new Error(t))})}function p(t,e,o){try{t(e,o)}catch(n){l(t=>{throw t},n)}}function f(t){return"AsyncFunction"===t[Symbol.toStringTag]}function d(t){return"AsyncGenerator"===t[Symbol.toStringTag]}function y(t){return"function"==typeof t[Symbol.asyncIterator]}function v(t){if("function"!=typeof t)throw new Error("expected a function");return f(t)?u(t):t}function g(t,e=t.length){if(!e)throw new Error("arity is undefined");return function(...o){return"function"==typeof o[e-1]?t.apply(this,o):new Promise((n,r)=>{o[e-1]=(t,...e)=>{if(t)return r(t);n(e.length>1?e:e[0])},t.apply(this,o)})}}function m(t){return function(e,...o){return g(function(n){var r=this;return t(e,(t,e)=>{v(t).apply(r,o.concat(e))},n)})}}function b(t,e,o,n){e=e||[];var r=[],i=0,s=v(o);return t(e,(t,e,o)=>{var n=i++;s(t,(t,e)=>{r[n]=e,o(t)})},t=>{n(t,r)})}function _(t){return t&&"number"==typeof t.length&&t.length>=0&&t.length%1==0}const w={};function C(t){function e(...e){if(null!==t){var o=t;t=null,o.apply(this,e)}}return Object.assign(e,t),e}function S(t){return t[Symbol.iterator]&&t[Symbol.iterator]()}function A(t){var e=-1,o=t.length;return function(){return++e<o?{value:t[e],key:e}:null}}function P(t){var e=-1;return function(){var o=t.next();return o.done?null:(e++,{value:o.value,key:e})}}function T(t){if(_(t))return A(t);var e,o,n,r,i=S(t);return i?P(i):(o=(e=t)?Object.keys(e):[],n=-1,r=o.length,function t(){var i=o[++n];return"__proto__"===i?t():n<r?{value:e[i],key:i}:null})}function O(t){return function(...e){if(null===t)throw new Error("Callback was already called.");var o=t;t=null,o.apply(this,e)}}function M(t,e,o,n){let r=!1,i=!1,s=!1,a=0,c=0;function l(){a>=e||s||r||(s=!0,t.next().then(({value:t,done:e})=>{if(!i&&!r){if(s=!1,e)return r=!0,void(a<=0&&n(null));a++,o(t,c,u),c++,l()}}).catch(h))}function u(t,e){if(a-=1,!i)return t?h(t):!1===t?(r=!0,void(i=!0)):e===w||r&&a<=0?(r=!0,n(null)):void l()}function h(t){i||(s=!1,r=!0,n(t))}l()}var I=t=>(e,o,n)=>{if(n=C(n),t<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!e)return n(null);if(d(e))return M(e,t,o,n);if(y(e))return M(e[Symbol.asyncIterator](),t,o,n);var r=T(e),i=!1,s=!1,a=0,c=!1;function l(t,e){if(!s)if(a-=1,t)i=!0,n(t);else if(!1===t)i=!0,s=!0;else{if(e===w||i&&a<=0)return i=!0,n(null);c||u()}}function u(){for(c=!0;a<t&&!i;){var e=r();if(null===e)return i=!0,void(a<=0&&n(null));a+=1,o(e.value,e.key,O(l))}c=!1}u()},L=g(function(t,e,o,n){return I(e)(t,v(o),n)},4);function x(t,e,o){o=C(o);var n=0,r=0,{length:i}=t,s=!1;function a(t,e){!1===t&&(s=!0),!0!==s&&(t?o(t):++r!==i&&e!==w||o(null))}for(0===i&&o(null);n<i;n++)e(t[n],n,O(a))}function R(t,e,o){return L(t,1/0,e,o)}var k=g(function(t,e,o){return(_(t)?x:R)(t,v(e),o)},3),E=g(function(t,e,o){return b(k,t,e,o)},3),G=m(E),F=g(function(t,e,o){return L(t,1,e,o)},3),j=g(function(t,e,o){return b(F,t,e,o)},3),N=m(j);const B=Symbol("promiseCallback");function V(){let t,e;function o(o,...n){if(o)return e(o);t(n.length>1?n:n[0])}return o[B]=new Promise((o,n)=>{t=o,e=n}),o}function D(t,e,o){"number"!=typeof e&&(o=e,e=null),o=C(o||V());var n=Object.keys(t).length;if(!n)return o(null);e||(e=n);var r={},i=0,s=!1,a=!1,c=Object.create(null),l=[],u=[],h={};function p(t,e){l.push(()=>g(t,e))}function f(){if(!s){if(0===l.length&&0===i)return o(null,r);for(;l.length&&i<e;)l.shift()()}}function d(t,e){var o=c[t];o||(o=c[t]=[]),o.push(e)}function y(t){(c[t]||[]).forEach(t=>t()),f()}function g(t,e){if(!a){var n=O((e,...n)=>{if(i--,!1!==e)if(n.length<2&&([n]=n),e){var l={};if(Object.keys(r).forEach(t=>{l[t]=r[t]}),l[t]=n,a=!0,c=Object.create(null),s)return;o(e,l)}else r[t]=n,y(t);else s=!0});i++;var l=v(e[e.length-1]);e.length>1?l(r,n):l(n)}}function m(e){var o=[];return Object.keys(t).forEach(n=>{const r=t[n];Array.isArray(r)&&r.indexOf(e)>=0&&o.push(n)}),o}return Object.keys(t).forEach(e=>{var o=t[e];if(!Array.isArray(o))return p(e,[o]),void u.push(e);var n=o.slice(0,o.length-1),r=n.length;if(0===r)return p(e,o),void u.push(e);h[e]=r,n.forEach(i=>{if(!t[i])throw new Error("async.auto task `"+e+"` has a non-existent dependency `"+i+"` in "+n.join(", "));d(i,()=>{0==--r&&p(e,o)})})}),function(){for(var t=0;u.length;)t++,m(u.pop()).forEach(t=>{0==--h[t]&&u.push(t)});if(t!==n)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}(),f(),o[B]}var W=/^(?:async\s+)?(?:function)?\s*\w*\s*\(\s*([^)]+)\s*\)(?:\s*{)/,H=/^(?:async\s+)?\(?\s*([^)=]+)\s*\)?(?:\s*=>)/,q=/,/,U=/(=.+)?(\s*)$/;function z(t){let e="",o=0,n=t.indexOf("*/");for(;o<t.length;)if("/"===t[o]&&"/"===t[o+1]){let e=t.indexOf("\n",o);o=-1===e?t.length:e}else if(-1!==n&&"/"===t[o]&&"*"===t[o+1]){let r=t.indexOf("*/",o);-1!==r?(o=r+2,n=t.indexOf("*/",o)):(e+=t[o],o++)}else e+=t[o],o++;return e}function Q(t){const e=z(t.toString());let o=e.match(W);if(o||(o=e.match(H)),!o)throw new Error("could not parse args in autoInject\nSource:\n"+e);let[,n]=o;return n.replace(/\s/g,"").split(q).map(t=>t.replace(U,"").trim())}function J(t,e){var o={};return Object.keys(t).forEach(e=>{var n,r=t[e],i=f(r),s=!i&&1===r.length||i&&0===r.length;if(Array.isArray(r))n=[...r],r=n.pop(),o[e]=n.concat(n.length>0?a:r);else if(s)o[e]=r;else{if(n=Q(r),0===r.length&&!i&&0===n.length)throw new Error("autoInject task functions require explicit parameters.");i||n.pop(),o[e]=n.concat(a)}function a(t,e){var o=n.map(e=>t[e]);o.push(e),v(r)(...o)}}),D(o,e)}class K{constructor(){this.head=this.tail=null,this.length=0}removeLink(t){return t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev,t.prev=t.next=null,this.length-=1,t}empty(){for(;this.head;)this.shift();return this}insertAfter(t,e){e.prev=t,e.next=t.next,t.next?t.next.prev=e:this.tail=e,t.next=e,this.length+=1}insertBefore(t,e){e.prev=t.prev,e.next=t,t.prev?t.prev.next=e:this.head=e,t.prev=e,this.length+=1}unshift(t){this.head?this.insertBefore(this.head,t):Y(this,t)}push(t){this.tail?this.insertAfter(this.tail,t):Y(this,t)}shift(){return this.head&&this.removeLink(this.head)}pop(){return this.tail&&this.removeLink(this.tail)}toArray(){return[...this]}*[Symbol.iterator](){for(var t=this.head;t;)yield t.data,t=t.next}remove(t){for(var e=this.head;e;){var{next:o}=e;t(e)&&this.removeLink(e),e=o}return this}}function Y(t,e){t.length=1,t.head=t.tail=e}function X(t,e,o){if(null==e)e=1;else if(0===e)throw new RangeError("Concurrency must not be zero");var n=v(t),r=0,i=[];const s={error:[],drain:[],saturated:[],unsaturated:[],empty:[]};function a(t,e){s[t].push(e)}function c(t,e){const o=(...n)=>{u(t,o),e(...n)};s[t].push(o)}function u(t,e){return t?e?void(s[t]=s[t].filter(t=>t!==e)):s[t]=[]:Object.keys(s).forEach(t=>s[t]=[])}function h(t,...e){s[t].forEach(t=>t(...e))}var p=!1;function f(t,e,o,n){if(null!=n&&"function"!=typeof n)throw new Error("task callback must be a function");var r,i;function s(t,...e){return t?o?i(t):r():e.length<=1?r(e[0]):void r(e)}b.started=!0;var a=b._createTaskItem(t,o?s:n||s);if(e?b._tasks.unshift(a):b._tasks.push(a),p||(p=!0,l(()=>{p=!1,b.process()})),o||!n)return new Promise((t,e)=>{r=t,i=e})}function d(t){return function(e,...o){r-=1;for(var n=0,s=t.length;n<s;n++){var a=t[n],c=i.indexOf(a);0===c?i.shift():c>0&&i.splice(c,1),a.callback(e,...o),null!=e&&h("error",e,a.data)}r<=b.concurrency-b.buffer&&h("unsaturated"),b.idle()&&h("drain"),b.process()}}function y(t){return!(0!==t.length||!b.idle()||(l(()=>h("drain")),0))}const g=t=>e=>{if(!e)return new Promise((e,o)=>{c(t,(t,n)=>{if(t)return o(t);e(n)})});u(t),a(t,e)};var m=!1,b={_tasks:new K,_createTaskItem:(t,e)=>({data:t,callback:e}),*[Symbol.iterator](){yield*b._tasks[Symbol.iterator]()},concurrency:e,payload:o,buffer:e/4,started:!1,paused:!1,push(t,e){if(Array.isArray(t)){if(y(t))return;return t.map(t=>f(t,!1,!1,e))}return f(t,!1,!1,e)},pushAsync(t,e){if(Array.isArray(t)){if(y(t))return;return t.map(t=>f(t,!1,!0,e))}return f(t,!1,!0,e)},kill(){u(),b._tasks.empty()},unshift(t,e){if(Array.isArray(t)){if(y(t))return;return t.map(t=>f(t,!0,!1,e))}return f(t,!0,!1,e)},unshiftAsync(t,e){if(Array.isArray(t)){if(y(t))return;return t.map(t=>f(t,!0,!0,e))}return f(t,!0,!0,e)},remove(t){b._tasks.remove(t)},process(){if(!m){for(m=!0;!b.paused&&r<b.concurrency&&b._tasks.length;){var t=[],e=[],o=b._tasks.length;b.payload&&(o=Math.min(o,b.payload));for(var s=0;s<o;s++){var a=b._tasks.shift();t.push(a),i.push(a),e.push(a.data)}r+=1,0===b._tasks.length&&h("empty"),r===b.concurrency&&h("saturated");var c=O(d(t));n(e,c)}m=!1}},length:()=>b._tasks.length,running:()=>r,workersList:()=>i,idle:()=>b._tasks.length+r===0,pause(){b.paused=!0},resume(){!1!==b.paused&&(b.paused=!1,l(b.process))}};return Object.defineProperties(b,{saturated:{writable:!1,value:g("saturated")},unsaturated:{writable:!1,value:g("unsaturated")},empty:{writable:!1,value:g("empty")},drain:{writable:!1,value:g("drain")},error:{writable:!1,value:g("error")}}),b}function Z(t,e){return X(t,1,e)}function $(t,e,o){return X(t,e,o)}var tt=g(function(t,e,o,n){n=C(n);var r=v(o);return F(t,(t,o,n)=>{r(e,t,(t,o)=>{e=o,n(t)})},t=>n(t,e))},4);function et(...t){var e=t.map(v);return function(...t){var o=this,n=t[t.length-1];return"function"==typeof n?t.pop():n=V(),tt(e,t,(t,e,n)=>{e.apply(o,t.concat((t,...e)=>{n(t,e)}))},(t,e)=>n(t,...e)),n[B]}}function ot(...t){return et(...t.reverse())}var nt=g(function(t,e,o,n){return b(I(e),t,o,n)},4),rt=g(function(t,e,o,n){var r=v(o);return nt(t,e,(t,e)=>{r(t,(t,...o)=>t?e(t):e(t,o))},(t,e)=>{for(var o=[],r=0;r<e.length;r++)e[r]&&(o=o.concat(...e[r]));return n(t,o)})},4),it=g(function(t,e,o){return rt(t,1/0,e,o)},3),st=g(function(t,e,o){return rt(t,1,e,o)},3);function at(...t){return function(...e){return e.pop()(null,...t)}}function ct(t,e){return(o,n,r,i)=>{var s,a=!1;const c=v(r);o(n,(o,n,r)=>{c(o,(n,i)=>n||!1===n?r(n):t(i)&&!s?(a=!0,s=e(!0,o),r(null,w)):void r())},t=>{if(t)return i(t);i(null,a?s:e(!1))})}}var lt=g(function(t,e,o){return ct(t=>t,(t,e)=>e)(k,t,e,o)},3),ut=g(function(t,e,o,n){return ct(t=>t,(t,e)=>e)(I(e),t,o,n)},4),ht=g(function(t,e,o){return ct(t=>t,(t,e)=>e)(I(1),t,e,o)},3);function pt(t){return(e,...o)=>v(e)(...o,(e,...o)=>{"object"==typeof console&&(e?console.error&&console.error(e):console[t]&&o.forEach(e=>console[t](e)))})}var ft=pt("dir"),dt=g(function(t,e,o){o=O(o);var n,r=v(t),i=v(e);function s(t,...e){if(t)return o(t);!1!==t&&(n=e,i(...e,a))}function a(t,e){return t?o(t):!1!==t?e?void r(s):o(null,...n):void 0}return a(null,!0)},3);function yt(t,e,o){const n=v(e);return dt(t,(...t)=>{const e=t.pop();n(...t,(t,o)=>e(t,!o))},o)}function vt(t){return(e,o,n)=>t(e,n)}var gt=g(function(t,e,o){return k(t,vt(v(e)),o)},3),mt=g(function(t,e,o,n){return I(e)(t,vt(v(o)),n)},4),bt=g(function(t,e,o){return mt(t,1,e,o)},3);function _t(t){return f(t)?t:function(...e){var o=e.pop(),n=!0;e.push((...t)=>{n?l(()=>o(...t)):o(...t)}),t.apply(this,e),n=!1}}var wt=g(function(t,e,o){return ct(t=>!t,t=>!t)(k,t,e,o)},3),Ct=g(function(t,e,o,n){return ct(t=>!t,t=>!t)(I(e),t,o,n)},4),St=g(function(t,e,o){return ct(t=>!t,t=>!t)(F,t,e,o)},3);function At(t,e,o,n){var r=new Array(e.length);t(e,(t,e,n)=>{o(t,(t,o)=>{r[e]=!!o,n(t)})},t=>{if(t)return n(t);for(var o=[],i=0;i<e.length;i++)r[i]&&o.push(e[i]);n(null,o)})}function Pt(t,e,o,n){var r=[];t(e,(t,e,n)=>{o(t,(o,i)=>{if(o)return n(o);i&&r.push({index:e,value:t}),n(o)})},t=>{if(t)return n(t);n(null,r.sort((t,e)=>t.index-e.index).map(t=>t.value))})}function Tt(t,e,o,n){return(_(e)?At:Pt)(t,e,v(o),n)}var Ot=g(function(t,e,o){return Tt(k,t,e,o)},3),Mt=g(function(t,e,o,n){return Tt(I(e),t,o,n)},4),It=g(function(t,e,o){return Tt(F,t,e,o)},3),Lt=g(function(t,e){var o=O(e),n=v(_t(t));return function t(e){if(e)return o(e);!1!==e&&n(t)}()},2),xt=g(function(t,e,o,n){var r=v(o);return nt(t,e,(t,e)=>{r(t,(o,n)=>o?e(o):e(o,{key:n,val:t}))},(t,e)=>{for(var o={},{hasOwnProperty:r}=Object.prototype,i=0;i<e.length;i++)if(e[i]){var{key:s}=e[i],{val:a}=e[i];r.call(o,s)?o[s].push(a):o[s]=[a]}return n(t,o)})},4);function Rt(t,e,o){return xt(t,1/0,e,o)}function kt(t,e,o){return xt(t,1,e,o)}var Et=pt("log"),Gt=g(function(t,e,o,n){n=C(n);var r={},i=v(o);return I(e)(t,(t,e,o)=>{i(t,e,(t,n)=>{if(t)return o(t);r[e]=n,o(t)})},t=>n(t,r))},4);function Ft(t,e,o){return Gt(t,1/0,e,o)}function jt(t,e,o){return Gt(t,1,e,o)}function Nt(t,e=(t=>t)){var o=Object.create(null),r=Object.create(null),i=v(t),s=n((t,n)=>{var s=e(...t);s in o?l(()=>n(null,...o[s])):s in r?r[s].push(n):(r[s]=[n],i(...t,(t,...e)=>{t||(o[s]=e);var n=r[s];delete r[s];for(var i=0,a=n.length;i<a;i++)n[i](t,...e)}))});return s.memo=o,s.unmemoized=t,s}var Bt=c(s?t.nextTick:i?setImmediate:a),Vt=g((t,e,o)=>{var n=_(e)?[]:{};t(e,(t,e,o)=>{v(t)((t,...r)=>{r.length<2&&([r]=r),n[e]=r,o(t)})},t=>o(t,n))},3);function Dt(t,e){return Vt(k,t,e)}function Wt(t,e,o){return Vt(I(e),t,o)}function Ht(t,e){var o=v(t);return X((t,e)=>{o(t[0],e)},e,1)}class qt{constructor(){this.heap=[],this.pushCount=Number.MIN_SAFE_INTEGER}get length(){return this.heap.length}empty(){return this.heap=[],this}percUp(t){let e;for(;t>0&&zt(this.heap[t],this.heap[e=Ut(t)]);){let o=this.heap[t];this.heap[t]=this.heap[e],this.heap[e]=o,t=e}}percDown(t){let e;for(;(e=1+(t<<1))<this.heap.length&&(e+1<this.heap.length&&zt(this.heap[e+1],this.heap[e])&&(e+=1),!zt(this.heap[t],this.heap[e]));){let o=this.heap[t];this.heap[t]=this.heap[e],this.heap[e]=o,t=e}}push(t){t.pushCount=++this.pushCount,this.heap.push(t),this.percUp(this.heap.length-1)}unshift(t){return this.heap.push(t)}shift(){let[t]=this.heap;return this.heap[0]=this.heap[this.heap.length-1],this.heap.pop(),this.percDown(0),t}toArray(){return[...this]}*[Symbol.iterator](){for(let t=0;t<this.heap.length;t++)yield this.heap[t].data}remove(t){let e=0;for(let o=0;o<this.heap.length;o++)t(this.heap[o])||(this.heap[e]=this.heap[o],e++);this.heap.splice(e);for(let o=Ut(this.heap.length-1);o>=0;o--)this.percDown(o);return this}}function Ut(t){return(t+1>>1)-1}function zt(t,e){return t.priority!==e.priority?t.priority<e.priority:t.pushCount<e.pushCount}function Qt(t,e){var o=Ht(t,e),{push:n,pushAsync:r}=o;function i(t,e){return Array.isArray(t)?t.map(t=>({data:t,priority:e})):{data:t,priority:e}}return o._tasks=new qt,o._createTaskItem=({data:t,priority:e},o)=>({data:t,priority:e,callback:o}),o.push=function(t,e=0,o){return n(i(t,e),o)},o.pushAsync=function(t,e=0,o){return r(i(t,e),o)},delete o.unshift,delete o.unshiftAsync,o}var Jt=g(function(t,e){if(e=C(e),!Array.isArray(t))return e(new TypeError("First argument to race must be an array of functions"));if(!t.length)return e();for(var o=0,n=t.length;o<n;o++)v(t[o])(e)},2);function Kt(t,e,o,n){var r=[...t].reverse();return tt(r,e,o,n)}function Yt(t){var e=v(t);return n(function(t,o){return t.push((t,...e)=>{let n={};if(t&&(n.error=t),e.length>0){var r=e;e.length<=1&&([r]=e),n.value=r}o(null,n)}),e.apply(this,t)})}function Xt(t){var e;return Array.isArray(t)?e=t.map(Yt):(e={},Object.keys(t).forEach(o=>{e[o]=Yt.call(this,t[o])})),e}function Zt(t,e,o,n){const r=v(o);return Tt(t,e,(t,e)=>{r(t,(t,o)=>{e(t,!o)})},n)}var $t=g(function(t,e,o){return Zt(k,t,e,o)},3),te=g(function(t,e,o,n){return Zt(I(e),t,o,n)},4),ee=g(function(t,e,o){return Zt(F,t,e,o)},3);function oe(t){return function(){return t}}const ne=5,re=0;function ie(t,e,o){var n={times:ne,intervalFunc:oe(re)};if(arguments.length<3&&"function"==typeof t?(o=e||V(),e=t):(se(n,t),o=o||V()),"function"!=typeof e)throw new Error("Invalid arguments for async.retry");var r=v(e),i=1;return function t(){r((e,...r)=>{!1!==e&&(e&&i++<n.times&&("function"!=typeof n.errorFilter||n.errorFilter(e))?setTimeout(t,n.intervalFunc(i-1)):o(e,...r))})}(),o[B]}function se(t,e){if("object"==typeof e)t.times=+e.times||ne,t.intervalFunc="function"==typeof e.interval?e.interval:oe(+e.interval||re),t.errorFilter=e.errorFilter;else{if("number"!=typeof e&&"string"!=typeof e)throw new Error("Invalid arguments for async.retry");t.times=+e||ne}}function ae(t,e){e||(e=t,t=null);let o=t&&t.arity||e.length;f(e)&&(o+=1);var r=v(e);return n((e,n)=>{function i(t){r(...e,t)}return(e.length<o-1||null==n)&&(e.push(n),n=V()),t?ie(t,i,n):ie(i,n),n[B]})}function ce(t,e){return Vt(F,t,e)}var le=g(function(t,e,o){return ct(Boolean,t=>t)(k,t,e,o)},3),ue=g(function(t,e,o,n){return ct(Boolean,t=>t)(I(e),t,o,n)},4),he=g(function(t,e,o){return ct(Boolean,t=>t)(F,t,e,o)},3),pe=g(function(t,e,o){var n=v(e);return E(t,(t,e)=>{n(t,(o,n)=>{if(o)return e(o);e(o,{value:t,criteria:n})})},(t,e)=>{if(t)return o(t);o(null,e.sort(r).map(t=>t.value))});function r(t,e){var o=t.criteria,n=e.criteria;return o<n?-1:o>n?1:0}},3);function fe(t,e,o){var r=v(t);return n((n,i)=>{var s,a=!1;n.push((...t)=>{a||(i(...t),clearTimeout(s))}),s=setTimeout(function(){var e=t.name||"anonymous",n=new Error('Callback function "'+e+'" timed out.');n.code="ETIMEDOUT",o&&(n.info=o),a=!0,i(n)},e),r(...n)})}function de(t){for(var e=Array(t);t--;)e[t]=t;return e}function ye(t,e,o,n){var r=v(o);return nt(de(t),e,r,n)}function ve(t,e,o){return ye(t,1/0,e,o)}function ge(t,e,o){return ye(t,1,e,o)}function me(t,e,o,n){arguments.length<=3&&"function"==typeof e&&(n=o,o=e,e=Array.isArray(t)?[]:{}),n=C(n||V());var r=v(o);return k(t,(t,o,n)=>{r(e,t,o,n)},t=>n(t,e)),n[B]}var be=g(function(t,e){var o,n=null;return bt(t,(t,e)=>{v(t)((t,...r)=>{if(!1===t)return e(t);r.length<2?[o]=r:o=r,n=t,e(t?null:{})})},()=>e(n,o))});function _e(t){return(...e)=>(t.unmemoized||t)(...e)}var we=g(function(t,e,o){o=O(o);var n=v(e),r=v(t),i=[];function s(t,...e){if(t)return o(t);i=e,!1!==t&&r(a)}function a(t,e){return t?o(t):!1!==t?e?void n(s):o(null,...i):void 0}return r(a)},3);function Ce(t,e,o){const n=v(t);return we(t=>n((e,o)=>t(e,!o)),e,o)}var Se=g(function(t,e){if(e=C(e),!Array.isArray(t))return e(new Error("First argument to waterfall must be an array of functions"));if(!t.length)return e();var o=0;function n(e){v(t[o++])(...e,O(r))}function r(r,...i){if(!1!==r)return r||o===t.length?e(r,...i):void n(i)}n([])}),Ae={apply:o,applyEach:G,applyEachSeries:N,asyncify:u,auto:D,autoInject:J,cargo:Z,cargoQueue:$,compose:ot,concat:it,concatLimit:rt,concatSeries:st,constant:at,detect:lt,detectLimit:ut,detectSeries:ht,dir:ft,doUntil:yt,doWhilst:dt,each:gt,eachLimit:mt,eachOf:k,eachOfLimit:L,eachOfSeries:F,eachSeries:bt,ensureAsync:_t,every:wt,everyLimit:Ct,everySeries:St,filter:Ot,filterLimit:Mt,filterSeries:It,forever:Lt,groupBy:Rt,groupByLimit:xt,groupBySeries:kt,log:Et,map:E,mapLimit:nt,mapSeries:j,mapValues:Ft,mapValuesLimit:Gt,mapValuesSeries:jt,memoize:Nt,nextTick:Bt,parallel:Dt,parallelLimit:Wt,priorityQueue:Qt,queue:Ht,race:Jt,reduce:tt,reduceRight:Kt,reflect:Yt,reflectAll:Xt,reject:$t,rejectLimit:te,rejectSeries:ee,retry:ie,retryable:ae,seq:et,series:ce,setImmediate:l,some:le,someLimit:ue,someSeries:he,sortBy:pe,timeout:fe,times:ve,timesLimit:ye,timesSeries:ge,transform:me,tryEach:be,unmemoize:_e,until:Ce,waterfall:Se,whilst:we,all:wt,allLimit:Ct,allSeries:St,any:le,anyLimit:ue,anySeries:he,find:lt,findLimit:ut,findSeries:ht,flatMap:it,flatMapLimit:rt,flatMapSeries:st,forEach:gt,forEachSeries:bt,forEachLimit:mt,forEachOf:k,forEachOfSeries:F,forEachOfLimit:L,inject:tt,foldl:tt,foldr:Kt,select:Ot,selectLimit:Mt,selectSeries:It,wrapSync:u,during:we,doDuring:dt};e.default=Ae,e.apply=o,e.applyEach=G,e.applyEachSeries=N,e.asyncify=u,e.auto=D,e.autoInject=J,e.cargo=Z,e.cargoQueue=$,e.compose=ot,e.concat=it,e.concatLimit=rt,e.concatSeries=st,e.constant=at,e.detect=lt,e.detectLimit=ut,e.detectSeries=ht,e.dir=ft,e.doUntil=yt,e.doWhilst=dt,e.each=gt,e.eachLimit=mt,e.eachOf=k,e.eachOfLimit=L,e.eachOfSeries=F,e.eachSeries=bt,e.ensureAsync=_t,e.every=wt,e.everyLimit=Ct,e.everySeries=St,e.filter=Ot,e.filterLimit=Mt,e.filterSeries=It,e.forever=Lt,e.groupBy=Rt,e.groupByLimit=xt,e.groupBySeries=kt,e.log=Et,e.map=E,e.mapLimit=nt,e.mapSeries=j,e.mapValues=Ft,e.mapValuesLimit=Gt,e.mapValuesSeries=jt,e.memoize=Nt,e.nextTick=Bt,e.parallel=Dt,e.parallelLimit=Wt,e.priorityQueue=Qt,e.queue=Ht,e.race=Jt,e.reduce=tt,e.reduceRight=Kt,e.reflect=Yt,e.reflectAll=Xt,e.reject=$t,e.rejectLimit=te,e.rejectSeries=ee,e.retry=ie,e.retryable=ae,e.seq=et,e.series=ce,e.setImmediate=l,e.some=le,e.someLimit=ue,e.someSeries=he,e.sortBy=pe,e.timeout=fe,e.times=ve,e.timesLimit=ye,e.timesSeries=ge,e.transform=me,e.tryEach=be,e.unmemoize=_e,e.until=Ce,e.waterfall=Se,e.whilst=we,e.all=wt,e.allLimit=Ct,e.allSeries=St,e.any=le,e.anyLimit=ue,e.anySeries=he,e.find=lt,e.findLimit=ut,e.findSeries=ht,e.flatMap=it,e.flatMapLimit=rt,e.flatMapSeries=st,e.forEach=gt,e.forEachSeries=bt,e.forEachLimit=mt,e.forEachOf=k,e.forEachOfSeries=F,e.forEachOfLimit=L,e.inject=tt,e.foldl=tt,e.foldr=Kt,e.select=Ot,e.selectLimit=Mt,e.selectSeries=It,e.wrapSync=u,e.during=we,e.doDuring=dt,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof o&&void 0!==e?n(o):"function"==typeof define&&define.amd?define(["exports"],n):n(this.async={})}).call(this,t("_process"))},{_process:1}],Enums:[function(t,e,o){"use strict";cc._RF.push(e,"860e9yo5Z5FdpwLnSS14+jg","Enums");var n,r=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.prop=o.ui=o.events=o.Key=o.Assets=o.Clips=o.SoundStatus=o.spacesArr=o.dft_lingWidth=o.CUP_SELECTED_MOVE_HEIGHT=o.AnimationTime=o.defaultColor=o.WaterColors=o.SPLIT_COUNT=o.ANGLE_FACTOR=o.HEIGHT_FACTOR=o.PourAction=o.BASIC_DATA=o.MAX_ARR_LEN=o.shareVideoConfig=o.shareConfig=o.shareVideoContent=o.shareContent=o.adConfig=void 0;var i=cc._decorator,s=i.ccclass,a=i.property,c=function(){function t(){this.platform="platform",this.id=0,this.bannerId=[],this.intersitialId=[],this.videoId=[],this.customId=[]}return r([a()],t.prototype,"platform",void 0),r([a({type:cc.Integer})],t.prototype,"id",void 0),r([a({type:cc.String})],t.prototype,"bannerId",void 0),r([a({type:cc.String})],t.prototype,"intersitialId",void 0),r([a({type:cc.String})],t.prototype,"videoId",void 0),r([a({type:cc.String})],t.prototype,"customId",void 0),r([s("adConfig")],t)}();o.adConfig=c;var l=function(){function t(){this.shareId="",this.shareLink="",this.shareText="\u5206\u4eab\u6807\u9898"}return r([a()],t.prototype,"shareId",void 0),r([a()],t.prototype,"shareLink",void 0),r([a()],t.prototype,"shareText",void 0),r([s("shareContent")],t)}();o.shareContent=l;var u=function(){function t(){this.shareId="",this.title="\u5206\u4eab\u6807\u9898",this.desc="",this.videoTopics=[]}return r([a()],t.prototype,"shareId",void 0),r([a()],t.prototype,"title",void 0),r([a()],t.prototype,"desc",void 0),r([a({type:cc.String})],t.prototype,"videoTopics",void 0),r([s("shareVideoContent")],t)}();o.shareVideoContent=u;var h=function(){function t(){this.platform="platform",this.sharePics=[]}return r([a()],t.prototype,"platform",void 0),r([a({type:l})],t.prototype,"sharePics",void 0),r([s("shareConfig")],t)}();o.shareConfig=h;var p=function(){function t(){this.platform="platform",this.sharePics=[]}return r([a()],t.prototype,"platform",void 0),r([a({type:u})],t.prototype,"sharePics",void 0),r([s("shareVideoConfig")],t)}();o.shareVideoConfig=p,o.MAX_ARR_LEN=6,function(t){t[t.color_alpha=1]="color_alpha",t[t.color_range=255]="color_range",t[t.BYTE=4]="BYTE",t[t.color_alpha2=1]="color_alpha2",t[t.color_alpha3=2]="color_alpha3",t[t.color_alpha4=3]="color_alpha4"}(o.BASIC_DATA||(o.BASIC_DATA={})),function(t){t[t.none=0]="none",t[t.in=1]="in",t[t.out=2]="out"}(o.PourAction||(o.PourAction={})),o.HEIGHT_FACTOR=.8,o.ANGLE_FACTOR=.01,o.SPLIT_COUNT=4,o.WaterColors=["#155DEF","#F2C90F","#BD2656","#F0791F","#03032d","#0ce0f4","#9adb8e","#ef149b","#16cd09","#DD2E44","#E5C69A","#65DC8E","#B068F0","#6e7a79","#538849"],o.defaultColor="#538849",function(t){t[t.pourTime=.2]="pourTime",t[t.moveTime=.1]="moveTime"}(o.AnimationTime||(o.AnimationTime={})),o.CUP_SELECTED_MOVE_HEIGHT=100,o.dft_lingWidth=6,o.spacesArr=((n={})[1]=[40,1],n[2]=[80,1],n[3]=[60,1],n[4]=[45,.9],n[5]=[35,.85],n[6]=[35,.85],n[7]=[25,.7],n[8]=[15,.7],n),function(t){t[t.on=1]="on",t[t.off=-1]="off"}(o.SoundStatus||(o.SoundStatus={})),o.Clips={Button_Click:"Button_Click",ContainerFinish:"ContainerFinish",firework_1:"firework_1",modal:"modal",pourWater:"pourWater",Show_Victory:"Show_Victory",reward:"reward"},o.Assets={UiPrefab:{type:cc.Prefab,path:"Preload/Prefabs/UI/"},CommonPrefab:{type:cc.Prefab,path:"Preload/Prefabs/Common/"},Json:{type:cc.JsonAsset,path:"Preload/Jsons/"},Sound:{type:cc.AudioClip,path:"Preload/Clips/"},UiFrame:{type:cc.SpriteFrame,path:"Preload/UI/"}},o.Key={ToolSetting:"ToolSetting",Lv:"Lv",Today:"Today",CupSetting:"CupSetting",ReceiveList:"ReceiveList",ReceiveListTime:"ReceiveListTime",SideReward:"SideReward",CodeList:"CodeList",CoinCount:"CoinCount",CurMaxLevel:"CurMaxLevel"},o.events={GameStart:"GameStart",Toast:"Toast",ChangeSound:"ChangeSound",Reset:"Reset",Back:"Back",AddTube:"AddTube",Start:"Start",TimeStop:"TimeStop",LevelFinish:"LevelFinish",Pour:"Pour",ExcuteGuideTask:"ExcuteGuideTask",Pause:"Pause",LevelSelectChange:"LevelSelectChange",BackToMain:"BackToMain"},o.ui={GameView:{name:"GameView",layer:3,clear:!1},MainView:{name:"MainView",layer:3,clear:!1},VictoryView:{name:"VictoryView",layer:3,clear:!1},ShopView:{name:"ShopView",layer:3,clear:!1},LevelView:{name:"LevelView",layer:3,clear:!1},GetCupView:{name:"GetCupView",layer:3,clear:!1},ToastView:{name:"ToastView",layer:6,clear:!1},SettingView:{name:"SettingView",layer:6,clear:!1}},o.prop={reset:{name:"reset",layer:3,clear:!1},back:{name:"back",layer:3,clear:!1},tube:{name:"tube",layer:3,clear:!1}},cc._RF.pop()},{}],GameMgr:[function(t,e,o){"use strict";cc._RF.push(e,"fc646V3p1hLl4EMPJbOXsZW","GameMgr");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../enum/Enums"),a=t("./SoundMgr"),c=cc._decorator,l=c.ccclass,u=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.start=function(){cc.director.on(s.events.Pour,this.onPour,this),cc.director.on(s.events.LevelFinish,this.onLevelFinish,this)},e.prototype.onDisable=function(){cc.director.off(s.events.Pour,this.onPour,this),cc.director.off(s.events.LevelFinish,this.onLevelFinish,this)},e.prototype.onPour=function(){console.log("===================================="),console.log("onPour"),console.log("====================================")},e.prototype.onLevelFinish=function(){console.log("===================================="),console.log("onLevelFinish"),console.log("===================================="),a.SoundMgr.ins.playSound(s.Clips.Show_Victory)},i([l],e)}(cc.Component));o.default=u,cc._RF.pop()},{"../enum/Enums":"Enums","./SoundMgr":"SoundMgr"}],GameView:[function(t,e,o){"use strict";cc._RF.push(e,"945b0ldndVLiZvMb+WPC41w","GameView");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{c(n.next(t))}catch(e){i(e)}}function a(t){try{c(n.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return c([t,e])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../Global"),l=t("../ad/DyRecorderManager"),u=t("../enum/Enums"),h=t("../manager/PropMgr"),p=t("../manager/SoundMgr"),f=t("../manager/CoinMgr"),d=t("../manager/CupMgr"),y=t("../manager/ResMgr"),v=t("../utils/Tools"),g=t("./BaseView"),m=t("./VictoryView"),b=cc._decorator,_=b.ccclass,w=b.property,C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lvLabel=null,e.resetMgr=null,e.backMgr=null,e.tubeMgr=null,e.coinPrefab=null,e.effectRoot=null,e.coinBgNode=null,e.coinManagerNode=null,e.initLevel=c.Global.lv,e.onceAdd=!1,e.tween=null,e}var o;return r(e,t),o=e,e.prototype.onEnable=function(){cc.director.on(u.events.LevelFinish,this.GameResult,this),cc.director.on(u.events.LevelSelectChange,this.eventLevelChange,this),cc.director.on(u.events.AddTube,this.toolCountChange,this),cc.director.on(u.events.Back,this.toolCountChange,this)},e.prototype.onDisable=function(){cc.director.off(u.events.LevelFinish,this.GameResult,this),cc.director.off(u.events.LevelSelectChange,this.eventLevelChange,this),cc.director.off(u.events.AddTube,this.toolCountChange,this),cc.director.off(u.events.Back,this.toolCountChange,this)},e.prototype.start=function(){v.save("isPlayGame",!0),o.ins=this},e.prototype.setLvLabel=function(t){var e=t;console.log(" _Lv:::: ",t,"  Global.Lv:::  ",c.Global.lv),null!=t&&0!=t||(e=c.Global.lv),this.lvLabel.string="<b><color=#608bc1><outline color=#000000 width=2>level </outline></c><color=#FAFAFA><outline color=#000000 width=2>"+e+"</outline></c></b>"},e.prototype.onResetClick=function(e){console.log(c.Global.getToolSetting("reset")),this.onceAdd=!1,c.Global.getToolSetting("reset")>0?(c.Global.addToolSetting("reset",-1),cc.director.emit(u.events.Reset)):(console.log(e.target),t.prototype.showVideo.call(this,function(){cc.director.emit(u.events.Reset)})),this.setProps(c.Global._toolSetting)},e.prototype.onBackClick=function(e){d.default.ins.checkCanUndo()&&(c.Global.getToolSetting("back")>0?(c.Global.addToolSetting("back",-1),cc.director.emit(u.events.Back)):(console.log(e.target),t.prototype.showVideo.call(this,function(){cc.director.emit(u.events.Back)})),this.setProps(c.Global._toolSetting))},e.prototype.onAddTubeClick=function(e){var o=this;this.onceAdd?cc.director.emit(u.events.Toast,"Only add one tuber per level"):d.default.ins.checkCanAddTube()&&(c.Global.getToolSetting("tube")>0?(c.Global.addToolSetting("tube",-1),this.onceAdd=!0,cc.director.emit(u.events.AddTube)):(console.log(e.target),t.prototype.showVideo.call(this,function(){o.onceAdd=!0,cc.director.emit(u.events.AddTube)})),this.setProps(c.Global._toolSetting))},e.prototype.onTimeStopClick=function(e){console.log(e.target),t.prototype.showVideo.call(this,function(){cc.director.emit(u.events.TimeStop)})},e.prototype.onBackMainClick=function(){t.prototype.close.call(this),this.node.destroy(),cc.director.emit(u.events.BackToMain),console.log("  emit  BackMain Event. ")},e.prototype.playCoinAnimation=function(t){var e=this,o=t.position,n=(t.parent.convertToWorldSpaceAR(o),cc.instantiate(this.coinPrefab)),r=f.default.ins.getLabelPosition(),i=f.default.ins.coinLabel.node.parent.convertToWorldSpaceAR(r);this.coinManagerNode.convertToWorldSpaceAR(i),this.effectRoot.convertToNodeSpaceAR(i),this.effectRoot.addChild(n),n.position=o,this.tween=cc.tween(n).to(1,{x:r.x,y:r.y,angle:360},{easing:"quartIn"}).call(function(){e.tween=null,n.destroy(),c.Global.addCoin(c.Global.tubeRewardCoin),f.default.ins.setCoinLabel()}).start()},e.prototype.GameResult=function(){return s(this,void 0,void 0,function(){var t,e;return a(this,function(o){switch(o.label){case 0:return this.onceAdd=!1,c.Global.addLv(),p.SoundMgr.ins.playSound(u.Clips.Show_Victory),this.init(),[4,y.default.ins.getUI(u.ui.VictoryView)];case 1:return t=o.sent(),cc.find("Canvas").addChild(t),t.getComponent(m.default).init(),[4,l.DyRecorderManager.ins.stop()];case 2:return e=o.sent(),console.log(e,"videoPath"),[2]}})})},e.prototype.init=function(t){this.initLevel=t,null!=t&&(c.Global.lv=t),this.setLvLabel(t);var e=v.load(u.Key.ToolSetting,2);c.Global._toolSetting=e||c.Global._toolSetting,this.setProps(c.Global._toolSetting)},e.prototype.onLevelClick=function(){return s(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,y.default.ins.getUI(u.ui.LevelView)];case 1:return t.sent().parent=this.node.parent,[2]}})})},e.prototype.toolCountChange=function(){this.setProps(c.Global._toolSetting)},e.prototype.setProps=function(t){this.resetMgr.setNum(t.reset),this.backMgr.setNum(t.back),this.tubeMgr.setNum(t.tube)},e.prototype.eventLevelChange=function(){this.setLvLabel()},e.ins=null,i([w(cc.RichText)],e.prototype,"lvLabel",void 0),i([w(h.default)],e.prototype,"resetMgr",void 0),i([w(h.default)],e.prototype,"backMgr",void 0),i([w(h.default)],e.prototype,"tubeMgr",void 0),i([w(cc.Prefab)],e.prototype,"coinPrefab",void 0),i([w(cc.Node)],e.prototype,"effectRoot",void 0),i([w(cc.Node)],e.prototype,"coinBgNode",void 0),i([w(cc.Node)],e.prototype,"coinManagerNode",void 0),o=i([_],e)}(g.default);o.default=C,cc._RF.pop()},{"../Global":"Global","../ad/DyRecorderManager":"DyRecorderManager","../enum/Enums":"Enums","../manager/CoinMgr":"CoinMgr","../manager/CupMgr":"CupMgr","../manager/PropMgr":"PropMgr","../manager/ResMgr":"ResMgr","../manager/SoundMgr":"SoundMgr","../utils/Tools":"Tools","./BaseView":"BaseView","./VictoryView":"VictoryView"}],GetCupView:[function(t,e,o){"use strict";cc._RF.push(e,"e2db6D/v1VA2YRr1aZaw11b","GetCupView");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./BaseView"),a=cc._decorator,c=a.ccclass,l=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.propSprite=null,e.rootNode=null,e}return r(e,t),e.prototype.start=function(){console.log(" GetCupView. Starttttt.... ")},e.prototype.setTitleImg=function(){},e.prototype.setPropImg=function(t){this.propSprite.spriteFrame=t},e.prototype.setScale=function(t){this.rootNode.scale=t},e.prototype.close=function(){this.node.destroy(),this.cancelFn&&this.cancelFn()},i([l(cc.Sprite)],e.prototype,"propSprite",void 0),i([l(cc.Node)],e.prototype,"rootNode",void 0),i([c],e)}(s.default);o.default=u,cc._RF.pop()},{"./BaseView":"BaseView"}],Global:[function(t,e,o){"use strict";cc._RF.push(e,"97215z3FR9KQZoWbMciCTCo","Global"),Object.defineProperty(o,"__esModule",{value:!0}),o.Global=void 0;var n=t("./enum/Enums"),r=t("./utils/Tools"),i=function(){function t(){}return Object.defineProperty(t,"receiveList",{get:function(){return t._receiveList},set:function(t){this._receiveList=t},enumerable:!1,configurable:!0}),t.setReceiveList=function(e){t._receiveList.push(e),this.saveReceiveListLocal()},t.saveReceiveListLocal=function(){r.save(n.Key.ReceiveList,JSON.stringify(t._receiveList)),r.save(n.Key.ReceiveListTime,r.getDate())},t.clearReceiveList=function(){t._receiveList=[],this.saveReceiveListLocal()},Object.defineProperty(t,"codeList",{get:function(){return this._codeList},set:function(t){this._codeList=t},enumerable:!1,configurable:!0}),t.setCodeList=function(t){this._codeList.push(t),r.save(n.Key.CodeList,JSON.stringify(this._codeList))},Object.defineProperty(t,"cupSetting",{get:function(){return this._cupSetting},set:function(t){this._cupSetting=t},enumerable:!1,configurable:!0}),t.setCupCurrent=function(e){t._cupSetting.current=e==t._cupSetting.current?null:e,r.save(n.Key.CupSetting,JSON.stringify(t._cupSetting))},t.setCupHavaList=function(e){t._cupSetting.haveList.includes(e)||(t._cupSetting.haveList.push(e),r.save(n.Key.CupSetting,JSON.stringify(t._cupSetting)))},t.resetCupHaveList=function(){t._cupSetting.haveList=["01"],t._cupSetting.current="01"},t.addToolSetting=function(t,e){this._toolSetting[t]+=+e,r.save(n.Key.ToolSetting,JSON.stringify(this._toolSetting))},t.getToolSetting=function(t){return+this._toolSetting[t]},t.addLv=function(){this.lv<this.maxLv&&this.lv++,this.lv>this.currentMaxLv&&(this.currentMaxLv=this.lv,r.save(n.Key.CurMaxLevel,this.currentMaxLv),console.log(" Save New Max Level::::: ",this.currentMaxLv)),r.save(n.Key.Lv,this.lv)},t.subLv=function(){this.lv>1&&this.lv--,r.save(n.Key.Lv,this.lv)},t.setLv=function(t){t>0&&t<=this.maxLv&&(this.lv=t),r.save(n.Key.Lv,this.lv)},t.addCoin=function(t){this.currentCoin=this.currentCoin+t,r.save(n.Key.CoinCount,this.currentCoin)},t.subCoin=function(t){t>this.currentCoin?console.error("Sub coin is not enough \uff01\uff01\uff01\uff01"):(this.currentCoin=this.currentCoin-t,r.save(n.Key.CoinCount,this.currentCoin))},t.getCurrentCoin=function(){return this.currentCoin},t.Pause=function(e){void 0===e&&(e=!0),cc.director.emit(n.events.Pause,e),t.start=!e},t.Debug=!0,t.bgm=n.SoundStatus.on,t.sound=n.SoundStatus.on,t.LoadingRate=0,t.enableShareAd=!0,t.start=!1,t.layer=[],t.lv=1,t.maxLv=420,t.currentMaxLv=1,t.maxTube=15,t.action_list=[],t.action_step=5,t.startCoin=0,t.currentCoin=0,t.tubeRewardCoin=5,t.rewardCoin=10,t.watchAdReward=50,t._receiveList=[],t._toolSetting={reset:1,back:1,tube:1},t._cupSetting={haveList:["01"],current:"01"},t._codeList=[],t}();o.Global=i,cc._RF.pop()},{"./enum/Enums":"Enums","./utils/Tools":"Tools"}],GuideFinger:[function(t,e,o){"use strict";cc._RF.push(e,"a98d3lGMCVFDoOpdeXCzU2K","GuideFinger");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.GuideFinger=void 0;var s=cc._decorator,a=s.ccclass,c=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),i([a],e)}(cc.Component));o.GuideFinger=c,cc._RF.pop()},{}],GuideTaskMgr:[function(t,e,o){"use strict";cc._RF.push(e,"0ea37Q85FJO/Iq13E7CO66f","GuideTaskMgr");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.GuideTaskMgr=void 0;var s=cc._decorator,a=s.ccclass,c=s.property,l=t("async"),u=t("../enum/Enums"),h=cc.v3(),p=function(e){function o(){var t=null!==e&&e.apply(this,arguments)||this;return t.FINGER_PREFAB=null,t._finger=null,t._isOpenMaskInfo=!0,t}var n;return r(o,e),n=o,o.prototype.onLoad=function(){this.FINGER_PREFAB&&(this._finger=cc.instantiate(this.FINGER_PREFAB),this._finger.parent=this.node,this._finger.active=!1),this.node.setContentSize(cc.winSize),cc.systemEvent.on(u.events.ExcuteGuideTask,this.ExcuteGuideTask,this),this.node.on(cc.Node.EventType.TOUCH_START,this.addSetSwallowTouchesEventListener,this),this._mask=this.node.getComponentInChildren(cc.Mask),console.log(" GuideTaskManager.Mask:::: ",this._mask," Finger:::::: ",this._finger),this._maskInfo=this._mask.node.getChildByName("info"),this._mask.node.active=!1,this._maskInfo.active=this._isOpenMaskInfo},o.prototype.ExcuteGuideTask=function(e){var o=this;this._mask.node.active=!0;var r=e.taskFlie,i=e.stepIndex,s=t(r).task,a=s.steps[i];console.log(" ExcuteGuideTask Index::::::: ",i," Step:::: ",a),this._targetNode=null;var c=function(){console.log("ExcuteGuideTask guideFn ::::::: "),l.default.series({stepStart:function(t){console.log("ExcuteGuideTask stepStart ::::::: "),a.onStart?a.onStart(function(){t()}):t()},stepExcute:function(t){console.log("ExcuteGuideTask stepExcute ::::::: ",o._mask.node),a.onExcute&&a.onExcute(function(){o._mask.node.getChildByName("label").getComponent(cc.Label).string=a.command.text,o.scheduleOnce(function(){var e=n[a.command.cmd];e&&e(o,a,function(e){t(e)})},a.delayTime||0)})},stepEnd:function(t){console.log("ExcuteGuideTask stepEnd ::::::: "),a.onEnd?a.onEnd(function(){t()}):t(),(a=s.steps[++i])?(console.log("ExcuteGuideTask Start Next Step ::::::: "),c()):(o._mask._graphics.clear(),o._mask.node.active=!1,o._finger.active=!1)}},function(){})};console.log("ExcuteGuideTask guideFn Up::::::: "),c()},o.prototype.addSetSwallowTouchesEventListener=function(t){if(this._mask.node.active)if(this._targetNode){if(cc.isValid(this._targetNode)){var e=this._targetNode.getBoundingBox();console.log(this._targetNode.getPosition(),t.getLocation(),"event.getLocation()event.getLocation()event.getLocation()");var o=this._targetNode.getWorldPosition(h);console.log(o);var n=t.getLocation(),r=e.width/2,i=e.height/2;n.x>=o.x-r&&n.x<=o.x+e.width+r&&n.y>=o.y-i&&n.y<=o.y+e.height+i?this.node._touchListener.setSwallowTouches(!1):this.node._touchListener.setSwallowTouches(!0)}}else this.node._touchListener.setSwallowTouches(!0);else this.node._touchListener.setSwallowTouches(!1)},o.movefinger=function(t,e,o){console.log(" movefinger~~~~~~~ ");var n=e.command;t._targetNode=null,t.find(n.args,function(e){var n=e;t.fingerToNode(n,function(){t._targetNode=n,e.once(cc.Node.EventType.TOUCH_END,function(){o()})})})},o.prototype.find=function(t,e){var o=this;console.log(" GuideManager.Find::: ",t," CB:::: ",e);var n=cc.find("Canvas");this.locateNode(n,t,function(t,n){if(!t){var r=o._focusToNode(n);console.log(r,"rectrectrectrect"),e&&e(n,r)}})},o.prototype.parse=function(t){for(var e,o=[],n={},r=0,i=t.split(/[.,//,>,#]/g);r<i.length;r++){var s=i[r],a=new RegExp("[.,//,>,#]+"+s,"g"),c=t.match(a),l=c&&(null===(e=c[n[s]||0])||void 0===e?void 0:e.replace(s,""))||"/";n[s]?n[s]++:n[s]=1,o.push({symbol:l,name:s.trim(),index:n[s]-1||0})}return o},o.prototype.locateNode=function(t,e,o){for(var n,r=this.parse(e),i=t,s=function(t){var e=r[t];switch(console.log("locateNode111::: ItemName: ",e.name,"ItemSymbol::: ",e.symbol),e.symbol){case"/":console.log("locateNode::: ,ItemName: ",e.name),n=i.getChildByName(e.name);break;case",":n=i.parent.children.filter(function(t){return t.name==e.name})[e.index]}if(!n)return i=null,"break";i=n,console.log("In Loop::::: ",i)},a=0;a<r.length&&"break"!==s(a);a++);return console.log(" locateNode::Node::: ",i),i&&i.active&&o?o(null,i):o(e),i},o.prototype._focusToNode=function(t){this._mask._graphics.clear();var e=t.getBoundingBoxToWorld(),o=this.node.convertToNodeSpaceAR(e.origin);return e.x=o.x,e.y=o.y,this._mask._graphics.fillRect(e.x,e.y,e.width,e.height),e},o.prototype.fingerToNode=function(t,e){this._finger||e(),this._finger.active=!0,this._finger.stopAllActions();var o=this.node.convertToNodeSpaceAR(t.parent.convertToWorldSpaceAR(t.position));o.y-=160,this._finger.setPosition(o),e()},o.FINGER="movefinger",o.typeList=[n.FINGER],i([c(cc.Prefab)],o.prototype,"FINGER_PREFAB",void 0),n=i([a],o)}(cc.Component);o.GuideTaskMgr=p,cc._RF.pop()},{"../enum/Enums":"Enums",async:2}],GuideTask:[function(t,e,o){"use strict";cc._RF.push(e,"a4f296uOsBCoau1POJLaXqn","GuideTask"),Object.defineProperty(o,"__esModule",{value:!0}),o.task=void 0,o.task={name:"Task",debug:!0,steps:[{order:0,name:"GuideTask",command:{cmd:"movefinger",text:"Please select this cup",args:"game/GameView/bgColor/cupBg/cupMgr/layout_v/layout_h_0/cup_p",index:0},delayTime:.1,onStart:function(t){t()},onExcute:function(t){t()},onEnd:function(t){t()}},{order:1,name:"GuideBag",command:{cmd:"movefinger",text:"If you fill the same cup with water of the same color, you pass the level",args:"game/GameView/bgColor/cupBg/cupMgr/layout_v/layout_h_0/cup_p,cup_p",index:1},delayTime:.2,onStart:function(t){t()},onExcute:function(t){t()},onEnd:function(t){t()}}]},cc._RF.pop()},{}],Interface:[function(t,e,o){"use strict";cc._RF.push(e,"c617e36IrhJPoiy7JE4PJ9O","Interface"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],LevelItemView:[function(t,e,o){"use strict";cc._RF.push(e,"d98edtUJidBdqBX5mvxs9Em","LevelItemView");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.default=null,e.select=null,e.isOpen=null,e}return r(e,t),e.prototype.start=function(){},e.prototype.SetLevelIndex=function(t){this.label.string=t.toString()},e.prototype.SetLevelState=function(t){this.node.getComponent(cc.Sprite).spriteFrame=1==t?this.select:this.default},e.prototype.SetOpenState=function(t){this.isOpen.enabled=!t},i([c(cc.Label)],e.prototype,"label",void 0),i([c(cc.SpriteFrame)],e.prototype,"default",void 0),i([c(cc.SpriteFrame)],e.prototype,"select",void 0),i([c(cc.Sprite)],e.prototype,"isOpen",void 0),i([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],LevelView:[function(t,e,o){"use strict";cc._RF.push(e,"f1a14JxH+xDT46JBr7kMyOB","LevelView");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./BaseView"),a=t("../utils/Tools"),c=t("./LevelItemView"),l=t("../Global"),u=t("../enum/Enums"),h=cc._decorator,p=h.ccclass,f=h.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scrollView=null,e.content=null,e.levelItem=null,e}return r(e,t),e.prototype.init=function(){for(var t=[1,2],e=3;e<=420;e++)t.push(e);a.scrollFunc({list:t,spacing:30,row:5,scrollView:this.scrollView,content:this.content,receiveItemHeight:30,cb:this.setPreFab.bind(this)})},e.prototype.setPreFab=function(e,o){var n=this,r=o+1,i=cc.instantiate(this.levelItem),s=i.getComponent(c.default);s.SetLevelIndex(r),i.on("click",function(){r>l.Global.currentMaxLv||(l.Global.lv=r,cc.director.emit(u.events.LevelSelectChange),t.prototype.close.call(n),n.node.destroy())}),r>l.Global.currentMaxLv?s.SetOpenState(!1):(s.SetOpenState(!0),r==l.Global.lv?s.SetLevelState(!0):s.SetLevelState(!1)),i.parent=this.content},e.prototype.start=function(){this.init()},e.prototype.onCloseClick=function(){t.prototype.close.call(this),this.node.destroy()},i([f(cc.ScrollView)],e.prototype,"scrollView",void 0),i([f(cc.Node)],e.prototype,"content",void 0),i([f(cc.Prefab)],e.prototype,"levelItem",void 0),i([p],e)}(s.default);o.default=d,cc._RF.pop()},{"../Global":"Global","../enum/Enums":"Enums","../utils/Tools":"Tools","./BaseView":"BaseView","./LevelItemView":"LevelItemView"}],LoadCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"b4c8dowH5FE/5w1IPRr0ufz","LoadCtrl");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{c(n.next(t))}catch(e){i(e)}}function a(t){try{c(n.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return c([t,e])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../Global"),l=t("../enum/Enums"),u=t("../manager/ResMgr"),h=cc._decorator,p=h.ccclass,f=h.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.load=null,e.loadingNode=null,e.isload=!0,e.once=!1,e}return r(e,t),e.prototype.closeLoad=function(){return s(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,u.default.ins.getUI(l.ui.MainView)];case 1:return t.sent().parent=this.node.parent,this.isload=!1,this.loadingNode.active=!1,this.node.destroy(),[2]}})})},e.prototype.update=function(){this.isload&&(this.load.progress=c.Global.LoadingRate,c.Global.LoadingRate>=.99&&!this.once&&(this.once=!0,this.closeLoad()))},i([f(cc.ProgressBar)],e.prototype,"load",void 0),i([f(cc.Node)],e.prototype,"loadingNode",void 0),i([p],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../Global":"Global","../enum/Enums":"Enums","../manager/ResMgr":"ResMgr"}],MainView:[function(t,e,o){"use strict";cc._RF.push(e,"7a12ciUtJ5JVo+/8W5Q9aEg","MainView");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{c(n.next(t))}catch(e){i(e)}}function a(t){try{c(n.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return c([t,e])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./BaseView"),l=t("./GameView"),u=t("../manager/ResMgr"),h=t("../Global"),p=t("../enum/Enums"),f=cc._decorator,d=f.ccclass,y=f.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.content=null,e.lvLabel=null,e}var o;return r(e,t),o=e,e.prototype.onEnable=function(){cc.director.on(p.events.LevelSelectChange,this.eventLevelChange,this),cc.director.on(p.events.BackToMain,this.eventBackToMain,this)},e.prototype.onDisable=function(){cc.director.off(p.events.LevelSelectChange,this.eventLevelChange,this),cc.director.off(p.events.BackToMain,this.eventBackToMain,this)},e.prototype.start=function(){this.setLvLabel(),o.ins=this},e.prototype.setLvLabel=function(t){var e=t;null!=t&&0!=t||(e=h.Global.lv),this.lvLabel.string="<b><color=#FAFAFA><outline color=#000000 width=4>Level </outline></c><color=#FAFAFA><outline color=#000000 width=4>"+e+"</outline></c></b>"},e.prototype.onStartGameClick=function(){return s(this,void 0,void 0,function(){var t;return a(this,function(e){switch(e.label){case 0:return[4,u.default.ins.getUI(p.ui.GameView)];case 1:return(t=e.sent()).getComponent(l.default).init(),t.parent=this.node.parent,[2]}})})},e.prototype.onSettingClick=function(){return s(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,u.default.ins.getUI(p.ui.SettingView)];case 1:return t.sent().parent=this.node.parent,[2]}})})},e.prototype.onShopClick=function(){return s(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,u.default.ins.getUI(p.ui.ShopView)];case 1:return t.sent().parent=this.node.parent,[2]}})})},e.prototype.onLvClick=function(){return s(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,u.default.ins.getUI(p.ui.LevelView)];case 1:return t.sent().parent=this.node.parent,[2]}})})},e.prototype.eventLevelChange=function(){this.setLvLabel()},e.prototype.eventBackToMain=function(){this.setLvLabel()},e.ins=null,i([y(cc.Label)],e.prototype,"label",void 0),i([y(cc.Node)],e.prototype,"content",void 0),i([y(cc.RichText)],e.prototype,"lvLabel",void 0),o=i([d],e)}(c.default);o.default=v,cc._RF.pop()},{"../Global":"Global","../enum/Enums":"Enums","../manager/ResMgr":"ResMgr","./BaseView":"BaseView","./GameView":"GameView"}],Main:[function(t,e,o){"use strict";cc._RF.push(e,"76bc6IsaypCZIihqXEele4k","Main");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{c(n.next(t))}catch(e){i(e)}}function a(t){try{c(n.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return c([t,e])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./Global"),l=t("./enum/Enums"),u=t("./utils/Tools"),h=t("./manager/ResMgr"),p=cc._decorator,f=p.ccclass,d=p.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.maxLevel=999,e.currentLevel=5,e.Platforms=[],e.Shares=[],e.ShareVideoes=[],e}var o;return r(e,t),o=e,e.prototype.onLoad=function(){cc.debug.setDisplayStats(!1),this.loadData(),o.ins=this},e.prototype.start=function(){return s(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,this.loadRes()];case 1:return t.sent(),[2]}})})},e.prototype.loadRes=function(){return s(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return console.log("  Main.......LoadRes"),c.Global.LoadingRate=.04,[4,h.default.ins.loadBundle(1,.01)];case 1:return t.sent(),[4,h.default.ins.loadRes(1,l.Assets.Json,.03)];case 2:return t.sent(),[4,h.default.ins.loadRes(1,l.Assets.UiFrame,.1)];case 3:return t.sent(),[4,h.default.ins.loadRes(1,l.Assets.Sound,.2)];case 4:return t.sent(),[4,h.default.ins.loadRes(1,l.Assets.UiPrefab,.35)];case 5:return t.sent(),[4,h.default.ins.loadRes(1,l.Assets.CommonPrefab,.35)];case 6:return t.sent(),h.default.ins.getUI(l.ui.ToastView),[2]}})})},e.prototype.loadData=function(){c.Global.maxLv=this.maxLevel;var t=u.load(l.Key.Lv);t||(t=this.currentLevel||1),c.Global.setLv(t);var e=u.load(l.Key.CurMaxLevel);console.log(" LoadData.CurMaxLevel:::: ",e),e?c.Global.currentMaxLv=e:(e=t,c.Global.currentMaxLv=e,console.log(" Current Max Level::: ",t));var o=u.load(l.Key.ToolSetting,2);c.Global._toolSetting=o||c.Global._toolSetting;var n=u.load(l.Key.CupSetting,2);c.Global.cupSetting=n||c.Global._cupSetting;var r=u.load(l.Key.ReceiveList,2);c.Global.receiveList=r||c.Global._receiveList;var i=u.load(l.Key.CodeList,2);c.Global.codeList=i||c.Global._codeList;var s=u.load(l.Key.CoinCount);c.Global.currentCoin=s},e.ins=null,i([d({type:cc.Integer,tooltip:"Max Level"})],e.prototype,"maxLevel",void 0),i([d({type:cc.Integer,tooltip:"Current Level"})],e.prototype,"currentLevel",void 0),i([d({type:l.adConfig,tooltip:"Ad Config"})],e.prototype,"Platforms",void 0),i([d({type:l.shareConfig,tooltip:"Share Config"})],e.prototype,"Shares",void 0),i([d({type:l.shareVideoConfig,tooltip:"Share Video Config"})],e.prototype,"ShareVideoes",void 0),o=i([f],e)}(cc.Component);o.default=y,cc._RF.pop()},{"./Global":"Global","./enum/Enums":"Enums","./manager/ResMgr":"ResMgr","./utils/Tools":"Tools"}],Math:[function(t,e,o){"use strict";function n(t){for(;t>360;)t-=360;for(;t<-360;)t+=360;return t%360*Math.PI/180}cc._RF.push(e,"e6b58UKm01IBZaaoeLDHIFB","Math"),Object.defineProperty(o,"__esModule",{value:!0}),o.rotatePt=o.randomNum=o.radian2angle=void 0,o.radian2angle=function(t){return t/Math.PI*180},o.randomNum=function(t,e){switch(arguments.length){case 1:return parseInt(Math.random()*t+"");case 2:return parseInt(Math.random()*(e-t+1)+t+"");default:return 0}},o.rotatePt=function(t,e){var o=n(e),r=cc.v2();return r.x=t.x*Math.cos(o)-t.y*Math.sin(o),r.y=t.x*Math.sin(o)+t.y*Math.cos(o),r},cc._RF.pop()},{}],PoolMgr:[function(t,e,o){"use strict";cc._RF.push(e,"b9306dIq49BWp865ZnBWsam","PoolMgr"),Object.defineProperty(o,"__esModule",{value:!0}),o.PoolMgr=void 0;var n=function(){function t(){this._dictPool={},this._dictPrefab={}}return Object.defineProperty(t,"ins",{get:function(){return this._ins?this._ins:(this._ins=new t,this._ins)},enumerable:!1,configurable:!0}),t.prototype.copyNode=function(t,e){var o=t.name,n=null;if(this._dictPool.hasOwnProperty(o))n=(r=this._dictPool[o]).size()>0?r.get():cc.instantiate(t);else{var r=new cc.NodePool;this._dictPool[o]=r,n=cc.instantiate(t)}return e&&(n.parent=e,n.active=!0),n},t.prototype.getNode=function(t,e,o){var n,r,i;if("string"==typeof t?(n=this._dictPrefab[t],r=t):(n=t,r=t.data.name),this._dictPool.hasOwnProperty(r))if((s=this._dictPool[r]).size()>0)i=s.get();else{if(!n)return console.log("Pool invalid prefab name = ",r),null;i=cc.instantiate(n)}else{if(!n)return console.log("Pool invalid prefab name = ",r),null;var s=new cc.NodePool;this._dictPool[r]=s,i=cc.instantiate(n)}return e&&(i.parent=e,i.active=!0,o&&(i.position=o)),i},t.prototype.putNode=function(t,e){if(void 0===e&&(e=!1),t){var o=t.name,n=null;this._dictPool.hasOwnProperty(o)?n=this._dictPool[o]:(n=new cc.NodePool,this._dictPool[o]=n),n.put(t)}},t.prototype.clearPool=function(t){this._dictPool.hasOwnProperty(t)&&this._dictPool[t].clear()},t.prototype.setPrefab=function(t,e){this._dictPrefab[t]=e},t.prototype.getPrefab=function(t){return this._dictPrefab[t]},t}();o.PoolMgr=n,cc._RF.pop()},{}],PropBlockMgr:[function(t,e,o){"use strict";cc._RF.push(e,"aaa4cdODmNKgZEs8bxjVLgp","PropBlockMgr");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.labelShow=!0,e}return r(e,t),e.prototype.start=function(){this.labelShow||(this.label.node.active=!1),this.setLabelColor(new cc.Color(255,255,255)),this.setLabelFontSize(25)},e.prototype.setLabel=function(t){this.label.string=t},e.prototype.setLabelColor=function(t){this.label.node.color=t},e.prototype.setLabelFontSize=function(t){this.label.fontSize=t},i([c(cc.Label)],e.prototype,"label",void 0),i([c(cc.Boolean)],e.prototype,"labelShow",void 0),i([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],PropMgr:[function(t,e,o){"use strict";cc._RF.push(e,"554c0mzm+1PjK6tmvsRNfvT","PropMgr");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.PropState=void 0;var s,a=cc._decorator,c=a.ccclass,l=a.property;(function(t){t[t.Video=1]="Video",t[t.Share=2]="Share"})(s=o.PropState||(o.PropState={}));var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.videoNode=null,e.shareNode=null,e.numNode=null,e.num=0,e.state=s.Video,e}return r(e,t),e.prototype.setNum=function(t){this.num=t,this.showNodeByState()},e.prototype.showNodeByState=function(){this.num>0?(this.numNode.active=!0,this.numNode.getComponent(cc.Label).string=this.num.toString(),this.videoNode.active=!1,this.shareNode.active=!1):(this.numNode.active=!1,this.state==s.Video?(this.videoNode.active=!0,this.shareNode.active=!1):(this.videoNode.active=!1,this.shareNode.active=!0))},e.prototype.setState=function(t){this.state=t},e.prototype.start=function(){},i([l(cc.Node)],e.prototype,"videoNode",void 0),i([l(cc.Node)],e.prototype,"shareNode",void 0),i([l(cc.Node)],e.prototype,"numNode",void 0),i([c],e)}(cc.Component);o.default=u,cc._RF.pop()},{}],QQPlatform:[function(t,e,o){"use strict";cc._RF.push(e,"471b5ra1sBCW7AEh14gsEGD","QQPlatform");var n=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{c(n.next(t))}catch(e){i(e)}}function a(t){try{c(n.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return c([t,e])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.QQPlatform=void 0;var i=t("../manager/Main"),s=function(){function t(){this.qq=window.qq}return Object.defineProperty(t,"ins",{get:function(){return this._ins?this._ins:(this._ins=new t,this._ins.init(),this._ins)},enumerable:!1,configurable:!0}),t.prototype.init=function(){this.qq.showShareMenu({withShareTicket:!0,menus:["qq","qzone","wechatFriends","wechatMoment"]});var t=i.default.ins.Shares[0].sharePics;t.length>0&&this.qq.onShareAppMessage(function(){var e=Math.floor(Math.random()*t.length);return{title:t[e].shareText,imageUrl:t[e].shareLink}})},t.prototype.getLaunchOption=function(){return this.qq.getLaunchOptionsSync().query},t.prototype.getScene=function(){return this.qq.getLaunchOptionsSync().scene},t.prototype.showShare=function(t){if(void 0===t&&(t=""),i.default.ins.Shares[0]){var e=i.default.ins.Shares[0].sharePics;if(!(e.length<=0)){var o=Math.floor(Math.random()*e.length);CC_WECHATGAME&&this.qq.shareAppMessage({title:e[o].shareText,imageUrl:e[o].shareLink,query:t})}}},t.prototype.hideBanner=function(){null!=this.banner&&(this.banner.destroy(),this.banner=null)},t.prototype.showBanner=function(t){var e=this;if(void 0===t&&(t=2),CC_WECHATGAME){if(null!=this.banner)return this.banner.destroy(),void(this.banner=null);var o=i.default.ins.Platforms[2].bannerId[0],n=this.qq.getSystemInfoSync();console.log(o,"id");var r,s=this.qq.createBannerAd({adUnitId:o,adIntervals:30,style:{left:0,top:500,width:300}});r=1==t?n.windowWidth-s.style.realWidth:2==t?n.windowWidth/2-s.style.realWidth/2:0,s.onResize(function(){s.style.top=n.windowHeight-s.style.realHeight,s.style.left=r,s.show()}),s.onLoad(function(){console.log("banner \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),e.banner=s}),s.onError(function(t){console.log("banner \u5e7f\u544a\u52a0\u8f7d\u9519\u8bef",t)})}},t.prototype.showCustomAd=function(t){var e=this;if(CC_WECHATGAME){var o,n=i.default.ins.Platforms[2].customId[0],r=this.qq.getSystemInfoSync();if(o={width:r.screenWidth/1.5,left:(r.screenWidth-r.screenWidth/1.5)/.4-40,top:100,fixed:0},this.custom)this.custom.show();else{var s=this.qq.createBlockAd({adUnitId:n,orientation:"vertical",size:1,style:o});s.onLoad(function(){console.log("\u539f\u751f\u6a21\u677f \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),t(1),s.show().then(function(){return console.log("\u539f\u751f\u6a21\u677f \u5e7f\u544a\u663e\u793a\u6210\u529f")}).catch(function(e){console.log("\u539f\u751f\u6a21\u677f \u5e7f\u544a\u663e\u793a\u5931\u8d25",e),t(0)}),e.custom=s}),s.onError(function(e){console.log("\u539f\u751f\u6a21\u677fCustomAd \u5e7f\u544a\u52a0\u8f7d\u5931\u8d25\uff1a",e),t(0)})}}},t.prototype.hideCustomAd1=function(){this.custom1&&(this.custom1.hide(),this.custom1=null)},t.prototype.showCustomAd1=function(t){var e,o=this;if(CC_WECHATGAME)if(i.default.ins.Platforms[2].customId[0],this.qq.getSystemInfoSync(),e={width:128,left:64,top:300,fixed:0},this.custom1)this.custom1.show();else{var n=this.qq.createBlockAd({adUnitId:"\u539f\u751f\u4e94\u884c\u683c\u5b50\u5e7f\u544aid",orientation:"vertical",size:1,style:e});n.onLoad(function(){console.log("\u539f\u751f\u6a21\u677f \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),t(1),n.show().then(function(){return console.log("\u539f\u751f\u6a21\u677f \u5e7f\u544a\u663e\u793a\u6210\u529f")}).catch(function(e){console.log("\u539f\u751f\u6a21\u677f \u5e7f\u544a\u663e\u793a\u5931\u8d25",e),t(0)}),o.custom1=n}),n.onError(function(e){console.log("\u539f\u751f\u6a21\u677fCustomAd \u5e7f\u544a\u52a0\u8f7d\u5931\u8d25\uff1a",e),t(0)})}},t.prototype.showCustomAd3=function(t){return n(this,void 0,void 0,function(){var e,o,n,s=this;return r(this,function(){return CC_WECHATGAME?(e=i.default.ins.Platforms[2].customId[1],this.qq.getSystemInfoSync(),o={top:76,width:375,fixed:0},(n=this.qq.createBlockAd({adUnitId:e,orientation:"vertical",size:1,style:o})).onLoad(function(){console.log("\u539f\u751f\u6a21\u677f \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),t(1),n.show().then(function(){return console.log("\u539f\u751f\u6a21\u677f \u5e7f\u544a\u663e\u793a\u6210\u529f")}).catch(function(e){console.log("\u539f\u751f\u6a21\u677f \u5e7f\u544a\u663e\u793a\u5931\u8d25",e),t(0)}),s.custom3=n}),n.onError(function(e){console.log("\u539f\u751f\u6a21\u677fCustomAd \u5e7f\u544a\u52a0\u8f7d\u5931\u8d25\uff1a",e),t(0)}),[2]):[2]})})},t.prototype.hideCustomAd=function(){this.custom&&(this.custom=null)},t.prototype.showInterstitialAd=function(t){if(void 0===t&&(t=0),CC_WECHATGAME){var e=i.default.ins.Platforms[2].intersitialId[0],o=this.qq.createInterstitialAd({adUnitId:e});o&&(o.load().then(function(){console.log("\u63d2\u5c4f \u5e7f\u544a\u52a0\u8f7d\u6210\u529f")}),o.onClose(function(t){console.log("\u5173\u95ed\u63d2\u5c4f\u5e7f\u544a",t)}),o.onError(function(t){console.log("err:\u63d2\u5c4f\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25",t)}),setTimeout(function(){o.show().catch(function(t){console.log("\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u5931\u8d25",t)})},1e3*t))}},t.prototype.showRewardVideo=function(t){var e=this,o=i.default.ins.Platforms[2].videoId[0];null!=this.rewardVideo2&&this.rewardVideo2.offClose(s);var n=this.qq.createRewardedVideoAd({adUnitId:o});this.rewardVideo2=n,n.load().then(function(){e.qq.showToast({title:"\u52a0\u8f7d\u4e2d\uff0c\u8bf7\u7a0d\u540e",icon:"success",duration:1500,mask:!1,success:function(){},fail:function(){},complete:function(){}}),console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),n.show()});var r=!1;n.onError(function(o){console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u663e\u793a\u5931\u8d25",o),r||(r=!0,e.qq.showToast({title:"\u8bf7\u7a0d\u540e\u518d\u8bd5",icon:"fail",duration:1500,mask:!1,success:function(){},fail:function(){},complete:function(){}}),t(2))});var s=function(e){e&&e.isEnded?(console.log("res:  ",e),t(1),n.offClose(s)):(console.log("\u64ad\u653e\u4e2d\u9014\u9000\u51fa"),t(0))};n.onClose(s)},t}();o.QQPlatform=s,cc._RF.pop()},{"../manager/Main":void 0}],ResMgr:[function(t,e,o){"use strict";cc._RF.push(e,"ea555+Z+wJAP4xZ/cjfbSBs","ResMgr");var n=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{c(n.next(t))}catch(e){i(e)}}function a(t){try{c(n.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return c([t,e])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../Global"),s=t("../enum/Enums"),a=t("./PoolMgr"),c=function(){function t(){this._abBundleMap={},this._atlasMap={},this._spinMap=[],this._frameMap={},this._jsonAssetMap={},this._clipMap={},this._matMap={},this._loadStemp=null,this.loadTime=0,this._totalTime=0}return Object.defineProperty(t,"ins",{get:function(){return this._ins||(this._ins=new t),this._ins},enumerable:!1,configurable:!0}),t.prototype.printTimer=function(t,e){void 0===t&&(t=""),void 0===e&&(e=!1),this.loadTime=Date.now()-this._loadStemp,this._loadStemp=Date.now(),this._totalTime+=this.loadTime,console.log(t+"\uff0cload time===",this.loadTime,"ms"),e&&console.log("Load finish, total time===",this._totalTime,"ms")},t.prototype.loadBundle=function(t,e){return void 0===e&&(e=0),n(this,void 0,Promise,function(){var o,n,s=this;return r(this,function(){return this._loadStemp||(this._loadStemp=Date.now()),o=i.Global.LoadingRate,n="Bundle"+t,[2,new Promise(function(r){cc.assetManager.loadBundle(n,function(n,a){n?console.error("Bundle"+t+" load error, error==",n):(2!=t&&(s._abBundleMap[t]=a),s.printTimer("Bundle"+t+"__load success"),i.Global.LoadingRate=o+e,r&&r())})})]})})},t.prototype.loadRes=function(t,e,o){return void 0===o&&(o=0),n(this,void 0,Promise,function(){var n,c=this;return r(this,function(){return n=i.Global.LoadingRate,[2,new Promise(function(r){console.log(" loadRes~~~~~~~~ Type.Path:: ",e.path," Type.Type:: ",e.type),c._abBundleMap[t].loadDir(e.path,e.type,function(t,e){o>0&&(i.Global.LoadingRate=n+o*t/e)},function(o,n){var l;switch(o&&(console.error("Error===",o),r&&r()),e){case s.Assets.UiPrefab:for(var u=0;u<n.length;u++){var h=(l=n[u]).data.name;console.log(" resName == ",h),a.PoolMgr.ins.setPrefab(h,l),i.Global.Debug&&console.log("prefab name==",h)}break;case s.Assets.CommonPrefab:for(console.log(" CommonPrefab ================= assets.length:: ",n.length),u=0;u<n.length;u++)h=(l=n[u]).data.name,a.PoolMgr.ins.setPrefab(h,l),i.Global.Debug&&console.log("prefab name==",h);break;case s.Assets.Sound:for(u=0;u<n.length;u++)l=n[u],i.Global.Debug&&console.log("clip name==",l.name),c._clipMap[l.name]||(c._clipMap[l.name]=l);break;case s.Assets.UiFrame:for(u=0;u<n.length;u++)l=n[u],i.Global.Debug&&console.log("Frame name==",l.name),c._frameMap[l.name]||(c._frameMap[l.name]=l);break;case s.Assets.Json:for(u=0;u<n.length;u++)l=n[u],i.Global.Debug&&console.log("json name==",l.name),c._jsonAssetMap[l.name]||(c._jsonAssetMap[l.name]=l)}c.printTimer("Bundle"+t+"__"+e.path+"loaded success"),r&&r()})})]})})},t.prototype.loadBgm=function(){return n(this,void 0,Promise,function(){var t,e=this;return r(this,function(){return t=this,[2,new Promise(function(o){e._abBundleMap[5].load("bgm",function(e,n){e&&(console.error("Error info===",e),o&&o()),t._clipMap[n.name]||(t._clipMap[n.name]=n),o&&o()})})]})})},t.prototype.loadPrefab=function(t){return n(this,void 0,Promise,function(){var e=this;return r(this,function(){return i.Global.LoadingRate,console.log(" LoadPrefab:::: Path: ",t.path," Name: ",t.name),[2,new Promise(function(o){e._abBundleMap[t.bundle].load(t.path+t.name,function(e,n){e&&(console.log(" LoadError.....Name: ",t.name),console.error("Error info===",e),o&&o()),a.PoolMgr.ins.setPrefab(t.name,n),o&&o()})})]})})},t.prototype.getAtlas=function(t){return this._atlasMap[t]},t.prototype.getFrameMap=function(t){return this._frameMap[t]},t.prototype.getPrefab=function(t,e){return n(this,void 0,void 0,function(){return r(this,function(o){switch(o.label){case 0:return a.PoolMgr.ins.getPrefab(t.name)?[2,a.PoolMgr.ins.getNode(t.name,e)]:[4,this.loadPrefab(t)];case 1:return o.sent(),[2,a.PoolMgr.ins.getNode(t.name,e)]}})})},t.prototype.getJson=function(t){return this._jsonAssetMap[t]},t.prototype.getClip=function(t){return this._clipMap[t]},t.prototype.getMat=function(t){return this._matMap[t]},t.prototype.getSpin=function(t){return this._spinMap.find(function(e){return e.name==t})},t.prototype.getUI=function(t,e){return n(this,void 0,void 0,function(){var o;return r(this,function(n){switch(n.label){case 0:if(t.clear&&!e&&i.Global.layer[t.layer].children[0]){if(i.Global.layer[t.layer].children[0].name==t.name)return[2];a.PoolMgr.ins.putNode(i.Global.layer[t.layer].children[0])}return o=e||i.Global.layer[t.layer],[4,this.getPrefab(t,o)];case 1:return[2,n.sent()]}})})},t._ins=null,t}();o.default=c,cc._RF.pop()},{"../Global":"Global","../enum/Enums":"Enums","./PoolMgr":"PoolMgr"}],SettingView:[function(t,e,o){"use strict";cc._RF.push(e,"14034n8+wxG167GC8UZhqzK","SettingView");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.SpriteFrameState=void 0;var s=t("../Global"),a=t("../enum/Enums"),c=t("./BaseView"),l=cc._decorator,u=l.ccclass,h=l.property,p=function(){function t(){this.on=null,this.off=null}return i([h(cc.SpriteFrame)],t.prototype,"on",void 0),i([h(cc.SpriteFrame)],t.prototype,"off",void 0),i([u("SpriteFrameState")],t)}();o.SpriteFrameState=p;var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sound=null,e.soundSprite=null,e}return r(e,t),e.prototype.start=function(){this.checkSpriteFrame()},e.prototype.checkSpriteFrame=function(){1==s.Global.sound?this.soundSprite.spriteFrame=this.sound.on:this.soundSprite.spriteFrame=this.sound.off},e.prototype.changeSound=function(){s.Global.sound*=-1,this.checkSpriteFrame(),cc.director.emit(a.events.ChangeSound,"sound")},e.prototype.close=function(){t.prototype.close.call(this),this.node.destroy()},i([h(p)],e.prototype,"sound",void 0),i([h(cc.Sprite)],e.prototype,"soundSprite",void 0),i([u],e)}(c.default);o.default=f,cc._RF.pop()},{"../Global":"Global","../enum/Enums":"Enums","./BaseView":"BaseView"}],ShopItemView:[function(t,e,o){"use strict";cc._RF.push(e,"50996x6FWdCfZTXVbJba2jt","ShopItemView");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.ShopModalItemSpriteFrames=void 0;var s=cc._decorator,a=s.ccclass,c=s.property,l=function(){function t(){this.default=null,this.have=null,this.check=null}return i([c(cc.SpriteFrame)],t.prototype,"default",void 0),i([c(cc.SpriteFrame)],t.prototype,"have",void 0),i([c(cc.SpriteFrame)],t.prototype,"check",void 0),i([a("ShopModalItemSpriteFrames")],t)}();o.ShopModalItemSpriteFrames=l;var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.imgs=null,e}return r(e,t),e.prototype.checkState=function(t){switch(t){case"have":this.node.getComponent(cc.Sprite).spriteFrame=this.imgs.have;break;case"check":this.node.getComponent(cc.Sprite).spriteFrame=this.imgs.check}},i([c(l)],e.prototype,"imgs",void 0),i([a],e)}(cc.Component);o.default=u,cc._RF.pop()},{}],ShopView:[function(t,e,o){"use strict";cc._RF.push(e,"a36eed/FhtOyaiomX/lyfL6","ShopView");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{c(n.next(t))}catch(e){i(e)}}function a(t){try{c(n.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return c([t,e])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../Global"),l=t("../enum/Enums"),u=t("../manager/SoundMgr"),h=t("../manager/CoinMgr"),p=t("../manager/ResMgr"),f=t("../utils/Tools"),d=t("./BaseView"),y=t("./GetCupView"),v=t("./ShopItemView"),g=cc._decorator,m=g.ccclass,b=g.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cupsFrame=[],e.shopCardItem=null,e.scrollView=null,e.content=null,e.costCoinLabel=null,e.getCoinLabel=null,e.spacing=20,e.rowNum=2,e.shopItems=["01","02","03","04","05","06","07","08","09","10","11","12"],e}return r(e,t),e.prototype.init=function(t){f.scrollFunc({list:t,spacing:2*this.spacing,row:this.rowNum,scrollView:this.scrollView,content:this.content,receiveItemHeight:this.shopCardItem.data.height,cb:this.setPreFab.bind(this)})},e.prototype.setPreFab=function(t){var e,o,n,r=this;e=c.Global.cupSetting,o=c.Global.setCupCurrent,n=this.cupsFrame;var i=cc.instantiate(this.shopCardItem),s=i.getComponent(v.default),a=e.current,l=e.haveList;i.on("click",function(){l.includes(t)&&a!=t&&(o(t),r.init(r.shopItems))}),a==t?(s.checkState("check"),i.getChildByName("node").getComponent(cc.Sprite).spriteFrame=n[+t.replace("C","")-1],i.getChildByName("node").active=!0):l.includes(t)&&(s.checkState("have"),i.getChildByName("node").getComponent(cc.Sprite).spriteFrame=n[+t.replace("C","")-1],i.getChildByName("node").active=!0),i.parent=this.content},e.prototype.onLoad=function(){this.init(this.shopItems)},e.prototype.goBack=function(){t.prototype.close.call(this),this.node.destroy()},e.prototype.start=function(){this.setNeedCoinLabel(),this.setGetCoinLabel()},e.prototype.getNeedCoin=function(){var t=500;return c.Global.cupSetting.haveList.length>6&&(t=1e3),t},e.prototype.setNeedCoinLabel=function(){var t=this.getNeedCoin();this.costCoinLabel.string=t.toString()},e.prototype.setGetCoinLabel=function(){this.getCoinLabel.string=c.Global.watchAdReward.toString()},e.prototype.buyCupClick=function(){var t=this.getNeedCoin(),e=c.Global.getCurrentCoin(),o=c.Global.cupSetting.haveList.length;this.costCoinLabel.string=t.toString();var n=this.shopItems.length,r=(o+1).toString();if(o<9&&(r="0"+r),o>=n){var i="All cup is unlock.";cc.director.emit(l.events.Toast,i)}else e<t?(i="Need "+t+" coins.",cc.director.emit(l.events.Toast,i)):this.showGetItemView(r,t)},e.prototype.showGetItemView=function(t,e){return s(this,void 0,void 0,function(){var o,n,r;return a(this,function(i){switch(i.label){case 0:return u.SoundMgr.ins.playSound(l.Clips.modal,.5),[4,p.default.ins.getUI(l.ui.GetCupView)];case 1:return o=i.sent(),(n=o.getComponent(y.default)).setTitleImg(),r=this.cupsFrame[c.Global.cupSetting.haveList.length],n.setPropImg(r),o.parent=this.node,c.Global.setCupHavaList(t),this.init(this.shopItems),c.Global.subCoin(e),h.default.ins.setCoinLabel(),[2]}})})},i([b([cc.SpriteFrame])],e.prototype,"cupsFrame",void 0),i([b(cc.Prefab)],e.prototype,"shopCardItem",void 0),i([b(cc.ScrollView)],e.prototype,"scrollView",void 0),i([b(cc.Node)],e.prototype,"content",void 0),i([b(cc.Label)],e.prototype,"costCoinLabel",void 0),i([b(cc.Label)],e.prototype,"getCoinLabel",void 0),i([b(cc.Integer)],e.prototype,"spacing",void 0),i([b(cc.Integer)],e.prototype,"rowNum",void 0),i([m],e)}(d.default);o.default=_,cc._RF.pop()},{"../Global":"Global","../enum/Enums":"Enums","../manager/CoinMgr":"CoinMgr","../manager/ResMgr":"ResMgr","../manager/SoundMgr":"SoundMgr","../utils/Tools":"Tools","./BaseView":"BaseView","./GetCupView":"GetCupView","./ShopItemView":"ShopItemView"}],SoundMgr:[function(t,e,o){"use strict";cc._RF.push(e,"94af7xSM7tCtKbJaeG6PfRw","SoundMgr");var n=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{c(n.next(t))}catch(e){i(e)}}function a(t){try{c(n.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return c([t,e])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.SoundMgr=void 0;var i=t("../Global"),s=t("./ResMgr"),a=t("../enum/Enums"),c=function(){function t(){this._audioComp=null,this._curLoopAudioName=""}return Object.defineProperty(t,"ins",{get:function(){return this._ins||(this._ins=new t,this._ins.initAudio()),this._ins},enumerable:!1,configurable:!0}),t.prototype.initAudio=function(){this._audioComp=new cc.AudioSource,this._audioComp.loop=!0},t.prototype.stopSound=function(){this._audioComp.stop()},t.prototype.playSound=function(t,e){return void 0===e&&(e=1),n(this,void 0,void 0,function(){var o;return r(this,function(n){switch(n.label){case 0:return i.Global.sound==a.SoundStatus.off?[2]:(this._audioComp&&this.stopSound(),[4,s.default.ins.getClip(t)]);case 1:return o=n.sent(),cc.audioEngine.play(o,!1,e),[2]}})})},Object.defineProperty(t.prototype,"curLoopAudioName",{get:function(){return this._curLoopAudioName},enumerable:!1,configurable:!0}),t.prototype.playSoundAtTime=function(t,e){return n(this,void 0,void 0,function(){var o,n,c=this;return r(this,function(r){switch(r.label){case 0:return i.Global.sound==a.SoundStatus.off?[2]:[4,s.default.ins.getClip(t)];case 1:return o=r.sent(),n=cc.audioEngine.play(o,!1,1),this._audioComp.clip=o,this._audioComp.play(),this._audioComp.scheduleOnce(function(){cc.audioEngine.stop(n),c._audioComp.stop()},2*e),[2]}})})},t._ins=null,t}();o.SoundMgr=c,cc._RF.pop()},{"../Global":"Global","../enum/Enums":"Enums","./ResMgr":"ResMgr"}],ToastCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"f6ca7yTc+FBrr1t8pzVCsYH","ToastCtrl");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./enum/Enums"),a=cc._decorator,c=a.ccclass,l=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.text=null,e.toast=null,e._tw=new cc.Tween,e.time=1,e}return r(e,t),e.prototype.onEnable=function(){cc.director.on(s.events.Toast,this.showToast,this),this.toast.opacity=0,this._tw.target(this.toast),this._tw.set({opacity:0}).to(.6,{opacity:255}).delay(this.time).to(.25,{opacity:0})},e.prototype.onDisable=function(){cc.director.off(s.events.Toast,this.showToast,this)},e.prototype.showToast=function(t,e){void 0===e&&(e=2),this.time=e,this.text.string=t,this._tw.start()},i([l(cc.Label)],e.prototype,"text",void 0),i([l(cc.Node)],e.prototype,"toast",void 0),i([c],e)}(cc.Component);o.default=u,cc._RF.pop()},{"./enum/Enums":"Enums"}],Tools:[function(t,e,o){"use strict";function n(t){var e=document.createElement("div");return e.style.position="absolute",e.style.left="-10000px",e.style.top="-10000px",e.textContent=t,document.body.appendChild(e),e}function r(t){var e=document.createRange();e.selectNodeContents(t);var o=window.getSelection();o.removeAllRanges(),o.addRange(e)}cc._RF.push(e,"859c4IGX/ZFBq3OPUhXZN9I","Tools"),Object.defineProperty(o,"__esModule",{value:!0}),o.Tools=o.scrollFunc=o.getDate=o.load=o.save=void 0,o.save=function(t,e){"number"==typeof e&&(e=""+e),cc.sys.localStorage.setItem(t,e||"")},o.load=function(t,e){void 0===e&&(e=1);var o=cc.sys.localStorage.getItem(t);if(o){switch(e){case 0:break;case 1:o=Number(o);break;case 2:o=JSON.parse(o)}return o}return null},o.getDate=function(){var t=new Date;return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()},o.scrollFunc=function(t){var e=t.list,o=t.spacing,n=t.row,r=t.scrollView,i=t.content,s=t.receiveItemHeight,a=t.cb;i.removeAllChildren();var c=e.length;i.height=Math.ceil(c/n)*(s+o);for(var l=0;l<c;l++)a&&a(e[l],l,e);r.scrollToTop(0)};var i=function(){function t(){}return t.fadeIn=function(t,e){void 0===e&&(e=.2),cc.tween(t).set({scale:0}).to(e,{scale:1}).start()},t.copyToClipboard=function(t){var e=t;return new Promise(function(t,o){if(window.clipboardData)window.clipboardData.setData("Text",e);else{var i=n(e);r(i);try{t(document.execCommand("copy",!1,null))}catch(s){o(s)}document.body.removeChild(i)}})},t}();o.Tools=i,cc._RF.pop()},{}],VictoryView:[function(t,e,o){"use strict";cc._RF.push(e,"880b4jObvVCVJjx7VQ6E+4k","VictoryView");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./BaseView"),a=t("../Global"),c=t("../enum/Enums"),l=t("../base/Math"),u=t("../manager/CoinMgr"),h=cc._decorator,p=h.ccclass,f=h.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.curAwardLabel=null,e.curToolIcon=null,e.curToolLabel=null,e.curAwardCoin=null,e.curAwardTool=null,e.tubeFrame=null,e.fallbackFrame=null,e.coinReward=0,e.tubeReward=0,e.fallbackReward=0,e}return r(e,t),e.prototype.init=function(){this.coinReward=a.Global.rewardCoin,this.curAwardLabel.string="+"+this.coinReward.toString();var t=l.randomNum(1,100),e=l.randomNum(1,10);console.log(" RandomNumber1:: ",t," RandomNumber2: ",e),t>=50?(e>=5?(this.curToolIcon.spriteFrame=this.fallbackFrame,this.fallbackReward=1):(this.curToolIcon.spriteFrame=this.tubeFrame,this.tubeReward=1),this.curToolLabel.string="+1"):(this.curAwardCoin.position=new cc.Vec3(-50,0,0),this.curAwardTool.active=!1)},e.prototype.onNextLevelClick=function(){this.tubeReward>0&&(a.Global.addToolSetting("tube",1),cc.director.emit(c.events.AddTube)),this.fallbackReward>0&&(a.Global.addToolSetting("back",1),cc.director.emit(c.events.Back)),a.Global.addCoin(this.coinReward),u.default.ins.setCoinLabel(),this.loadNextLvel()},e.prototype.onMoreAwardClick=function(){this.coinReward=5*a.Global.rewardCoin,this.curAwardLabel.string="+"+this.coinReward.toString()},e.prototype.loadNextLvel=function(){t.prototype.close.call(this),this.node.destroy(),cc.director.emit(c.events.Start)},i([f(cc.Label)],e.prototype,"curAwardLabel",void 0),i([f(cc.Sprite)],e.prototype,"curToolIcon",void 0),i([f(cc.Label)],e.prototype,"curToolLabel",void 0),i([f(cc.Node)],e.prototype,"curAwardCoin",void 0),i([f(cc.Node)],e.prototype,"curAwardTool",void 0),i([f(cc.SpriteFrame)],e.prototype,"tubeFrame",void 0),i([f(cc.SpriteFrame)],e.prototype,"fallbackFrame",void 0),i([p],e)}(s.default);o.default=d,cc._RF.pop()},{"../Global":"Global","../base/Math":"Math","../enum/Enums":"Enums","../manager/CoinMgr":"CoinMgr","./BaseView":"BaseView"}],WaterFlow:[function(t,e,o){"use strict";cc._RF.push(e,"89a60u2p+5LCaWjYEQt3c4x","WaterFlow");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.WaterFlow=void 0;var i=t("../enum/Enums"),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._toPt=cc.v2(),e.from=cc.v2(),e}return r(e,t),e.prototype.onLoad=function(){this.lineWidth=i.dft_lingWidth,this.lineCap=cc.Graphics.LineCap.ROUND},Object.defineProperty(e.prototype,"toPt",{get:function(){return this._toPt},set:function(t){this._toPt=t,this.clear(),this.moveTo(this.from.x,this.from.y),this.lineTo(this._toPt.x,this._toPt.y),this.stroke()},enumerable:!1,configurable:!0}),e.prototype.playFlowAni=function(t,e,o,n,r){this.clear(),this.from=n?e:t,this.moveTo(this.from.x,this.from.y),cc.tween(this).set({toPt:t}).to(o,{toPt:e}).call(r).start()},e.prototype.setLineScale=function(t){this.lineWidth=i.dft_lingWidth*t},e}(cc.Graphics);o.WaterFlow=s,cc._RF.pop()},{"../enum/Enums":"Enums"}],Water:[function(t,e,o){"use strict";cc._RF.push(e,"607d01cGPpC1Y4XE+JkcAAc","Water");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../base/Math"),a=t("../enum/Enums"),c=cc._decorator,l=c.ccclass,u=c.property,h=(c.requireComponent,c.executeInEditMode),p=(c.disallowMultiple,c.executionOrder,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._ratio=1,e.effect=null,e._tiltAngle=0,e.material=null,e._action=a.PourAction.none,e.infos=[],e.stopIdx=-1,e.curIdx=0,e._actionHeight=0,e.eventState=!1,e.onInFInish=null,e.onOutStart=null,e.onOutFinish=null,e}return r(e,t),Object.defineProperty(e.prototype,"tiltAngle",{get:function(){return this._tiltAngle},set:function(t){t=Math.round(100*t)/100,this._tiltAngle=t,this.updateAngleHeight()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"actionHeight",{get:function(){return this._actionHeight},set:function(t){if(t>a.HEIGHT_FACTOR&&(t=a.HEIGHT_FACTOR),t<0)throw new Error("Water height can't less than zero");this._actionHeight=t},enumerable:!1,configurable:!0}),e.prototype.changeAction=function(t){console.log(" Water.ChangeAnction:: ",this.node.name),this._action=t},e.prototype.addInfo=function(t){console.log(" Water.AddInfo:: ",this.node.name," WaterInfo:: ",t);var e=this.actionHeight;this.actionHeight=t.height,t.height=0;var o=this.infos[this.curIdx];this._action===a.PourAction.in&&(this.actionHeight+=e-((null==o?void 0:o.height)||0)),this._action=a.PourAction.in,o&&o.colorId==t.colorId?this.actionHeight+=o.height:this.infos.push(t),this.curIdx=this.infos.length-1,this.initSizeColor()},e.prototype.onLoad=function(){var t=this.node.getComponent(cc.Sprite);t.spriteFrame&&(t.spriteFrame.getTexture().packable=!1),this.effect&&(this.material=cc.Material.create(this.effect),t.setMaterial(0,this.material)),this.material=t.getMaterial(0),this._ratio=this.node.height/this.node.width},e.prototype.initInfos=function(t){this.infos=this.waterHandle(t),this.curIdx=this.infos.length-1,this.initSizeColor(),this.updateAngleHeight()},e.prototype.waterHandle=function(t){for(var e=[],o=0;o<t.length;o++){var n=t[o];e[e.length-1]&&e[e.length-1].colorId==n.colorId?e[e.length-1].height+=n.height:e.push(n)}return e},e.prototype.initSizeColor=function(){for(var t=new Float32Array(a.MAX_ARR_LEN*a.BASIC_DATA.BYTE),e=0;e<this.infos.length;e++){var o=this.infos[e].color;t[e*a.BASIC_DATA.BYTE]=o.r/a.BASIC_DATA.color_range,t[e*a.BASIC_DATA.BYTE+a.BASIC_DATA.color_alpha2]=o.g/a.BASIC_DATA.color_range,t[e*a.BASIC_DATA.BYTE+a.BASIC_DATA.color_alpha3]=o.b/a.BASIC_DATA.color_range,t[e*a.BASIC_DATA.BYTE+a.BASIC_DATA.color_alpha4]=a.BASIC_DATA.color_alpha}this.material.setProperty("colors",t),this.material.setProperty("iResult",cc.v2(this.node.width,this.node.height)),this.material.setProperty("corrugationType",a.PourAction.none)},e.prototype.updateAngleHeight=function(){for(var t=new Float32Array(a.MAX_ARR_LEN*a.BASIC_DATA.BYTE),e=0;e<this.infos.length;e++)t[e*a.BASIC_DATA.BYTE]=this.infos[e].height;this.material.setProperty("heights",t),this.material.setProperty("tiltAngle",this._tiltAngle);var o=a.PourAction.none;this._action==a.PourAction.in?o=a.PourAction.in:this._action==a.PourAction.out&&(o=a.PourAction.out),this.material.setProperty("corrugationType",o)},e.prototype.upHeight=function(){if(this.isFull())return this.actionHeight=0,void(this._action=a.PourAction.none);if(!(this.curIdx<0)){var t=this.infos[this.curIdx];t.height+=a.ANGLE_FACTOR,t.height>=this.actionHeight&&(t.height=this.actionHeight,this.actionHeight=0,this._action=a.PourAction.none,this.onInFInish&&(this.onInFInish(),this.onInFInish=null)),this.isFull(),this.updateAngleHeight()}},e.prototype.downHeight=function(){if(this.stopIdx<0)this._action=a.PourAction.none;else{var t=this.infos[this.curIdx];(this.isAtBottleTop()||t.height<.05)&&(this.eventState=!0,this.onOutStart&&(this.onOutStart(),this.onOutStart=null),t.height-=a.ANGLE_FACTOR,this.actionHeight<0&&(this.actionHeight=0),t.height<=this.actionHeight&&(t.height=this.actionHeight,this.actionHeight<=0&&(this.infos.pop(),this.curIdx--,this.stopIdx=-1),this.eventState=!1,this.onOutFinish&&(this.onOutFinish(),this.onOutFinish=null),this._action=a.PourAction.none,this.actionHeight=0),this.updateAngleHeight())}},e.prototype.isFull=function(){return this.infos.reduce(function(t,e){return t+e.height},0)>=a.HEIGHT_FACTOR},e.prototype.isEmpty=function(){return 0==this.infos.length},e.prototype.getTopInfo=function(){return this.infos[this.curIdx]},e.prototype.getPourStartAngle=function(){console.log(" Water.GetPourStartAngle ",this.node.name);for(var t=0,e=0;e<=this.curIdx;e++)t+=this.infos[e].height;return this.getCriticalAngleWithHeight(t)},e.prototype.getPourEndAngle=function(){console.log(" Water.getPourEndAngle ",this.node.name),this.stopIdx=this.curIdx-this.getTopSameColorNum();for(var t=0,e=0;e<=this.stopIdx;e++)t+=this.infos[e].height;return this.getCriticalAngleWithHeight(t)},e.prototype.getCriticalAngleWithHeight=function(t){var e=0;if(0==t)return 90;if(t<.5){var o=this._ratio/(2*t);e=Math.atan(o)}else o=2*this._ratio*(1-t),e=Math.atan(o);return e=s.radian2angle(e),console.log(" Water.GetCriticalAngleWithHeight::: ",this.node.name," Angle: ",e),e},e.prototype.onStartPour=function(t){console.log(" Water.OnStartPour::: "),this._action=a.PourAction.out;var e=a.HEIGHT_FACTOR/a.SPLIT_COUNT;t&&(this.actionHeight=this.infos[this.curIdx].height-t*e),this.actionHeight<=0&&(this.actionHeight=0),this.stopIdx=this.curIdx-this.getTopSameColorNum(),this.stopIdx<0&&(this.stopIdx=0)},e.prototype.getTopSameColorNum=function(){for(var t=0,e=null,o=this.curIdx;o>=0;o--)if(null==e)t++,e=this.infos[o].colorId;else{if(this.infos[o].colorId!=e)break;t++}return t},e.prototype.isAtBottleTop=function(){for(var t=0,e=0;e<=this.curIdx;e++)t+=this.infos[e].height;var o=this.tiltAngle%360*Math.PI/180,n=Math.abs(Math.tan(o));if(t<.5)return n>this._ratio/(2*t);var r=1-t;return n>2*this._ratio*r},e.prototype.update=function(){this._action==a.PourAction.out?this.downHeight():this._action==a.PourAction.in&&this.upHeight()},e.prototype.setPourInCallback=function(t){this.onInFInish=t},e.prototype.setPourOutCallback=function(t,e){this.onOutStart=t,this.onOutFinish=e},i([u(cc.EffectAsset)],e.prototype,"effect",void 0),i([u],e.prototype,"_tiltAngle",void 0),i([u({tooltip:!1})],e.prototype,"tiltAngle",null),i([l,h],e)}(cc.Component));o.default=p,cc._RF.pop()},{"../base/Math":"Math","../enum/Enums":"Enums"}],WxPlatform:[function(t,e,o){"use strict";cc._RF.push(e,"53d6cQ5YNFKYL96X+NiCobr","WxPlatform");var n=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{c(n.next(t))}catch(e){i(e)}}function a(t){try{c(n.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return c([t,e])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.WxPlatform=void 0;var i=t("../manager/Main"),s=function(){function t(){this.wx=window.wx}return Object.defineProperty(t,"ins",{get:function(){return this._ins?this._ins:(this._ins=new t,this._ins.init(),this._ins)},enumerable:!1,configurable:!0}),t.prototype.init=function(){this.wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]}),this.initCustomAd1();var t=i.default.ins.Shares[0].sharePics;t.length>0&&(this.wx.onShareAppMessage(function(){var e=Math.floor(Math.random()*t.length);return{title:t[e].shareText,imageUrlId:t[e].shareId,imageUrl:t[e].shareLink}}),this.wx.onShareTimeline(function(){var e=Math.floor(Math.random()*t.length);return{title:t[e].shareText,imageUrl:t[e].shareLink,query:""}}))},t.prototype.getLaunchOption=function(){return this.wx.getLaunchOptionsSync().query},t.prototype.getScene=function(){return this.wx.getLaunchOptionsSync().scene},t.prototype.showShare=function(t){if(void 0===t&&(t=""),i.default.ins.Shares[0]){var e=i.default.ins.Shares[0].sharePics;if(!(e.length<=0)){var o=Math.floor(Math.random()*e.length);CC_WECHATGAME&&this.wx.shareAppMessage({title:e[o].shareText,imageUrlId:e[o].shareId,imageUrl:e[o].shareLink,query:t})}}},t.prototype.hideBanner=function(){null!=this.banner&&(this.banner.destroy(),this.banner=null)},t.prototype.showBanner=function(t){var e=this;void 0===t&&(t=2);var o=i.default.ins.Platforms[1].bannerId[0];if(CC_WECHATGAME&&o){if(null!=this.banner)return this.banner.destroy(),void(this.banner=null);var n=this.wx.getSystemInfoSync();console.log(o,"id");var r,s=this.wx.createBannerAd({adUnitId:o,adIntervals:30,style:{left:0,top:500,width:300}});r=1==t?n.windowWidth-s.style.realWidth:2==t?n.windowWidth/2-s.style.realWidth/2:0,s.onResize(function(){s.style.top=n.windowHeight-s.style.realHeight,s.style.left=r}),s.onLoad(function(){console.log("banner \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),e.banner=s}),s.onError(function(t){console.log("banner \u5e7f\u544a\u52a0\u8f7d\u9519\u8bef",t)}),s.show()}},t.prototype.showCustomAd=function(t){var e=this;this.timeId&&(clearTimeout(this.timeId),this.timeId=null);var o=i.default.ins.Platforms[1].customId[0];if(CC_WECHATGAME&&o){var n,r=this.wx.getSystemInfoSync();if(n={width:r.screenWidth/1.5,left:(r.screenWidth-r.screenWidth/1.5)/.4-15,top:100,fixed:0},this.custom)this.custom.show();else{var s=this.wx.createCustomAd({adUnitId:o,style:n});s.onLoad(function(){console.log("\u539f\u751f\u6a21\u677f \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),t(1),s.show().then(function(){return console.log("\u539f\u751f\u6a21\u677f \u5e7f\u544a\u663e\u793a\u6210\u529f")}).catch(function(o){e.custom=null,e.timeId=setTimeout(function(){return e.showCustomAd(t)},5e3),console.log("\u539f\u751f\u6a21\u677f \u5e7f\u544a\u663e\u793a\u5931\u8d25",o),t(0)}),e.custom=s}),s.onClose(function(o){e.custom=null,e.timeId=setTimeout(function(){return e.showCustomAd(t)},5e3),console.log("\u5173\u95ed\u539f\u751f\u6a21\u677f\u5e7f\u544a",o)}),s.onError(function(o){e.custom=null,e.timeId=setTimeout(function(){return e.showCustomAd(t)},5e3),console.log("\u539f\u751f\u6a21\u677fCustomAd \u5e7f\u544a\u52a0\u8f7d\u5931\u8d25\uff1a",o),t(0)})}}},t.prototype.hideCustomAd1=function(){this.custom1&&this.custom1.hide()},t.prototype.initCustomAd1=function(){var t=this,e=i.default.ins.Platforms[1].customId[1];if(CC_WECHATGAME&&e){var o,n=this.wx.getSystemInfoSync();o={width:.85*n.screenWidth,left:.08*n.screenWidth,top:105,fixed:0};var r=this.wx.createCustomAd({adUnitId:e,style:o});r.onLoad(function(){t.custom1=r}),r.onClose(function(t){console.log("\u5173\u95ed\u539f\u751f\u6a21\u677f\u5e7f\u544a",t)}),r.onError(function(t){console.log("\u539f\u751f\u6a21\u677fCustomAd \u5e7f\u544a\u52a0\u8f7d\u5931\u8d25\uff1a",t)})}},t.prototype.showCustomAd1=function(t){this.custom1&&this.custom1.show().then(function(){return t(1)}).catch(function(){return t(0)})},t.prototype.showCustomAd3=function(t){return n(this,void 0,void 0,function(){var e,o,n,s=this;return r(this,function(){return e=i.default.ins.Platforms[1].customId[0],CC_WECHATGAME&&e?(this.wx.getSystemInfoSync(),o={top:76,width:375,fixed:0},(n=this.wx.createCustomAd({adUnitId:e,style:o})).onLoad(function(){console.log("\u539f\u751f\u6a21\u677f \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),t(1),n.show().then(function(){return console.log("\u539f\u751f\u6a21\u677f \u5e7f\u544a\u663e\u793a\u6210\u529f")}).catch(function(e){console.log("\u539f\u751f\u6a21\u677f \u5e7f\u544a\u663e\u793a\u5931\u8d25",e),t(0)}),s.custom3=n}),n.onClose(function(t){console.log("\u5173\u95ed\u539f\u751f\u6a21\u677f\u5e7f\u544a",t)}),n.onError(function(e){console.log("\u539f\u751f\u6a21\u677fCustomAd \u5e7f\u544a\u52a0\u8f7d\u5931\u8d25\uff1a",e),t(0)}),[2]):[2]})})},t.prototype.hideCustomAd=function(){this.custom},t.prototype.showInterstitialAd=function(t){void 0===t&&(t=0);var e=i.default.ins.Platforms[1].intersitialId[0];if(CC_WECHATGAME&&e){var o=this.wx.createInterstitialAd({adUnitId:e});o&&(o.load().then(function(){console.log("\u63d2\u5c4f \u5e7f\u544a\u52a0\u8f7d\u6210\u529f")}),o.onClose(function(t){console.log("\u5173\u95ed\u63d2\u5c4f\u5e7f\u544a",t)}),o.onError(function(t){console.log("err:\u63d2\u5c4f\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25",t)}),setTimeout(function(){o.show().catch(function(t){console.log("\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u5931\u8d25",t)})},1e3*t))}},t.prototype.showRewardVideo=function(t){var e=this,o=i.default.ins.Platforms[1].videoId[0];null!=this.rewardVideo2&&this.rewardVideo2.offClose(s);var n=this.wx.createRewardedVideoAd({adUnitId:o});this.rewardVideo2=n,n.load().then(function(){e.wx.showToast({title:"\u52a0\u8f7d\u4e2d\uff0c\u8bf7\u7a0d\u540e",icon:"success",duration:1500,mask:!1,success:function(){},fail:function(){},complete:function(){}}),console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),n.show()});var r=!1;n.onError(function(o){console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u663e\u793a\u5931\u8d25",o),r||(r=!0,e.wx.showToast({title:"\u8bf7\u7a0d\u540e\u518d\u8bd5",icon:"fail",duration:1500,mask:!1,success:function(){},fail:function(){},complete:function(){}}),t(2))});var s=function(e){e&&e.isEnded?(console.log("res:  ",e),t(1),n.offClose(s)):(console.log("\u64ad\u653e\u4e2d\u9014\u9000\u51fa"),t(0))};n.onClose(s)},t}();o.WxPlatform=s,cc._RF.pop()},{"../manager/Main":void 0}]},{},["Global","Main","ToastCtrl","AdMgr","AndroidAD","DyPlatform","DyRecorderManager","QQPlatform","WxPlatform","Interface","Math","Enums","Cup","Water","WaterFlow","GuideFinger","GuideTask","GuideTaskMgr","LoadCtrl","CoinMgr","CupMgr","GameMgr","PoolMgr","PropBlockMgr","PropMgr","ResMgr","SoundMgr","Tools","BaseView","GameView","GetCupView","LevelItemView","LevelView","MainView","SettingView","ShopItemView","ShopView","VictoryView"]);