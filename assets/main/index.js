window.__require=function t(e,o,n){function i(s,c){if(!o[s]){if(!e[s]){var a=s.split("/");if(a=a[a.length-1],!e[a]){var l="function"==typeof __require&&__require;if(!c&&l)return l(a,!0);if(r)return r(a,!0);throw new Error("Cannot find module '"+s+"'")}s=a}var u=o[s]={exports:{}};e[s][0].call(u.exports,function(t){return i(e[s][1][t]||t)},u,u.exports,t,e,o,n)}return o[s].exports}for(var r="function"==typeof __require&&__require,s=0;s<n.length;s++)i(n[s]);return i}({AdMgr:[function(t,e,o){"use strict";cc._RF.push(e,"1e5df/DgoRAAJ3KjQ8JunDt","AdMgr"),Object.defineProperty(o,"__esModule",{value:!0}),o.AdMgr=void 0;var n=t("../enum/Enums"),i=t("../Global"),r=t("./AndroidAD"),s=t("./DyPlatform"),c=t("./QQPlatform"),a=t("./WxPlatform"),l=function(){function t(){}return t.closeAd=function(){switch(cc.sys.platform){case cc.sys.WECHAT_GAME:if(window.qq)return c.QQPlatform.ins.hideBanner(),c.QQPlatform.ins.hideCustomAd(),c.QQPlatform.ins.hideCustomAd1(),this.bannerOn=!1,void(this.customOn=!1);a.WxPlatform.ins.hideBanner(),a.WxPlatform.ins.hideCustomAd(),a.WxPlatform.ins.hideCustomAd1(),this.bannerOn=!1,this.customOn=!1;break;case cc.sys.BYTEDANCE_GAME:s.DyPlatform.ins.hideBanner(),s.DyPlatform.ins.hideCustomAd(),s.DyPlatform.ins.hideCustomAd1(),this.bannerOn=!1,this.customOn=!1;break;case cc.sys.ANDROID:}},t.showBanner=function(){switch(cc.sys.platform){case cc.sys.WECHAT_GAME:this.bannerOn||(window.qq?c.QQPlatform:a.WxPlatform).ins.showBanner();break;case cc.sys.BYTEDANCE_GAME:this.bannerOn||s.DyPlatform.ins.showBanner();break;case cc.sys.ANDROID:r.AndroidAD.ins.showBanner()}},t.showInterstial=function(t){switch(void 0===t&&(t=0),cc.sys.platform){case cc.sys.BYTEDANCE_GAME:s.DyPlatform.ins.showInterstitialAd(t);break;case cc.sys.WECHAT_GAME:if(window.qq)return void c.QQPlatform.ins.showInterstitialAd(t);a.WxPlatform.ins.showInterstitialAd(t);break;case cc.sys.MOBILE_BROWSER:case cc.sys.DESKTOP_BROWSER:break;case cc.sys.ANDROID:r.AndroidAD.ins.showInterstitial()}},t.showCustomAd=function(t){switch(cc.sys.platform){case cc.sys.WECHAT_GAME:if(window.qq)return void(this.customOn||c.QQPlatform.ins.showCustomAd(t));this.customOn||a.WxPlatform.ins.showCustomAd(t);break;case cc.sys.BYTEDANCE_GAME:this.customOn||s.DyPlatform.ins.showCustomAd(t);break;case cc.sys.ANDROID:}},t.showCustomAd1=function(t){switch(cc.sys.platform){case cc.sys.WECHAT_GAME:if(window.qq)return void(this.customOn1||c.QQPlatform.ins.showCustomAd1(t));this.customOn1||a.WxPlatform.ins.showCustomAd1(t);break;case cc.sys.BYTEDANCE_GAME:this.customOn1||s.DyPlatform.ins.showCustomAd1(t);break;case cc.sys.ANDROID:}},t.hideCustomAd1=function(){switch(cc.sys.platform){case cc.sys.WECHAT_GAME:if(window.qq)return c.QQPlatform.ins.hideCustomAd1(),void(this.customOn1=!1);a.WxPlatform.ins.hideCustomAd1(),this.customOn1=!1;break;case cc.sys.BYTEDANCE_GAME:s.DyPlatform.ins.hideCustomAd1(),this.customOn1=!1;break;case cc.sys.ANDROID:}},t.showVideo=function(t){var e=this;void 0===t&&(t=null);var o=[],l=Symbol("showVideo");switch(cc.sys.platform){case cc.sys.MOBILE_BROWSER:case cc.sys.DESKTOP_BROWSER:t&&t();break;case cc.sys.WECHAT_GAME:if(i.Global.Pause(),window.qq)return void c.QQPlatform.ins.showRewardVideo(function(o){1==o?(t&&t(),i.Global.Pause(!1),cc.director.emit(n.events.Toast,"\u83b7\u53d6\u5956\u52b1\u6210\u529f")):2==o?(i.Global.Pause(!1),i.Global.enableShareAd?(cc.director.emit(n.events.Toast,"\u6682\u65e0\u5e7f\u544a\uff0c\u5206\u4eab\u53ef\u4ee5\u83b7\u5f97\u5956\u52b1\u5594"),e.shareFn(t)):(i.Global.Pause(!1),cc.director.emit(n.events.Toast,"\u83b7\u53d6\u5956\u52b1\u5931\u8d25"))):(i.Global.Pause(!1),cc.director.emit(n.events.Toast,"\u83b7\u53d6\u5956\u52b1\u5931\u8d25"))});a.WxPlatform.ins.showRewardVideo(function(o){1==o?(t&&t(),i.Global.Pause(!1),cc.director.emit(n.events.Toast,"\u83b7\u53d6\u5956\u52b1\u6210\u529f")):2==o?(i.Global.Pause(!1),i.Global.enableShareAd?(cc.director.emit(n.events.Toast,"\u6682\u65e0\u5e7f\u544a\uff0c\u5206\u4eab\u53ef\u4ee5\u83b7\u5f97\u5956\u52b1\u5594"),e.shareFn(t)):(i.Global.Pause(!1),cc.director.emit(n.events.Toast,"\u83b7\u53d6\u5956\u52b1\u5931\u8d25"))):(i.Global.Pause(!1),cc.director.emit(n.events.Toast,"\u83b7\u53d6\u5956\u52b1\u5931\u8d25"))});break;case cc.sys.BYTEDANCE_GAME:i.Global.Pause(),s.DyPlatform.ins.showRewardVideo(function(r){if(1==r){if(o.includes(l))return;t&&t(),i.Global.Pause(!1),cc.director.emit(n.events.Toast,"\u83b7\u53d6\u5956\u52b1\u6210\u529f")}else 2==r?(i.Global.Pause(!1),i.Global.enableShareAd?(cc.director.emit(n.events.Toast,"\u6682\u65e0\u5e7f\u544a\uff0c\u5206\u4eab\u53ef\u4ee5\u83b7\u5f97\u5956\u52b1\u5594"),e.shareFn(t)):(i.Global.Pause(!1),cc.director.emit(n.events.Toast,"\u83b7\u53d6\u5956\u52b1\u5931\u8d25")),o.push(l)):(i.Global.Pause(!1),cc.director.emit(n.events.Toast,"\u83b7\u53d6\u5956\u52b1\u5931\u8d25"),o.push(l))});break;case cc.sys.ANDROID:r.AndroidAD.ins.showRewardVideo()}},t.shareFn=function(t){window.wx||window.tt?window.tt?s.DyPlatform.ins.showShare("",function(e){e&&t&&t()}):window.wx&&setTimeout(function(){(window.qq?c.QQPlatform:a.WxPlatform).ins.showShare(),setTimeout(function(){t&&t()},1500)},500):t()},t.shareVideoFn=function(t,e){window.wx||window.tt?window.tt&&s.DyPlatform.ins.videoShare(t,"",function(t){t&&e&&e()}):e()},t.prototype.showCustomAd=function(t){t(0)},t.bannerOn=!1,t.customOn=!1,t.customOn1=!1,t}();o.AdMgr=l,cc._RF.pop()},{"../Global":"Global","../enum/Enums":"Enums","./AndroidAD":"AndroidAD","./DyPlatform":"DyPlatform","./QQPlatform":"QQPlatform","./WxPlatform":"WxPlatform"}],AndroidAD:[function(t,e,o){"use strict";cc._RF.push(e,"0dab2sI4NNNhYvkib9Bn4d0","AndroidAD"),Object.defineProperty(o,"__esModule",{value:!0}),o.AndroidAD=void 0;var n=t("../manager/Main"),i=function(){function t(){}return Object.defineProperty(t,"ins",{get:function(){return this._ins||(this._ins=new t),this._ins},enumerable:!1,configurable:!0}),t.prototype.showRewardVideo=function(){var t=n.default.ins.Platforms[2].videoId[0];jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","jiaZaiJiLiShiPin","(Ljava/lang/String;)V",t)},t.prototype.showInterstitial=function(){var t=n.default.ins.Platforms[2].intersitialId[0];jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","jiaZaiChaPing","(Ljava/lang/String;)V",t,300,450)},t.prototype.showBanner=function(){var t=n.default.ins.Platforms[3].bannerId[0];jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","jiaZaiBanner","(Ljava/lang/String;)V",t,600,50)},t}();o.AndroidAD=i,cc._RF.pop()},{"../manager/Main":void 0}],BaseView:[function(t,e,o){"use strict";cc._RF.push(e,"fb67fEaisdFoqMmY6i2kNSB","BaseView");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../ad/AdMgr"),c=t("../enum/Enums"),a=t("../manager/SoundMgr"),l=t("../manager/PoolMgr"),u=t("../utils/Tools"),h=cc._decorator,p=h.ccclass,d=h.property,f=cc.Button.prototype._onTouchEnded;cc.Button.prototype._onTouchEnded=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];f.apply(this,t),a.SoundMgr.ins.playSound(c.Clips.Button_Click,.5)};var y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.showBannerAd=!1,e.bannerDelay=0,e.hideBannerOnClose=!0,e.displayinSmallscreen=!0,e.showIntersitialAd=!1,e.intersitialDelay=0,e.showVideoAd=!1,e.showGridAd=!1,e.showMatrixAd=!1,e.videoDelay=0,e.tweenView=!0,e.root=null,e.tweenTime=.25,e.playBtnClip=!0,e}return i(e,t),e.prototype.showAds=function(t){var e=this;void 0===t&&(t=!0),this.showBannerAd&&this.scheduleOnce(function(){e.showBanner()},this.bannerDelay),this.showIntersitialAd&&t&&this.scheduleOnce(function(){e.showIntersitial()},this.intersitialDelay),this.showVideoAd&&t&&this.scheduleOnce(function(){e.showVideo()},this.bannerDelay),this.showGridAd&&this.scheduleOnce(function(){e.showCustomAd()},this.bannerDelay),this.showMatrixAd&&t&&this.scheduleOnce(function(){e.showMatrixAdFn()},this.bannerDelay)},e.prototype.closeAd=function(t){void 0===t&&(t=!1),s.AdMgr.closeAd(),t||s.AdMgr.hideCustomAd1()},e.prototype.showCustomAd=function(t){void 0===t&&(t=function(){}),s.AdMgr.showCustomAd(t)},e.prototype.showMatrixAdFn=function(t){void 0===t&&(t=function(){}),s.AdMgr.showCustomAd1(t)},e.prototype.showBanner=function(){s.AdMgr.showBanner()},e.prototype.showVideo=function(t){void 0===t&&(t=null),s.AdMgr.showVideo(t)},e.prototype.showIntersitial=function(){s.AdMgr.showInterstial(this.bannerDelay)},e.prototype.share=function(t){void 0===t&&(t=null),console.log("\u5206\u4eab"),s.AdMgr.shareFn(t)},e.prototype.shareVideo=function(t,e){void 0===e&&(e=null),console.log("\u89c6\u9891\u5206\u4eab"),s.AdMgr.shareVideoFn(t,e)},e.prototype.onDisable=function(){this.hideBannerOnClose&&this.closeAd()},e.prototype.onLoad=function(){},e.prototype.onEnable=function(){var t=this;this.playBtnClip&&a.SoundMgr.ins.playSound(c.Clips.Button_Click,.5),this.tweenView&&(this.root?u.Tools.fadeIn(this.root):(this.root=this.node,this.scheduleOnce(function(){u.Tools.fadeIn(t.root)}))),this.showAds()},e.prototype.close=function(){this.playBtnClip&&a.SoundMgr.ins.playSound(c.Clips.Button_Click,.5),this.showBannerAd&&this.closeAd(),this.tweenView?this.root||(this.root=this.node):l.PoolMgr.ins.putNode(this.node)},r([d({tooltip:"\u5728\u5f00\u59cb\u65f6\u663e\u793a\u6a2a\u5e45\u5e7f\u544a"})],e.prototype,"showBannerAd",void 0),r([d({visible:function(){return this.showBannerAd},range:[0,5]})],e.prototype,"bannerDelay",void 0),r([d({visible:function(){return this.showBannerAd},tooltip:"\u5728\u5173\u95ed\u65f6\u9690\u85cf\u6a2a\u5e45\u5e7f\u544a"})],e.prototype,"hideBannerOnClose",void 0),r([d({visible:function(){return this.showBannerAd}})],e.prototype,"displayinSmallscreen",void 0),r([d({tooltip:"\u5728\u5f00\u59cb\u65f6\u663e\u793a\u63d2\u9875\u5f0f\u5e7f\u544a"})],e.prototype,"showIntersitialAd",void 0),r([d({visible:function(){return this.showIntersitialAd},range:[0,5]})],e.prototype,"intersitialDelay",void 0),r([d({tooltip:"\u5728\u5f00\u59cb\u65f6\u663e\u793a\u89c6\u9891\u5e7f\u544a"})],e.prototype,"showVideoAd",void 0),r([d({tooltip:"\u5728\u5f00\u59cb\u65f6\u663e\u793a\u7f51\u683c\u5e7f\u544a"})],e.prototype,"showGridAd",void 0),r([d({tooltip:"\u5728\u5f00\u59cb\u65f6\u663e\u793a\u7f51\u683c\u77e9\u9635\u5e7f\u544a"})],e.prototype,"showMatrixAd",void 0),r([d({visible:function(){return this.showVideoAd},range:[0,5]})],e.prototype,"videoDelay",void 0),r([d({})],e.prototype,"tweenView",void 0),r([d({type:cc.Node,visible:function(){return this.tweenView}})],e.prototype,"root",void 0),r([d({visible:function(){return this.tweenView}})],e.prototype,"tweenTime",void 0),r([d({})],e.prototype,"playBtnClip",void 0),r([p],e)}(cc.Component);o.default=y,cc._RF.pop()},{"../ad/AdMgr":"AdMgr","../enum/Enums":"Enums","../manager/PoolMgr":"PoolMgr","../manager/SoundMgr":"SoundMgr","../utils/Tools":"Tools"}],CoinMgr:[function(t,e,o){"use strict";cc._RF.push(e,"94b6e1i2uxOzqLY2ErzBVGT","CoinMgr");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../Global"),c=cc._decorator,a=c.ccclass,l=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.coinLabel=null,e}var o;return i(e,t),o=e,e.prototype.start=function(){console.log(" CoinMgr.Start............. "),o.ins=this,this.setCoinLabel()},e.prototype.setCoinLabel=function(){this.coinLabel.string=s.Global.getCurrentCoin().toString()},e.prototype.getLabelPosition=function(){return this.coinLabel.node.position},e.ins=null,r([l(cc.Label)],e.prototype,"coinLabel",void 0),o=r([a],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../Global":"Global"}],CupMgr:[function(t,e,o){"use strict";cc._RF.push(e,"89a06/Izi1Nqq2YBjp55jPJ","CupMgr");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function s(t){try{a(n.next(t))}catch(e){r(e)}}function c(t){try{a(n.throw(t))}catch(e){r(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,c)}a((n=n.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var o,n,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return a([t,e])}}function a(r){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,n=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(c){r=[6,c],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Global"),l=t("../ad/DyRecorderManager"),u=t("../enum/Enums"),h=t("../game/Cup"),p=t("../game/WaterFlow"),d=t("./CoinMgr"),f=cc._decorator,y=f.ccclass,g=f.property,v=f.executeInEditMode,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cupPrefab=null,e.levelCfg=null,e._debugLevel=0,e._isPlaying=!1,e._waterFlow=null,e.selectedCup=null,e.layout_v=null,e._cups=[],e.curCfg=[],e}var o;return i(e,t),o=e,Object.defineProperty(e.prototype,"debugLevel",{get:function(){return this._debugLevel},set:function(t){this._debugLevel=t,a.Global.setLv(t),this.startGame()},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){var t=new cc.Node;t.parent=this.node,this._waterFlow=t.addComponent(p.WaterFlow),this.startGame()},e.prototype.onClickCup=function(t){console.log(" CupMgr.OnClickCup............ Cup\uff1a ",t.node.name),1!=t.getFinishState()?this.selectedCup?this.selectedCup==t?(this.doSelect(t,!1),this.selectedCup=null):this.checkPour(this.selectedCup,t)?this.startPour(this.selectedCup,t):(this.doSelect(this.selectedCup,!1),this.selectedCup=null):(this.selectedCup=t,this.doSelect(t,!0)):cc.director.emit(u.events.Toast,"Cup is Full")},e.prototype.doSelect=function(t,e){var o=t.orignPt.y+(e?t.node.height*u.AnimationTime.moveTime:0);cc.tween(t.node).stop(),cc.tween(t.node).to(u.AnimationTime.moveTime,{y:o}).start()},e.prototype.startPour=function(t,e){var o=this;console.log("  CupMgr.StartPour.........  ");var n=cc.v2(e.node.position),i=e.node.parent.convertToWorldSpaceAR(n),r=cc.view.getVisibleSize(),s=i.x>.5*r.width,c=JSON.parse(JSON.stringify(t.getTop())),a=Math.min(c.topColorNum,e.getTop().emptyNum),l=this.pourLiquid(t,e,{dstPt:n,dstGlobal:i,viewSize:r,isRight:s});n=l.dstPt,s=l.isRight,this.selectedCup=null,this._isPlaying=!0,t.moveToPour(n,s,a),t.setPourOutCallback(function(){return o.onPourStart(t,e,c)},function(){return o.onPourFinish(t,e,o._waterFlow)})},e.prototype.onPourFinish=function(t,e,o){var n=t.node.convertToWorldSpaceAR(cc.v2());n=o.node.parent.convertToNodeSpaceAR(n);var i=cc.v2(n.x,e.getWaterSurfacePosY(!0));(i=o.node.parent.convertToNodeSpaceAR(i)).x=n.x,o.playFlowAni(n,i,u.AnimationTime.moveTime,!0,function(){o.clear()}),t.setNormalAnchor();var r=t.orignPt;cc.tween(t.node).to(u.AnimationTime.moveTime,{x:r.x,y:r.y,angle:0},{easing:"sineOut"}).call(function(){t.node.zIndex=0,t.node.parent.zIndex=0}).start()},e.prototype.checkPour=function(t,e){var o=t.getTop(),n=o.topColorId,i=(o.topColorNum,e.getTop()),r=i.topColorId,s=i.emptyNum;return!(!n||r&&r!==n||!s)},e.prototype.createCupNode=function(t){var e=a.Global.cupSetting.current,o=cc.instantiate(this.cupPrefab),n=o.getComponent(h.default);return n.changeImg(+e-1),this.node.addChild(o),n.setCupInfo(t),console.log(" CreateCupNode:::: SetOnClick........ "),n.setOnClick(this.onClickCup.bind(this,n)),n},e.prototype.initCfg=function(){this.curCfg=[];var t=a.Global.lv;console.log(" CupMgr.initCfg::::::: ",t);for(var e=this.levelCfg.json[t-1],o=0;o<e.length;){var n={colorIds:[e[o],e[o+1]||0,e[o+2]||0,e[o+3]||0]};this.curCfg.push(n),o+=4}},e.prototype._createLayout=function(t,e,o){var n=new cc.Node(o);n.parent=e;var i=n.addComponent(cc.Layout);return i.type=t,i.resizeMode=cc.Layout.ResizeMode.CONTAINER,i},e.prototype.pourLiquid=function(t,e,o){var n=o.dstPt,i=o.dstGlobal,r=o.viewSize,s=o.isRight;return e.node.zIndex=0,e.node.parent.zIndex=0,t.node.zIndex=10,t.node.parent.zIndex=10,Math.abs(i.x-.5*r.width)<2&&(s=t.node.parent.convertToWorldSpaceAR(cc.v2(t.node.position)).x<.5*r.width),n.y+=30+.5*e.node.height,n.x=n.x+(s?-0:0),n=e.node.parent.convertToWorldSpaceAR(n),t.setPourAnchor(s),{dstPt:n=t.node.parent.convertToNodeSpaceAR(n),isRight:s}},e.prototype.onPourStart=function(t,e,o){var n=this;console.log(" CupMgr.onPourStart:::: SRC::: ",t,"  DST::: ",e);var i=this._waterFlow;i.setLineScale(this.layout_v.node.scale);var r=t.node.convertToWorldSpaceAR(cc.v2());r=i.node.parent.convertToNodeSpaceAR(r);var s=cc.v2(r.x,e.getWaterSurfacePosY());(s=i.node.parent.convertToNodeSpaceAR(s)).x=r.x,i.strokeColor=(new cc.Color).fromHEX(o.colorHex);var c=Math.min(o.topColorNum,e.getTop().emptyNum),a=function(){n._isPlaying=!1,n.onPourOneFinished(t,e,o.topColorId,c)};e.setStartAddWater(o.topColorId,c),i.playFlowAni(r,s,u.AnimationTime.moveTime,!1,function(){e.setPourInCallback(a),e.startAddWater(o.topColorId,c)})},e.prototype.onPourOneFinished=function(t,e,o,n){console.log(" CupMgr.OnPourOneFinished::: From: ",t," To: ",e);var i=this._cups.indexOf(t),r=this._cups.indexOf(e);a.Global.action_list.length==a.Global.action_step&&a.Global.action_list.shift(),a.Global.action_list.push({from:i,to:r,colorId:o,num:n}),this.checkIsAllFinished()?cc.director.emit(u.events.LevelFinish):cc.director.emit(u.events.Pour)},e.prototype.checkIsAllFinished=function(){console.log("Check  Is  All  Finished \u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026",this._cups);for(var t=0,e=this._cups;t<e.length;t++)if(!e[t].checkFinishImpDontChangeState())return!1;return!0},e.prototype.createCups=function(){return s(this,void 0,void 0,function(){var t,e,o,n,i,r,s,a,l,h,p,d,f;return c(this,function(){if(this.layout_v&&this.layout_v.node.destroyAllChildren(),this._cups=[],0==(t=this.curCfg.length))return[2];for(r=0;r<t;r++)e=this.curCfg[r],(f=this.createCupNode(e)).setCupIndex(r),this._cups.push(f);for(this.layout_v||(this.layout_v=this._createLayout(cc.Layout.Type.VERTICAL,this.node,"layout_v"),this.layout_v.node.zIndex=1),o=[],n=this.createCupIndexGroups(t),console.log(" CupMgr.CreateCups::::::::::::: ",n),i=1,r=0;r<n.length;r++)s=n[r],i=s.length,h=this.createCupLayout(n,this._cups[0].node.getContentSize(),i,u.spacesArr,r),o.push(h);for(this.layout_v.enabled=!0,this.layout_v.node.scale=u.spacesArr[i][1],this.layout_v.spacingY=u.spacesArr[i][2]||40,a=0,l=o;a<l.length;a++)(h=l[a]).updateLayout(),h.enabled=!1;for(this.layout_v.updateLayout(),this.layout_v.enabled=!1,p=0,d=this._cups;p<d.length;p++)(f=d[p]).setOrignPt(f.node.position);return[2]})})},e.prototype.createCupIndexGroups=function(t){var e=[];if(t<=4){for(var o=[],n=0;n<this._cups.length;n++)o.push(n);e.push(o)}else if(t<=15){o=[],n=0;for(var i=t/2;n<i;n++)o.push(n);for(e.push(o),o=[];n<t;n++)o.push(n);e.push(o),o=[]}return e},e.prototype.createCupLayout=function(t,e,o,n,i){void 0===i&&(i=0);var r=this._createLayout(cc.Layout.Type.HORIZONTAL,this.layout_v.node,"layout_h_"+i);r.node.height=e.height,console.log("  createCupLayout.Size::::  MaxNum ",o," \u95f4\u9694Value:  ",n[o][0]),r.spacingX=n[o][0],r.node.scale=1,r.spacingY=n[o][2]||40;for(var s=t[i],c=0;c<s.length;c++){var a=s[c];this._cups[a].node.parent=r.node}return r},e.prototype.start=function(){o.ins=this,cc.director.on(u.events.Reset,this.resetLv,this),cc.director.on(u.events.Back,this.undoAction,this),cc.director.on(u.events.Start,this.startGame,this),cc.director.on(u.events.AddTube,this.addcup,this)},e.prototype.onDisable=function(){cc.director.off(u.events.Reset,this.resetLv,this),cc.director.off(u.events.Back,this.undoAction,this),cc.director.off(u.events.Start,this.startGame,this),cc.director.off(u.events.AddTube,this.addcup,this)},e.prototype.resetLv=function(){a.Global.action_list=[],this.startGame()},e.prototype.startGame=function(){a.Global.action_list=[],this._isPlaying||(this.initCfg(),this.createCups(),1===a.Global.lv&&(console.log(" startGame........... LV:: ",a.Global.lv),setTimeout(function(){cc.systemEvent.emit(u.events.ExcuteGuideTask,{taskFlie:"GuideTask",stepIndex:0})},300)),l.DyRecorderManager.ins.start())},e.prototype.undoAction=function(t){return s(this,void 0,void 0,function(){var e,o,n,i,r,s,l,u,h;return c(this,function(){return this.checkCanUndo()?t&&!t()?[2,!1]:null==(e=a.Global.action_list.pop())?[2,!1]:(o=e.from,n=e.to,i=e.num,r=e.colorId,s=this._cups[n],l=this._cups[o],u=s.checkFinishImp(!1),h=l.checkFinishImp(!1),1==u&&(s.resetCheckFinishedState(),a.Global.subCoin(a.Global.tubeRewardCoin),d.default.ins.setCoinLabel()),1==h&&(l.resetCheckFinishedState(),a.Global.subCoin(a.Global.tubeRewardCoin),d.default.ins.setCoinLabel()),s.isPouring()||l.isPouring()?[2,!1]:(s.removeTopWaterImmediately(i),l.addWaterImmediately(r,i),[2,!0])):[2]})})},e.prototype.addcup=function(){this.checkCanAddTube()&&(this.selectedCup&&(this.doSelect(this.selectedCup,!1),this.selectedCup=null),this._waterFlow.clear(),this.curCfg.push({colorIds:[0,0,0,0]}),this.createCups())},e.prototype.checkCanUndo=function(){return!this._isPlaying&&a.Global.action_list.length>0},e.prototype.checkCanAddTube=function(){return!this._isPlaying&&this.curCfg.length<a.Global.maxTube},e.ins=null,r([g(cc.Prefab)],e.prototype,"cupPrefab",void 0),r([g(cc.JsonAsset)],e.prototype,"levelCfg",void 0),r([g],e.prototype,"_debugLevel",void 0),r([g({tooltip:!1})],e.prototype,"debugLevel",null),o=r([y,v],e)}(cc.Component);o.default=m,cc._RF.pop()},{"../Global":"Global","../ad/DyRecorderManager":"DyRecorderManager","../enum/Enums":"Enums","../game/Cup":"Cup","../game/WaterFlow":"WaterFlow","./CoinMgr":"CoinMgr"}],Cup:[function(t,e,o){"use strict";cc._RF.push(e,"72491RYDJhHaIEzhn1QrUBe","Cup");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.CupImgs=void 0;var s=t("../base/Math"),c=t("../enum/Enums"),a=t("../manager/SoundMgr"),l=t("../view/GameView"),u=t("./Water"),h=cc._decorator,p=h.ccclass,d=h.property,f=h.executeInEditMode,y=function(){function t(){this.tub=null,this.mask=null}return r([d(cc.SpriteFrame)],t.prototype,"tub",void 0),r([d(cc.SpriteFrame)],t.prototype,"mask",void 0),r([p("CupImgs")],t)}();o.CupImgs=y;var g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.water=null,e.info=null,e._finishState=!1,e._cupIndex=0,e.tubeNode=null,e.maskNode=null,e.finishMaskNode=null,e.cupImgs=[],e._colors=[],e._default_color="",e.tween=null,e._orignPt=null,e._upInfo=null,e.onClick=null,e}return i(e,t),e.prototype.changeImg=function(t){this.tubeNode.spriteFrame=this.cupImgs[t].tub,this.maskNode.spriteFrame=this.cupImgs[t].mask,this.finishMaskNode.spriteFrame=this.cupImgs[t].mask,this.finishMaskNode.enabled=!1},e.prototype.setWaterColor=function(t,e){void 0===t&&(t=c.WaterColors),void 0===e&&(e=c.defaultColor),this._colors=t,this._default_color=e},e.prototype.onLoad=function(){this.setWaterColor(),this._finishState=!1},e.prototype.getCupIndex=function(){return this._cupIndex},e.prototype.setCupIndex=function(t){this._cupIndex=t},e.prototype.initWater=function(){for(var t=this,e=this.info,o=[],n=c.SPLIT_COUNT-1;n>=0;n--){var i=e.colorIds[n];if(0!=i){var r=o[o.length-1];r&&r==i?r.height+=1/c.SPLIT_COUNT:o.push({height:1/c.SPLIT_COUNT,colorId:i})}}o.forEach(function(e){var o=t._colors[e.colorId]||t._default_color;e.color=(new cc.Color).fromHEX(o),e.height*=c.HEIGHT_FACTOR}),this.water.initInfos(o)},e.prototype.setCupInfo=function(t){this.info=t,this.initWater()},e.prototype.update=function(){this.water.tiltAngle!=this.node.angle&&(this.water.tiltAngle=this.node.angle)},e.prototype.getFinishState=function(){return this._finishState},e.prototype.checkIsFinshed=function(t){return 1==this._finishState?this._finishState:this.checkFinishImp(t)},e.prototype.checkFinishImp=function(t){for(var e=!1,o=this.info.colorIds,n=o[0],i=0,r=0;r<c.SPLIT_COUNT&&n==o[r];r++)i++;return i==c.SPLIT_COUNT&&0!=n&&(e=!0),console.log(" Check is finish. SplitCount:::: ",i," CupIndex: ",this._cupIndex," FinishState: ",e," TmpId: ",n),0==this._finishState&&1==e&&(t&&l.default.ins.playCoinAnimation(this.node),this.finishMaskNode.enabled=!0,this._finishState=!0),e},e.prototype.checkFinishImpDontChangeState=function(){for(var t=!1,e=this.info.colorIds,o=e[0],n=0,i=0;i<c.SPLIT_COUNT&&o==e[i];i++)n++;return n==c.SPLIT_COUNT&&(t=!0),t},e.prototype.resetCheckFinishedState=function(){this._finishState=!1,this.finishMaskNode.enabled=!1},e.prototype.setStartAddWater=function(t,e){for(var o=0,n=c.SPLIT_COUNT-1;n>=0&&(0!=this.info.colorIds[n]||(this.info.colorIds[n]=t,++o!=e));n--);},e.prototype.startAddWater=function(t,e){var o=this._colors[t]||this._default_color;this.water.addInfo({colorId:t,height:e/c.SPLIT_COUNT*c.HEIGHT_FACTOR,color:(new cc.Color).fromHEX(o)}),a.SoundMgr.ins.playSoundAtTime(c.Clips.pourWater,e/c.SPLIT_COUNT)},Object.defineProperty(e.prototype,"orignPt",{get:function(){return this._orignPt},enumerable:!1,configurable:!0}),e.prototype.setOrignPt=function(t){this._orignPt=t},e.prototype.setPourAnchor=function(t){var e=cc.v2(3,2);e.x=t?this.node.width-e.x:e.x,e.y=this.node.height-e.y,e.x=e.x/this.node.width,e.y=e.y/this.node.height,this.setAnchor(e)},e.prototype.setAnchor=function(t){var e=this.node.getAnchorPoint(),o=this.node.getPosition(),n=this.water.node.getPosition();this.node.setAnchorPoint(t);var i=cc.v2(t.x-e.x,t.y-e.y),r=cc.v2(i.x*this.node.width,i.y*this.node.height);r=s.rotatePt(r,this.node.angle),o.x+=r.x,o.y+=r.y,this.node.setPosition(o),n.x-=i.x*this.node.width,n.y-=i.y*this.node.height,this.water.node.setPosition(n)},e.prototype.moveToPour=function(t,e,o){var n=this,i=this.water.getPourStartAngle(),r=this.water.getPourEndAngle();this.water.onStartPour(o),e&&(i*=-1,r*=-1);var s=c.AnimationTime.moveTime,a=c.AnimationTime.pourTime;this.tween=cc.tween(this.node).set({angle:0}).to(s,{x:t.x,y:t.y,angle:i}).to(a,{angle:r}).call(function(){n.tween=null}).start(),this.pourSameColor(o)},e.prototype.backToInitPos=function(){var t=this;this.tween&&(this.tween.stop(),this.tween=null),this.tween=cc.tween(this.node).to(c.AnimationTime.moveTime,{position:this._orignPt,angle:0}).call(function(){t.tween=null}).start()},Object.defineProperty(e.prototype,"upCupInfo",{get:function(){return this._upInfo},enumerable:!1,configurable:!0}),e.prototype.pourSameColor=function(t){var e=0,o=this.getTop(),n=this.info.colorIds;this._upInfo=JSON.parse(JSON.stringify(o));for(var i=0;i<c.SPLIT_COUNT;i++){var r=n[i];if(0!=r){if(o.topColorId!=r)break;if(e++==t)break;n[i]=0}}},e.prototype.getTop=function(){for(var t=this.info.colorIds,e=0,o=0,n=0,i=0;i<c.SPLIT_COUNT;i++)if(0!=t[i]){if(0!=o&&o!=t[i])break;o=t[i],n++}else e++;return{emptyNum:e,topColorId:o,topColorNum:n,colorHex:this._colors[o]||this._default_color}},e.prototype.getBottleMouthCenter=function(){return{x:this.node.x,y:this.node.y+this.node.width/2}},e.prototype.setOnClick=function(t){this.onClick=t},e.prototype.changeCheckedState=function(){this.isPouring()||this.onClick&&this.onClick(this)},e.prototype.isPouring=function(){return Math.abs(this.node.angle)>1},e.prototype.getWaterSurfacePosY=function(t){void 0===t&&(t=!1);var e=this.getTop(),o=(c.SPLIT_COUNT-e.emptyNum)/c.SPLIT_COUNT;o<.02?o=.02:t&&(o-=1/c.SPLIT_COUNT*c.HEIGHT_FACTOR),o*=c.HEIGHT_FACTOR,o-=.5;var n=cc.v2(0,this.water.node.height*o);return(n=this.water.node.convertToWorldSpaceAR(n)).y},e.prototype.setPourInCallback=function(t){var e=this;console.log(" SetPourInCallBack  Cup Index: ",this._cupIndex),this.water.setPourInCallback(function(){e._upInfo=null;var o=e.checkIsFinshed(!0);t&&t(e,o),o&&(console.log(" Cup.SetPourInCallBack.Finished.... "),a.SoundMgr.ins.playSound(c.Clips.ContainerFinish,.3))}.bind(this))},e.prototype.setPourOutCallback=function(t,e){console.log(" setPourOutCallback  Cup Index: ",this.node.name),this.water.setPourOutCallback(function(){t&&t(this)}.bind(this),function(){this.tween&&(this.tween.stop(),this.tween=null),e&&e(this)}.bind(this))},e.prototype.setNormalAnchor=function(){this.setAnchor(cc.v2(.5,.5))},e.prototype.addWaterImmediately=function(t,e){for(var o=0,n=c.SPLIT_COUNT-1;n>=0&&(0!=this.info.colorIds[n]||(this.info.colorIds[n]=t,++o!=e));n--);this.initWater()},e.prototype.removeTopWaterImmediately=function(t){console.log(" removeTopWaterImmediately \u676f\u5b50: ",this.node.name);for(var e=0,o=this.getTop(),n=this.info.colorIds,i=0;i<c.SPLIT_COUNT;i++){var r=n[i];if(0!=r){if(o.topColorId!=r)break;if(n[i]=0,++e>=t)break}}return this.initWater(),o},r([d(u.default)],e.prototype,"water",void 0),r([d(cc.Sprite)],e.prototype,"tubeNode",void 0),r([d(cc.Sprite)],e.prototype,"maskNode",void 0),r([d(cc.Sprite)],e.prototype,"finishMaskNode",void 0),r([d([y])],e.prototype,"cupImgs",void 0),r([p,f],e)}(cc.Component);o.default=g,cc._RF.pop()},{"../base/Math":"Math","../enum/Enums":"Enums","../manager/SoundMgr":"SoundMgr","../view/GameView":"GameView","./Water":"Water"}],DyPlatform:[function(t,e,o){"use strict";cc._RF.push(e,"d896fdeDmxB8JA6ayUwKTxf","DyPlatform"),Object.defineProperty(o,"__esModule",{value:!0}),o.DyPlatform=void 0;var n=t("../manager/Main"),i=function(){function t(){this.tt=window.tt,this.haveSideReward=!1,this.rewardVideoList=new Map}return t.prototype.openToScence=function(){this.tt&&this.tt.navigateToScene({scene:"sidebar",fail:console.log,success:console.log})},Object.defineProperty(t,"ins",{get:function(){return this._ins?this._ins:(this._ins=new t,this._ins.init(),this._ins)},enumerable:!1,configurable:!0}),t.prototype.init=function(){var t=this,e=n.default.ins.Shares[0].sharePics;e.length>0&&this.tt&&(this.tt.onShareAppMessage(function(){var t=Math.floor(Math.random()*e.length);return{title:e[t].shareText,templateId:e[t].shareId,imageUrl:e[t].shareLink}}),this.tt.showShareMenu({withShareTicket:!0})),this.tt?(this.tt.onShow(function(e){var o={launch_from:"homepage",location:"sidebar_card",scene:"021036"},n=!1;for(var i in o)e[i]!==o[i]&&(n=!0);n||(t.haveSideReward=!0),console.log(e,"op")}),this.initInterstitialAd()):this.haveSideReward=!0},t.prototype.getLaunchOption=function(){return this.tt.getLaunchOptionsSync().query},t.prototype.getScene=function(){return this.tt.getLaunchOptionsSync().scene},t.prototype.showShare=function(t,e){if(void 0===t&&(t=""),n.default.ins.Shares[0]){var o=n.default.ins.Shares[0].sharePics;if(!(o.length<=0)){var i=Math.floor(Math.random()*o.length);this.tt&&this.tt.shareAppMessage({channel:"article",title:o[i].shareText,templateId:o[i].shareId,imageUrl:o[i].shareLink,query:t,success:function(){console.log("\u5206\u4eab\u6210\u529f"),e(1)},fail:function(){console.log("\u5206\u4eab\u5931\u8d25"),e(0)}})}}},t.prototype.videoShare=function(t,e,o){if(void 0===e&&(e=""),n.default.ins.ShareVideoes[0]){var i=n.default.ins.ShareVideoes[0].sharePics;if(!(i.length<=0)){var r=Math.floor(Math.random()*i.length);console.log(r,e,i),this.tt&&this.tt.shareAppMessage({channel:"video",query:e,templateId:i[r].shareId,title:i[r].title,desc:i[r].desc,extra:{videoPath:t,videoTopics:i[r].videoTopics,hashtag_list:i[r].videoTopics},success:function(){console.log("\u5206\u4eab\u89c6\u9891\u6210\u529f"),o(1)},fail:function(){console.log("\u5206\u4eab\u89c6\u9891\u5931\u8d25"),o(0)}})}}},t.prototype.hideBanner=function(){null!=this.banner&&(this.banner.destroy(),this.banner=null)},t.prototype.showBanner=function(t){var e=this;void 0===t&&(t=2);var o=n.default.ins.Platforms[0].bannerId[0];if(this.tt&&o){if(null!=this.banner)return this.banner.destroy(),void(this.banner=null);var i=this.tt.getSystemInfoSync();console.log(o,"id");var r=this.tt.createBannerAd({adUnitId:o,adIntervals:30,style:{top:i.windowHeight,width:300}});console.log(r,"bannerAd"),r.style.left=(i.windowWidth-300)/2,r.onResize(function(t){r.style.top=i.windowHeight-t.height/2+20,r.style.left=(i.windowWidth-t.width)/2}),1==t?(i.windowWidth,r.style.width):2==t&&(i.windowWidth,r.style.width),r.onLoad(function(){console.log("banner \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),e.banner=r,r.show()}),r.onError(function(t){console.log("banner \u5e7f\u544a\u52a0\u8f7d\u9519\u8bef",t)})}},t.prototype.showRewardVideo=function(t){var e=this,o=function(e){e&&e.isEnded?(console.log("res:  ",e),t(1),r.offClose(o)):(console.log("\u64ad\u653e\u4e2d\u9014\u9000\u51fa"),r.offClose(o),t(0))},i=n.default.ins.Platforms[0].videoId[0];null!=this.rewardVideo2&&this.rewardVideo2.offClose(o);var r=this.tt.createRewardedVideoAd({adUnitId:i});this.rewardVideo2=r,r.load().then(function(){e.tt.showToast({title:"\u52a0\u8f7d\u4e2d\uff0c\u8bf7\u7a0d\u540e",icon:"success",duration:1500,success:function(){},fail:function(){},complete:function(){}}),console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),r.show().then(function(){r.onClose(o)})});var s=!1;r.onError(function(o){console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u663e\u793a\u5931\u8d25",o),s||(s=!0,e.tt.showToast({title:"\u8bf7\u7a0d\u540e\u518d\u8bd5",icon:"fail",duration:1500,success:function(){},fail:function(){},complete:function(){}}),t(2))})},t.prototype.initInterstitialAd=function(){var t=this;if(cc.sys.BYTEDANCE_GAME){var e=n.default.ins.Platforms[0].intersitialId[0];this.interstitialAd=this.tt.createInterstitialAd({adUnitId:e});var o=function(){setTimeout(function(){t.interstitialAd.load().then(function(){console.log("\u63d2\u5c4f \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),t.interstitialAd.onClose(function(t){o(),console.log("\u5173\u95ed\u63d2\u5c4f\u5e7f\u544a",t)}),t.interstitialAd.onError(function(t){console.log("err:\u63d2\u5c4f\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25",t)}),t.interstitialAd.show().catch(function(t){o(),console.log("\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u5931\u8d25",t)})})},35e3)};o()}},t.prototype.showInterstitialAd=function(t){void 0===t&&(t=5)},t.prototype.showCustomAd=function(t){t(0)},t.prototype.hideCustomAd1=function(){this.custom1&&(this.custom1.hide(),this.custom1=null)},t.prototype.showCustomAd1=function(t){var e=this;if(this.tt){var o,i=n.default.ins.Platforms[2].customId[1];if(i)if(this.tt.getSystemInfoSync(),o={width:128,left:64,top:300,fixed:0},this.custom1)this.custom1.show();else{var r=this.tt.createBlockAd({adUnitId:i,orientation:"vertical",size:1,style:o});r.onLoad(function(){console.log("\u539f\u751f\u6a21\u677f \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),t(1),r.show().then(function(){return console.log("\u539f\u751f\u6a21\u677f \u5e7f\u544a\u663e\u793a\u6210\u529f")}).catch(function(e){console.log("\u539f\u751f\u6a21\u677f \u5e7f\u544a\u663e\u793a\u5931\u8d25",e),t(0)}),e.custom1=r}),r.onError(function(e){console.log("\u539f\u751f\u6a21\u677fCustomAd \u5e7f\u544a\u52a0\u8f7d\u5931\u8d25\uff1a",e),t(0)})}}},t.prototype.hideCustomAd=function(){this.custom&&(this.custom=null)},t}();o.DyPlatform=i,cc._RF.pop()},{"../manager/Main":void 0}],DyRecorderManager:[function(t,e,o){"use strict";cc._RF.push(e,"18173XOTpVPbZqjYd9QnBKj","DyRecorderManager");var n=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function s(t){try{a(n.next(t))}catch(e){r(e)}}function c(t){try{a(n.throw(t))}catch(e){r(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,c)}a((n=n.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var o,n,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return a([t,e])}}function a(r){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,n=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(c){r=[6,c],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.DyRecorderManager=void 0;var r=function(){function t(){this.tt=window.tt}return Object.defineProperty(t,"ins",{get:function(){return this._ins?this._ins:(this._ins=new t,this._ins.init(),this._ins)},enumerable:!1,configurable:!0}),t.prototype.init=function(){this.tt&&(this.systemInfo=this.tt.getSystemInfoSync(),this.getGameRecorderManager=this.tt.getGameRecorderManager(),this.maskInfo=this.getGameRecorderManager.getMark(),this.onError())},t.prototype.start=function(t){var e,o;if(void 0===t&&(t={duration:30,isMarkOpen:!0}),this.tt){var n=(this.systemInfo.screenWidth-this.maskInfo.markWidth)/2,i=(this.systemInfo.screenHeight-this.maskInfo.markHeight)/2;null!==(e=t.locLeft)&&void 0!==e||(t.locLeft=n),null!==(o=t.locTop)&&void 0!==o||(t.locTop=i),this.onStart(),this.getGameRecorderManager.start(t)}},t.prototype.stop=function(){return n(this,void 0,void 0,function(){var t;return i(this,function(){return this.tt?(t=this.onStop(),this.getGameRecorderManager.stop(),[2,t]):[2]})})},t.prototype.onStart=function(){this.getGameRecorderManager.onStart(function(t){console.log(t,"\u5f55\u5c4f\u5f00\u59cb")})},t.prototype.onStop=function(){var t=this;return new Promise(function(e){t.getGameRecorderManager.onStop(function(t){console.log(t,t.videoPath,"\u5f55\u5c4f\u7ed3\u675f"),e(t.videoPath)})})},t.prototype.onError=function(){this.getGameRecorderManager.onError(function(t){console.log(t,"\u5f55\u5c4f\u5931\u8d25")})},t}();o.DyRecorderManager=r,cc._RF.pop()},{}],Enums:[function(t,e,o){"use strict";cc._RF.push(e,"860e9yo5Z5FdpwLnSS14+jg","Enums");var n,i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.prop=o.ui=o.events=o.Key=o.Assets=o.Clips=o.SoundStatus=o.spacesArr=o.dft_lingWidth=o.CUP_SELECTED_MOVE_HEIGHT=o.AnimationTime=o.defaultColor=o.WaterColors=o.SPLIT_COUNT=o.ANGLE_FACTOR=o.HEIGHT_FACTOR=o.PourAction=o.BASIC_DATA=o.MAX_ARR_LEN=o.shareVideoConfig=o.shareConfig=o.shareVideoContent=o.shareContent=o.adConfig=void 0;var r=cc._decorator,s=r.ccclass,c=r.property,a=function(){function t(){this.platform="platform",this.id=0,this.bannerId=[],this.intersitialId=[],this.videoId=[],this.customId=[]}return i([c()],t.prototype,"platform",void 0),i([c({type:cc.Integer})],t.prototype,"id",void 0),i([c({type:cc.String})],t.prototype,"bannerId",void 0),i([c({type:cc.String})],t.prototype,"intersitialId",void 0),i([c({type:cc.String})],t.prototype,"videoId",void 0),i([c({type:cc.String})],t.prototype,"customId",void 0),i([s("adConfig")],t)}();o.adConfig=a;var l=function(){function t(){this.shareId="",this.shareLink="",this.shareText="\u5206\u4eab\u6807\u9898"}return i([c()],t.prototype,"shareId",void 0),i([c()],t.prototype,"shareLink",void 0),i([c()],t.prototype,"shareText",void 0),i([s("shareContent")],t)}();o.shareContent=l;var u=function(){function t(){this.shareId="",this.title="\u5206\u4eab\u6807\u9898",this.desc="",this.videoTopics=[]}return i([c()],t.prototype,"shareId",void 0),i([c()],t.prototype,"title",void 0),i([c()],t.prototype,"desc",void 0),i([c({type:cc.String})],t.prototype,"videoTopics",void 0),i([s("shareVideoContent")],t)}();o.shareVideoContent=u;var h=function(){function t(){this.platform="platform",this.sharePics=[]}return i([c()],t.prototype,"platform",void 0),i([c({type:l})],t.prototype,"sharePics",void 0),i([s("shareConfig")],t)}();o.shareConfig=h;var p=function(){function t(){this.platform="platform",this.sharePics=[]}return i([c()],t.prototype,"platform",void 0),i([c({type:u})],t.prototype,"sharePics",void 0),i([s("shareVideoConfig")],t)}();o.shareVideoConfig=p,o.MAX_ARR_LEN=6,function(t){t[t.color_alpha=1]="color_alpha",t[t.color_range=255]="color_range",t[t.BYTE=4]="BYTE",t[t.color_alpha2=1]="color_alpha2",t[t.color_alpha3=2]="color_alpha3",t[t.color_alpha4=3]="color_alpha4"}(o.BASIC_DATA||(o.BASIC_DATA={})),function(t){t[t.none=0]="none",t[t.in=1]="in",t[t.out=2]="out"}(o.PourAction||(o.PourAction={})),o.HEIGHT_FACTOR=.8,o.ANGLE_FACTOR=.01,o.SPLIT_COUNT=4,o.WaterColors=["#155DEF","#F2C90F","#BD2656","#F0791F","#03032d","#0ce0f4","#9adb8e","#ef149b","#16cd09","#DD2E44","#E5C69A","#65DC8E","#B068F0","#6e7a79","#538849"],o.defaultColor="#538849",function(t){t[t.pourTime=.2]="pourTime",t[t.moveTime=.1]="moveTime"}(o.AnimationTime||(o.AnimationTime={})),o.CUP_SELECTED_MOVE_HEIGHT=100,o.dft_lingWidth=6,o.spacesArr=((n={})[1]=[40,1],n[2]=[80,1],n[3]=[60,1],n[4]=[45,.9],n[5]=[35,.85],n[6]=[35,.85],n[7]=[25,.7],n[8]=[15,.7],n),function(t){t[t.on=1]="on",t[t.off=-1]="off"}(o.SoundStatus||(o.SoundStatus={})),o.Clips={Button_Click:"Button_Click",ContainerFinish:"ContainerFinish",firework_1:"firework_1",modal:"modal",pourWater:"pourWater",Show_Victory:"Show_Victory",reward:"reward"},o.Assets={UiPrefab:{type:cc.Prefab,path:"Preload/Prefabs/UI/"},CommonPrefab:{type:cc.Prefab,path:"Preload/Prefabs/Common/"},Json:{type:cc.JsonAsset,path:"Preload/Jsons/"},Sound:{type:cc.AudioClip,path:"Preload/Clips/"},UiFrame:{type:cc.SpriteFrame,path:"Preload/UI/"}},o.Key={ToolSetting:"ToolSetting",Lv:"Lv",Today:"Today",CupSetting:"CupSetting",ReceiveList:"ReceiveList",ReceiveListTime:"ReceiveListTime",SideReward:"SideReward",CodeList:"CodeList",CoinCount:"CoinCount",CurMaxLevel:"CurMaxLevel"},o.events={GameStart:"GameStart",Toast:"Toast",ChangeSound:"ChangeSound",Reset:"Reset",Back:"Back",AddTube:"AddTube",Start:"Start",TimeStop:"TimeStop",LevelFinish:"LevelFinish",Pour:"Pour",ExcuteGuideTask:"ExcuteGuideTask",Pause:"Pause",LevelSelectChange:"LevelSelectChange",BackToMain:"BackToMain"},o.ui={GameView:{name:"GameView",layer:3,clear:!1},MainView:{name:"MainView",layer:3,clear:!1},VictoryView:{name:"VictoryView",layer:3,clear:!1},ShopView:{name:"ShopView",layer:3,clear:!1},LevelView:{name:"LevelView",layer:3,clear:!1},GetCupView:{name:"GetCupView",layer:3,clear:!1},ToastView:{name:"ToastView",layer:6,clear:!1},SettingView:{name:"SettingView",layer:6,clear:!1}},o.prop={reset:{name:"reset",layer:3,clear:!1},back:{name:"back",layer:3,clear:!1},tube:{name:"tube",layer:3,clear:!1}},cc._RF.pop()},{}],GameMgr:[function(t,e,o){"use strict";cc._RF.push(e,"fc646V3p1hLl4EMPJbOXsZW","GameMgr");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../enum/Enums"),c=t("./SoundMgr"),a=cc._decorator,l=a.ccclass,u=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.start=function(){cc.director.on(s.events.Pour,this.onPour,this),cc.director.on(s.events.LevelFinish,this.onLevelFinish,this)},e.prototype.onDisable=function(){cc.director.off(s.events.Pour,this.onPour,this),cc.director.off(s.events.LevelFinish,this.onLevelFinish,this)},e.prototype.onPour=function(){console.log("===================================="),console.log("onPour"),console.log("====================================")},e.prototype.onLevelFinish=function(){console.log("===================================="),console.log("onLevelFinish"),console.log("===================================="),c.SoundMgr.ins.playSound(s.Clips.Show_Victory)},r([l],e)}(cc.Component));o.default=u,cc._RF.pop()},{"../enum/Enums":"Enums","./SoundMgr":"SoundMgr"}],GameView:[function(t,e,o){"use strict";cc._RF.push(e,"945b0ldndVLiZvMb+WPC41w","GameView");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function s(t){try{a(n.next(t))}catch(e){r(e)}}function c(t){try{a(n.throw(t))}catch(e){r(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,c)}a((n=n.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var o,n,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return a([t,e])}}function a(r){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,n=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(c){r=[6,c],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Global"),l=t("../ad/DyRecorderManager"),u=t("../enum/Enums"),h=t("../manager/PropMgr"),p=t("../manager/SoundMgr"),d=t("../manager/CoinMgr"),f=t("../manager/CupMgr"),y=t("../manager/ResMgr"),g=t("../utils/Tools"),v=t("./BaseView"),m=t("./VictoryView"),_=cc._decorator,b=_.ccclass,w=_.property,C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lvLabel=null,e.resetMgr=null,e.backMgr=null,e.tubeMgr=null,e.coinPrefab=null,e.effectRoot=null,e.coinBgNode=null,e.coinManagerNode=null,e.initLevel=a.Global.lv,e.onceAdd=!1,e.tween=null,e}var o;return i(e,t),o=e,e.prototype.onEnable=function(){cc.director.on(u.events.LevelFinish,this.GameResult,this),cc.director.on(u.events.LevelSelectChange,this.eventLevelChange,this),cc.director.on(u.events.AddTube,this.toolCountChange,this),cc.director.on(u.events.Back,this.toolCountChange,this)},e.prototype.onDisable=function(){cc.director.off(u.events.LevelFinish,this.GameResult,this),cc.director.off(u.events.LevelSelectChange,this.eventLevelChange,this),cc.director.off(u.events.AddTube,this.toolCountChange,this),cc.director.off(u.events.Back,this.toolCountChange,this)},e.prototype.start=function(){g.save("isPlayGame",!0),o.ins=this},e.prototype.setLvLabel=function(t){var e=t;console.log(" _Lv:::: ",t,"  Global.Lv:::  ",a.Global.lv),null!=t&&0!=t||(e=a.Global.lv),this.lvLabel.string="<b><color=#608bc1><outline color=#000000 width=2>level </outline></c><color=#FAFAFA><outline color=#000000 width=2>"+e+"</outline></c></b>"},e.prototype.onResetClick=function(e){console.log(a.Global.getToolSetting("reset")),this.onceAdd=!1,a.Global.getToolSetting("reset")>0?(a.Global.addToolSetting("reset",-1),cc.director.emit(u.events.Reset)):(console.log(e.target),t.prototype.showVideo.call(this,function(){cc.director.emit(u.events.Reset)})),this.setProps(a.Global._toolSetting)},e.prototype.onBackClick=function(e){f.default.ins.checkCanUndo()&&(a.Global.getToolSetting("back")>0?(a.Global.addToolSetting("back",-1),cc.director.emit(u.events.Back)):(console.log(e.target),t.prototype.showVideo.call(this,function(){cc.director.emit(u.events.Back)})),this.setProps(a.Global._toolSetting))},e.prototype.onAddTubeClick=function(e){var o=this;this.onceAdd?cc.director.emit(u.events.Toast,"Only add one tuber per level"):f.default.ins.checkCanAddTube()&&(a.Global.getToolSetting("tube")>0?(a.Global.addToolSetting("tube",-1),this.onceAdd=!0,cc.director.emit(u.events.AddTube)):(console.log(e.target),t.prototype.showVideo.call(this,function(){o.onceAdd=!0,cc.director.emit(u.events.AddTube)})),this.setProps(a.Global._toolSetting))},e.prototype.onTimeStopClick=function(e){console.log(e.target),t.prototype.showVideo.call(this,function(){cc.director.emit(u.events.TimeStop)})},e.prototype.onBackMainClick=function(){t.prototype.close.call(this),this.node.destroy(),cc.director.emit(u.events.BackToMain),console.log("  emit  BackMain Event. ")},e.prototype.playCoinAnimation=function(t){var e=this,o=t.position,n=(t.parent.convertToWorldSpaceAR(o),cc.instantiate(this.coinPrefab)),i=d.default.ins.getLabelPosition(),r=d.default.ins.coinLabel.node.parent.convertToWorldSpaceAR(i);this.coinManagerNode.convertToWorldSpaceAR(r),this.effectRoot.convertToNodeSpaceAR(r),this.effectRoot.addChild(n),n.position=o,this.tween=cc.tween(n).to(1,{x:i.x,y:i.y,angle:360},{easing:"quartIn"}).call(function(){e.tween=null,n.destroy(),a.Global.addCoin(a.Global.tubeRewardCoin),d.default.ins.setCoinLabel()}).start()},e.prototype.GameResult=function(){return s(this,void 0,void 0,function(){var t,e;return c(this,function(o){switch(o.label){case 0:return this.onceAdd=!1,a.Global.addLv(),p.SoundMgr.ins.playSound(u.Clips.Show_Victory),this.init(),[4,y.default.ins.getUI(u.ui.VictoryView)];case 1:return t=o.sent(),cc.find("Canvas").addChild(t),t.getComponent(m.default).init(),[4,l.DyRecorderManager.ins.stop()];case 2:return e=o.sent(),console.log(e,"videoPath"),[2]}})})},e.prototype.init=function(t){this.initLevel=t,null!=t&&(a.Global.lv=t),this.setLvLabel(t);var e=g.load(u.Key.ToolSetting,2);a.Global._toolSetting=e||a.Global._toolSetting,this.setProps(a.Global._toolSetting)},e.prototype.onLevelClick=function(){return s(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,y.default.ins.getUI(u.ui.LevelView)];case 1:return t.sent().parent=this.node.parent,[2]}})})},e.prototype.toolCountChange=function(){this.setProps(a.Global._toolSetting)},e.prototype.setProps=function(t){this.resetMgr.setNum(t.reset),this.backMgr.setNum(t.back),this.tubeMgr.setNum(t.tube)},e.prototype.eventLevelChange=function(){this.setLvLabel()},e.ins=null,r([w(cc.RichText)],e.prototype,"lvLabel",void 0),r([w(h.default)],e.prototype,"resetMgr",void 0),r([w(h.default)],e.prototype,"backMgr",void 0),r([w(h.default)],e.prototype,"tubeMgr",void 0),r([w(cc.Prefab)],e.prototype,"coinPrefab",void 0),r([w(cc.Node)],e.prototype,"effectRoot",void 0),r([w(cc.Node)],e.prototype,"coinBgNode",void 0),r([w(cc.Node)],e.prototype,"coinManagerNode",void 0),o=r([b],e)}(v.default);o.default=C,cc._RF.pop()},{"../Global":"Global","../ad/DyRecorderManager":"DyRecorderManager","../enum/Enums":"Enums","../manager/CoinMgr":"CoinMgr","../manager/CupMgr":"CupMgr","../manager/PropMgr":"PropMgr","../manager/ResMgr":"ResMgr","../manager/SoundMgr":"SoundMgr","../utils/Tools":"Tools","./BaseView":"BaseView","./VictoryView":"VictoryView"}],GetCupView:[function(t,e,o){"use strict";cc._RF.push(e,"e2db6D/v1VA2YRr1aZaw11b","GetCupView");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./BaseView"),c=cc._decorator,a=c.ccclass,l=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.propSprite=null,e.rootNode=null,e}return i(e,t),e.prototype.start=function(){console.log(" GetCupView. Starttttt.... ")},e.prototype.setTitleImg=function(){},e.prototype.setPropImg=function(t){this.propSprite.spriteFrame=t},e.prototype.setScale=function(t){this.rootNode.scale=t},e.prototype.close=function(){this.node.destroy(),this.cancelFn&&this.cancelFn()},r([l(cc.Sprite)],e.prototype,"propSprite",void 0),r([l(cc.Node)],e.prototype,"rootNode",void 0),r([a],e)}(s.default);o.default=u,cc._RF.pop()},{"./BaseView":"BaseView"}],Global:[function(t,e,o){"use strict";cc._RF.push(e,"97215z3FR9KQZoWbMciCTCo","Global"),Object.defineProperty(o,"__esModule",{value:!0}),o.Global=void 0;var n=t("./enum/Enums"),i=t("./utils/Tools"),r=function(){function t(){}return Object.defineProperty(t,"receiveList",{get:function(){return t._receiveList},set:function(t){this._receiveList=t},enumerable:!1,configurable:!0}),t.setReceiveList=function(e){t._receiveList.push(e),this.saveReceiveListLocal()},t.saveReceiveListLocal=function(){i.save(n.Key.ReceiveList,JSON.stringify(t._receiveList)),i.save(n.Key.ReceiveListTime,i.getDate())},t.clearReceiveList=function(){t._receiveList=[],this.saveReceiveListLocal()},Object.defineProperty(t,"codeList",{get:function(){return this._codeList},set:function(t){this._codeList=t},enumerable:!1,configurable:!0}),t.setCodeList=function(t){this._codeList.push(t),i.save(n.Key.CodeList,JSON.stringify(this._codeList))},Object.defineProperty(t,"cupSetting",{get:function(){return this._cupSetting},set:function(t){this._cupSetting=t},enumerable:!1,configurable:!0}),t.setCupCurrent=function(e){t._cupSetting.current=e==t._cupSetting.current?null:e,i.save(n.Key.CupSetting,JSON.stringify(t._cupSetting))},t.setCupHavaList=function(e){t._cupSetting.haveList.includes(e)||(t._cupSetting.haveList.push(e),i.save(n.Key.CupSetting,JSON.stringify(t._cupSetting)))},t.resetCupHaveList=function(){t._cupSetting.haveList=["01"],t._cupSetting.current="01"},t.addToolSetting=function(t,e){this._toolSetting[t]+=+e,i.save(n.Key.ToolSetting,JSON.stringify(this._toolSetting))},t.getToolSetting=function(t){return+this._toolSetting[t]},t.addLv=function(){this.lv<this.maxLv&&this.lv++,this.lv>this.currentMaxLv&&(this.currentMaxLv=this.lv,i.save(n.Key.CurMaxLevel,this.currentMaxLv),console.log(" Save New Max Level::::: ",this.currentMaxLv)),i.save(n.Key.Lv,this.lv)},t.subLv=function(){this.lv>1&&this.lv--,i.save(n.Key.Lv,this.lv)},t.setLv=function(t){t>0&&t<=this.maxLv&&(this.lv=t),i.save(n.Key.Lv,this.lv)},t.addCoin=function(t){this.currentCoin=this.currentCoin+t,i.save(n.Key.CoinCount,this.currentCoin)},t.subCoin=function(t){t>this.currentCoin?console.error("Sub coin is not enough \uff01\uff01\uff01\uff01"):(this.currentCoin=this.currentCoin-t,i.save(n.Key.CoinCount,this.currentCoin))},t.getCurrentCoin=function(){return this.currentCoin},t.Pause=function(e){void 0===e&&(e=!0),cc.director.emit(n.events.Pause,e),t.start=!e},t.Debug=!0,t.bgm=n.SoundStatus.on,t.sound=n.SoundStatus.on,t.LoadingRate=0,t.enableShareAd=!0,t.start=!1,t.layer=[],t.lv=1,t.maxLv=420,t.currentMaxLv=1,t.maxTube=15,t.action_list=[],t.action_step=5,t.startCoin=0,t.currentCoin=0,t.tubeRewardCoin=5,t.rewardCoin=10,t.watchAdReward=50,t._receiveList=[],t._toolSetting={reset:1,back:1,tube:1},t._cupSetting={haveList:["01"],current:"01"},t._codeList=[],t}();o.Global=r,cc._RF.pop()},{"./enum/Enums":"Enums","./utils/Tools":"Tools"}],GuideFinger:[function(t,e,o){"use strict";cc._RF.push(e,"a98d3lGMCVFDoOpdeXCzU2K","GuideFinger");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.GuideFinger=void 0;var s=cc._decorator,c=s.ccclass,a=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),r([c],e)}(cc.Component));o.GuideFinger=a,cc._RF.pop()},{}],GuideTaskMgr:[function(t,e,o){"use strict";cc._RF.push(e,"0ea37Q85FJO/Iq13E7CO66f","GuideTaskMgr");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.GuideTaskMgr=void 0;var s=cc._decorator,c=s.ccclass,a=s.property,l=t("async"),u=t("../enum/Enums"),h=cc.v3(),p=function(e){function o(){var t=null!==e&&e.apply(this,arguments)||this;return t.FINGER_PREFAB=null,t._finger=null,t._isOpenMaskInfo=!0,t}var n;return i(o,e),n=o,o.prototype.onLoad=function(){this.FINGER_PREFAB&&(this._finger=cc.instantiate(this.FINGER_PREFAB),this._finger.parent=this.node,this._finger.active=!1),this.node.setContentSize(cc.winSize),cc.systemEvent.on(u.events.ExcuteGuideTask,this.ExcuteGuideTask,this),this.node.on(cc.Node.EventType.TOUCH_START,this.addSetSwallowTouchesEventListener,this),this._mask=this.node.getComponentInChildren(cc.Mask),console.log(" GuideTaskManager.Mask:::: ",this._mask," Finger:::::: ",this._finger),this._maskInfo=this._mask.node.getChildByName("info"),this._mask.node.active=!1,this._maskInfo.active=this._isOpenMaskInfo},o.prototype.ExcuteGuideTask=function(e){var o=this;this._mask.node.active=!0;var i=e.taskFlie,r=e.stepIndex,s=t(i).task,c=s.steps[r];console.log(" ExcuteGuideTask Index::::::: ",r," Step:::: ",c),this._targetNode=null;var a=function(){console.log("ExcuteGuideTask guideFn ::::::: "),l.default.series({stepStart:function(t){console.log("ExcuteGuideTask stepStart ::::::: "),c.onStart?c.onStart(function(){t()}):t()},stepExcute:function(t){console.log("ExcuteGuideTask stepExcute ::::::: ",o._mask.node),c.onExcute&&c.onExcute(function(){o._mask.node.getChildByName("label").getComponent(cc.Label).string=c.command.text,o.scheduleOnce(function(){var e=n[c.command.cmd];e&&e(o,c,function(e){t(e)})},c.delayTime||0)})},stepEnd:function(t){console.log("ExcuteGuideTask stepEnd ::::::: "),c.onEnd?c.onEnd(function(){t()}):t(),(c=s.steps[++r])?(console.log("ExcuteGuideTask Start Next Step ::::::: "),a()):(o._mask._graphics.clear(),o._mask.node.active=!1,o._finger.active=!1)}},function(){})};console.log("ExcuteGuideTask guideFn Up::::::: "),a()},o.prototype.addSetSwallowTouchesEventListener=function(t){if(this._mask.node.active)if(this._targetNode){if(cc.isValid(this._targetNode)){var e=this._targetNode.getBoundingBox();console.log(this._targetNode.getPosition(),t.getLocation(),"event.getLocation()event.getLocation()event.getLocation()");var o=this._targetNode.getWorldPosition(h);console.log(o);var n=t.getLocation(),i=e.width/2,r=e.height/2;n.x>=o.x-i&&n.x<=o.x+e.width+i&&n.y>=o.y-r&&n.y<=o.y+e.height+r?this.node._touchListener.setSwallowTouches(!1):this.node._touchListener.setSwallowTouches(!0)}}else this.node._touchListener.setSwallowTouches(!0);else this.node._touchListener.setSwallowTouches(!1)},o.movefinger=function(t,e,o){console.log(" movefinger~~~~~~~ ");var n=e.command;t._targetNode=null,t.find(n.args,function(e){var n=e;t.fingerToNode(n,function(){t._targetNode=n,e.once(cc.Node.EventType.TOUCH_END,function(){o()})})})},o.prototype.find=function(t,e){var o=this;console.log(" GuideManager.Find::: ",t," CB:::: ",e);var n=cc.find("Canvas");this.locateNode(n,t,function(t,n){if(!t){var i=o._focusToNode(n);console.log(i,"rectrectrectrect"),e&&e(n,i)}})},o.prototype.parse=function(t){for(var e,o=[],n={},i=0,r=t.split(/[.,//,>,#]/g);i<r.length;i++){var s=r[i],c=new RegExp("[.,//,>,#]+"+s,"g"),a=t.match(c),l=a&&(null===(e=a[n[s]||0])||void 0===e?void 0:e.replace(s,""))||"/";n[s]?n[s]++:n[s]=1,o.push({symbol:l,name:s.trim(),index:n[s]-1||0})}return o},o.prototype.locateNode=function(t,e,o){for(var n,i=this.parse(e),r=t,s=function(t){var e=i[t];switch(console.log("locateNode111::: ItemName: ",e.name,"ItemSymbol::: ",e.symbol),e.symbol){case"/":console.log("locateNode::: ,ItemName: ",e.name),n=r.getChildByName(e.name);break;case",":n=r.parent.children.filter(function(t){return t.name==e.name})[e.index]}if(!n)return r=null,"break";r=n,console.log("In Loop::::: ",r)},c=0;c<i.length&&"break"!==s(c);c++);return console.log(" locateNode::Node::: ",r),r&&r.active&&o?o(null,r):o(e),r},o.prototype._focusToNode=function(t){this._mask._graphics.clear();var e=t.getBoundingBoxToWorld(),o=this.node.convertToNodeSpaceAR(e.origin);return e.x=o.x,e.y=o.y,this._mask._graphics.fillRect(e.x,e.y,e.width,e.height),e},o.prototype.fingerToNode=function(t,e){this._finger||e(),this._finger.active=!0,this._finger.stopAllActions();var o=this.node.convertToNodeSpaceAR(t.parent.convertToWorldSpaceAR(t.position));o.y-=160,this._finger.setPosition(o),e()},o.FINGER="movefinger",o.typeList=[n.FINGER],r([a(cc.Prefab)],o.prototype,"FINGER_PREFAB",void 0),n=r([c],o)}(cc.Component);o.GuideTaskMgr=p,cc._RF.pop()},{"../enum/Enums":"Enums",async:void 0}],GuideTask:[function(t,e,o){"use strict";cc._RF.push(e,"a4f296uOsBCoau1POJLaXqn","GuideTask"),Object.defineProperty(o,"__esModule",{value:!0}),o.task=void 0,o.task={name:"Task",debug:!0,steps:[{order:0,name:"GuideTask",command:{cmd:"movefinger",text:"Please select this cup",args:"game/GameView/bgColor/cupBg/cupMgr/layout_v/layout_h_0/cup_p",index:0},delayTime:.1,onStart:function(t){t()},onExcute:function(t){t()},onEnd:function(t){t()}},{order:1,name:"GuideBag",command:{cmd:"movefinger",text:"If you fill the same cup with water of the same color, you pass the level",args:"game/GameView/bgColor/cupBg/cupMgr/layout_v/layout_h_0/cup_p,cup_p",index:1},delayTime:.2,onStart:function(t){t()},onExcute:function(t){t()},onEnd:function(t){t()}}]},cc._RF.pop()},{}],Interface:[function(t,e,o){"use strict";cc._RF.push(e,"c617e36IrhJPoiy7JE4PJ9O","Interface"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],LevelItemView:[function(t,e,o){"use strict";cc._RF.push(e,"d98edtUJidBdqBX5mvxs9Em","LevelItemView");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,a=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.default=null,e.select=null,e.isOpen=null,e}return i(e,t),e.prototype.start=function(){},e.prototype.SetLevelIndex=function(t){this.label.string=t.toString()},e.prototype.SetLevelState=function(t){this.node.getComponent(cc.Sprite).spriteFrame=1==t?this.select:this.default},e.prototype.SetOpenState=function(t){this.isOpen.enabled=!t},r([a(cc.Label)],e.prototype,"label",void 0),r([a(cc.SpriteFrame)],e.prototype,"default",void 0),r([a(cc.SpriteFrame)],e.prototype,"select",void 0),r([a(cc.Sprite)],e.prototype,"isOpen",void 0),r([c],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],LevelView:[function(t,e,o){"use strict";cc._RF.push(e,"f1a14JxH+xDT46JBr7kMyOB","LevelView");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./BaseView"),c=t("../utils/Tools"),a=t("./LevelItemView"),l=t("../Global"),u=t("../enum/Enums"),h=cc._decorator,p=h.ccclass,d=h.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scrollView=null,e.content=null,e.levelItem=null,e}return i(e,t),e.prototype.init=function(){for(var t=[1,2],e=3;e<=420;e++)t.push(e);c.scrollFunc({list:t,spacing:30,row:5,scrollView:this.scrollView,content:this.content,receiveItemHeight:30,cb:this.setPreFab.bind(this)})},e.prototype.setPreFab=function(e,o){var n=this,i=o+1,r=cc.instantiate(this.levelItem),s=r.getComponent(a.default);s.SetLevelIndex(i),r.on("click",function(){i>l.Global.currentMaxLv||(l.Global.lv=i,cc.director.emit(u.events.LevelSelectChange),t.prototype.close.call(n),n.node.destroy())}),i>l.Global.currentMaxLv?s.SetOpenState(!1):(s.SetOpenState(!0),i==l.Global.lv?s.SetLevelState(!0):s.SetLevelState(!1)),r.parent=this.content},e.prototype.start=function(){this.init()},e.prototype.onCloseClick=function(){t.prototype.close.call(this),this.node.destroy()},r([d(cc.ScrollView)],e.prototype,"scrollView",void 0),r([d(cc.Node)],e.prototype,"content",void 0),r([d(cc.Prefab)],e.prototype,"levelItem",void 0),r([p],e)}(s.default);o.default=f,cc._RF.pop()},{"../Global":"Global","../enum/Enums":"Enums","../utils/Tools":"Tools","./BaseView":"BaseView","./LevelItemView":"LevelItemView"}],LoadCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"b4c8dowH5FE/5w1IPRr0ufz","LoadCtrl");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function s(t){try{a(n.next(t))}catch(e){r(e)}}function c(t){try{a(n.throw(t))}catch(e){r(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,c)}a((n=n.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var o,n,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return a([t,e])}}function a(r){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,n=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(c){r=[6,c],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Global"),l=t("../enum/Enums"),u=t("../manager/ResMgr"),h=cc._decorator,p=h.ccclass,d=h.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.load=null,e.loadingNode=null,e.isload=!0,e.once=!1,e}return i(e,t),e.prototype.closeLoad=function(){return s(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,u.default.ins.getUI(l.ui.MainView)];case 1:return t.sent().parent=this.node.parent,this.isload=!1,this.loadingNode.active=!1,this.node.destroy(),[2]}})})},e.prototype.update=function(){this.isload&&(this.load.progress=a.Global.LoadingRate,a.Global.LoadingRate>=.99&&!this.once&&(this.once=!0,this.closeLoad()))},r([d(cc.ProgressBar)],e.prototype,"load",void 0),r([d(cc.Node)],e.prototype,"loadingNode",void 0),r([p],e)}(cc.Component);o.default=f,cc._RF.pop()},{"../Global":"Global","../enum/Enums":"Enums","../manager/ResMgr":"ResMgr"}],MainView:[function(t,e,o){"use strict";cc._RF.push(e,"7a12ciUtJ5JVo+/8W5Q9aEg","MainView");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function s(t){try{a(n.next(t))}catch(e){r(e)}}function c(t){try{a(n.throw(t))}catch(e){r(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,c)}a((n=n.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var o,n,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return a([t,e])}}function a(r){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,n=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(c){r=[6,c],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./BaseView"),l=t("./GameView"),u=t("../manager/ResMgr"),h=t("../Global"),p=t("../enum/Enums"),d=cc._decorator,f=d.ccclass,y=d.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.content=null,e.lvLabel=null,e}var o;return i(e,t),o=e,e.prototype.onEnable=function(){cc.director.on(p.events.LevelSelectChange,this.eventLevelChange,this),cc.director.on(p.events.BackToMain,this.eventBackToMain,this)},e.prototype.onDisable=function(){cc.director.off(p.events.LevelSelectChange,this.eventLevelChange,this),cc.director.off(p.events.BackToMain,this.eventBackToMain,this)},e.prototype.start=function(){this.setLvLabel(),o.ins=this},e.prototype.setLvLabel=function(t){var e=t;null!=t&&0!=t||(e=h.Global.lv),this.lvLabel.string="<b><color=#FAFAFA><outline color=#000000 width=4>Level </outline></c><color=#FAFAFA><outline color=#000000 width=4>"+e+"</outline></c></b>"},e.prototype.onStartGameClick=function(){return s(this,void 0,void 0,function(){var t;return c(this,function(e){switch(e.label){case 0:return[4,u.default.ins.getUI(p.ui.GameView)];case 1:return(t=e.sent()).getComponent(l.default).init(),t.parent=this.node.parent,[2]}})})},e.prototype.onSettingClick=function(){return s(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,u.default.ins.getUI(p.ui.SettingView)];case 1:return t.sent().parent=this.node.parent,[2]}})})},e.prototype.onShopClick=function(){return s(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,u.default.ins.getUI(p.ui.ShopView)];case 1:return t.sent().parent=this.node.parent,[2]}})})},e.prototype.onLvClick=function(){return s(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,u.default.ins.getUI(p.ui.LevelView)];case 1:return t.sent().parent=this.node.parent,[2]}})})},e.prototype.eventLevelChange=function(){this.setLvLabel()},e.prototype.eventBackToMain=function(){this.setLvLabel()},e.ins=null,r([y(cc.Label)],e.prototype,"label",void 0),r([y(cc.Node)],e.prototype,"content",void 0),r([y(cc.RichText)],e.prototype,"lvLabel",void 0),o=r([f],e)}(a.default);o.default=g,cc._RF.pop()},{"../Global":"Global","../enum/Enums":"Enums","../manager/ResMgr":"ResMgr","./BaseView":"BaseView","./GameView":"GameView"}],Main:[function(t,e,o){"use strict";cc._RF.push(e,"76bc6IsaypCZIihqXEele4k","Main");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function s(t){try{a(n.next(t))}catch(e){r(e)}}function c(t){try{a(n.throw(t))}catch(e){r(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,c)}a((n=n.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var o,n,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return a([t,e])}}function a(r){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,n=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(c){r=[6,c],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./Global"),l=t("./enum/Enums"),u=t("./utils/Tools"),h=t("./manager/ResMgr"),p=cc._decorator,d=p.ccclass,f=p.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.maxLevel=999,e.currentLevel=5,e.Platforms=[],e.Shares=[],e.ShareVideoes=[],e}var o;return i(e,t),o=e,e.prototype.onLoad=function(){cc.debug.setDisplayStats(!1),this.loadData(),o.ins=this},e.prototype.start=function(){return s(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.loadRes()];case 1:return t.sent(),[2]}})})},e.prototype.loadRes=function(){return s(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return console.log("  Main.......LoadRes"),a.Global.LoadingRate=.04,[4,h.default.ins.loadBundle(1,.01)];case 1:return t.sent(),[4,h.default.ins.loadRes(1,l.Assets.Json,.03)];case 2:return t.sent(),[4,h.default.ins.loadRes(1,l.Assets.UiFrame,.1)];case 3:return t.sent(),[4,h.default.ins.loadRes(1,l.Assets.Sound,.2)];case 4:return t.sent(),[4,h.default.ins.loadRes(1,l.Assets.UiPrefab,.35)];case 5:return t.sent(),[4,h.default.ins.loadRes(1,l.Assets.CommonPrefab,.35)];case 6:return t.sent(),h.default.ins.getUI(l.ui.ToastView),[2]}})})},e.prototype.loadData=function(){a.Global.maxLv=this.maxLevel;var t=u.load(l.Key.Lv);t||(t=this.currentLevel||1),a.Global.setLv(t);var e=u.load(l.Key.CurMaxLevel);console.log(" LoadData.CurMaxLevel:::: ",e),e?a.Global.currentMaxLv=e:(e=t,a.Global.currentMaxLv=e,console.log(" Current Max Level::: ",t));var o=u.load(l.Key.ToolSetting,2);a.Global._toolSetting=o||a.Global._toolSetting;var n=u.load(l.Key.CupSetting,2);a.Global.cupSetting=n||a.Global._cupSetting;var i=u.load(l.Key.ReceiveList,2);a.Global.receiveList=i||a.Global._receiveList;var r=u.load(l.Key.CodeList,2);a.Global.codeList=r||a.Global._codeList;var s=u.load(l.Key.CoinCount);a.Global.currentCoin=s},e.ins=null,r([f({type:cc.Integer,tooltip:"Max Level"})],e.prototype,"maxLevel",void 0),r([f({type:cc.Integer,tooltip:"Current Level"})],e.prototype,"currentLevel",void 0),r([f({type:l.adConfig,tooltip:"Ad Config"})],e.prototype,"Platforms",void 0),r([f({type:l.shareConfig,tooltip:"Share Config"})],e.prototype,"Shares",void 0),r([f({type:l.shareVideoConfig,tooltip:"Share Video Config"})],e.prototype,"ShareVideoes",void 0),o=r([d],e)}(cc.Component);o.default=y,cc._RF.pop()},{"./Global":"Global","./enum/Enums":"Enums","./manager/ResMgr":"ResMgr","./utils/Tools":"Tools"}],Math:[function(t,e,o){"use strict";function n(t){for(;t>360;)t-=360;for(;t<-360;)t+=360;return t%360*Math.PI/180}cc._RF.push(e,"e6b58UKm01IBZaaoeLDHIFB","Math"),Object.defineProperty(o,"__esModule",{value:!0}),o.rotatePt=o.randomNum=o.radian2angle=void 0,o.radian2angle=function(t){return t/Math.PI*180},o.randomNum=function(t,e){switch(arguments.length){case 1:return parseInt(Math.random()*t+"");case 2:return parseInt(Math.random()*(e-t+1)+t+"");default:return 0}},o.rotatePt=function(t,e){var o=n(e),i=cc.v2();return i.x=t.x*Math.cos(o)-t.y*Math.sin(o),i.y=t.x*Math.sin(o)+t.y*Math.cos(o),i},cc._RF.pop()},{}],PoolMgr:[function(t,e,o){"use strict";cc._RF.push(e,"b9306dIq49BWp865ZnBWsam","PoolMgr"),Object.defineProperty(o,"__esModule",{value:!0}),o.PoolMgr=void 0;var n=function(){function t(){this._dictPool={},this._dictPrefab={}}return Object.defineProperty(t,"ins",{get:function(){return this._ins?this._ins:(this._ins=new t,this._ins)},enumerable:!1,configurable:!0}),t.prototype.copyNode=function(t,e){var o=t.name,n=null;if(this._dictPool.hasOwnProperty(o))n=(i=this._dictPool[o]).size()>0?i.get():cc.instantiate(t);else{var i=new cc.NodePool;this._dictPool[o]=i,n=cc.instantiate(t)}return e&&(n.parent=e,n.active=!0),n},t.prototype.getNode=function(t,e,o){var n,i,r;if("string"==typeof t?(n=this._dictPrefab[t],i=t):(n=t,i=t.data.name),this._dictPool.hasOwnProperty(i))if((s=this._dictPool[i]).size()>0)r=s.get();else{if(!n)return console.log("Pool invalid prefab name = ",i),null;r=cc.instantiate(n)}else{if(!n)return console.log("Pool invalid prefab name = ",i),null;var s=new cc.NodePool;this._dictPool[i]=s,r=cc.instantiate(n)}return e&&(r.parent=e,r.active=!0,o&&(r.position=o)),r},t.prototype.putNode=function(t,e){if(void 0===e&&(e=!1),t){var o=t.name,n=null;this._dictPool.hasOwnProperty(o)?n=this._dictPool[o]:(n=new cc.NodePool,this._dictPool[o]=n),n.put(t)}},t.prototype.clearPool=function(t){this._dictPool.hasOwnProperty(t)&&this._dictPool[t].clear()},t.prototype.setPrefab=function(t,e){this._dictPrefab[t]=e},t.prototype.getPrefab=function(t){return this._dictPrefab[t]},t}();o.PoolMgr=n,cc._RF.pop()},{}],PropBlockMgr:[function(t,e,o){"use strict";cc._RF.push(e,"aaa4cdODmNKgZEs8bxjVLgp","PropBlockMgr");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,a=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.labelShow=!0,e}return i(e,t),e.prototype.start=function(){this.labelShow||(this.label.node.active=!1),this.setLabelColor(new cc.Color(255,255,255)),this.setLabelFontSize(25)},e.prototype.setLabel=function(t){this.label.string=t},e.prototype.setLabelColor=function(t){this.label.node.color=t},e.prototype.setLabelFontSize=function(t){this.label.fontSize=t},r([a(cc.Label)],e.prototype,"label",void 0),r([a(cc.Boolean)],e.prototype,"labelShow",void 0),r([c],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],PropMgr:[function(t,e,o){"use strict";cc._RF.push(e,"554c0mzm+1PjK6tmvsRNfvT","PropMgr");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.PropState=void 0;var s,c=cc._decorator,a=c.ccclass,l=c.property;(function(t){t[t.Video=1]="Video",t[t.Share=2]="Share"})(s=o.PropState||(o.PropState={}));var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.videoNode=null,e.shareNode=null,e.numNode=null,e.num=0,e.state=s.Video,e}return i(e,t),e.prototype.setNum=function(t){this.num=t,this.showNodeByState()},e.prototype.showNodeByState=function(){this.num>0?(this.numNode.active=!0,this.numNode.getComponent(cc.Label).string=this.num.toString(),this.videoNode.active=!1,this.shareNode.active=!1):(this.numNode.active=!1,this.state==s.Video?(this.videoNode.active=!0,this.shareNode.active=!1):(this.videoNode.active=!1,this.shareNode.active=!0))},e.prototype.setState=function(t){this.state=t},e.prototype.start=function(){},r([l(cc.Node)],e.prototype,"videoNode",void 0),r([l(cc.Node)],e.prototype,"shareNode",void 0),r([l(cc.Node)],e.prototype,"numNode",void 0),r([a],e)}(cc.Component);o.default=u,cc._RF.pop()},{}],QQPlatform:[function(t,e,o){"use strict";cc._RF.push(e,"471b5ra1sBCW7AEh14gsEGD","QQPlatform");var n=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function s(t){try{a(n.next(t))}catch(e){r(e)}}function c(t){try{a(n.throw(t))}catch(e){r(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,c)}a((n=n.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var o,n,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return a([t,e])}}function a(r){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,n=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(c){r=[6,c],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.QQPlatform=void 0;var r=t("../manager/Main"),s=function(){function t(){this.qq=window.qq}return Object.defineProperty(t,"ins",{get:function(){return this._ins?this._ins:(this._ins=new t,this._ins.init(),this._ins)},enumerable:!1,configurable:!0}),t.prototype.init=function(){this.qq.showShareMenu({withShareTicket:!0,menus:["qq","qzone","wechatFriends","wechatMoment"]});var t=r.default.ins.Shares[0].sharePics;t.length>0&&this.qq.onShareAppMessage(function(){var e=Math.floor(Math.random()*t.length);return{title:t[e].shareText,imageUrl:t[e].shareLink}})},t.prototype.getLaunchOption=function(){return this.qq.getLaunchOptionsSync().query},t.prototype.getScene=function(){return this.qq.getLaunchOptionsSync().scene},t.prototype.showShare=function(t){if(void 0===t&&(t=""),r.default.ins.Shares[0]){var e=r.default.ins.Shares[0].sharePics;if(!(e.length<=0)){var o=Math.floor(Math.random()*e.length);CC_WECHATGAME&&this.qq.shareAppMessage({title:e[o].shareText,imageUrl:e[o].shareLink,query:t})}}},t.prototype.hideBanner=function(){null!=this.banner&&(this.banner.destroy(),this.banner=null)},t.prototype.showBanner=function(t){var e=this;if(void 0===t&&(t=2),CC_WECHATGAME){if(null!=this.banner)return this.banner.destroy(),void(this.banner=null);var o=r.default.ins.Platforms[2].bannerId[0],n=this.qq.getSystemInfoSync();console.log(o,"id");var i,s=this.qq.createBannerAd({adUnitId:o,adIntervals:30,style:{left:0,top:500,width:300}});i=1==t?n.windowWidth-s.style.realWidth:2==t?n.windowWidth/2-s.style.realWidth/2:0,s.onResize(function(){s.style.top=n.windowHeight-s.style.realHeight,s.style.left=i,s.show()}),s.onLoad(function(){console.log("banner \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),e.banner=s}),s.onError(function(t){console.log("banner \u5e7f\u544a\u52a0\u8f7d\u9519\u8bef",t)})}},t.prototype.showCustomAd=function(t){var e=this;if(CC_WECHATGAME){var o,n=r.default.ins.Platforms[2].customId[0],i=this.qq.getSystemInfoSync();if(o={width:i.screenWidth/1.5,left:(i.screenWidth-i.screenWidth/1.5)/.4-40,top:100,fixed:0},this.custom)this.custom.show();else{var s=this.qq.createBlockAd({adUnitId:n,orientation:"vertical",size:1,style:o});s.onLoad(function(){console.log("\u539f\u751f\u6a21\u677f \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),t(1),s.show().then(function(){return console.log("\u539f\u751f\u6a21\u677f \u5e7f\u544a\u663e\u793a\u6210\u529f")}).catch(function(e){console.log("\u539f\u751f\u6a21\u677f \u5e7f\u544a\u663e\u793a\u5931\u8d25",e),t(0)}),e.custom=s}),s.onError(function(e){console.log("\u539f\u751f\u6a21\u677fCustomAd \u5e7f\u544a\u52a0\u8f7d\u5931\u8d25\uff1a",e),t(0)})}}},t.prototype.hideCustomAd1=function(){this.custom1&&(this.custom1.hide(),this.custom1=null)},t.prototype.showCustomAd1=function(t){var e,o=this;if(CC_WECHATGAME)if(r.default.ins.Platforms[2].customId[0],this.qq.getSystemInfoSync(),e={width:128,left:64,top:300,fixed:0},this.custom1)this.custom1.show();else{var n=this.qq.createBlockAd({adUnitId:"\u539f\u751f\u4e94\u884c\u683c\u5b50\u5e7f\u544aid",orientation:"vertical",size:1,style:e});n.onLoad(function(){console.log("\u539f\u751f\u6a21\u677f \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),t(1),n.show().then(function(){return console.log("\u539f\u751f\u6a21\u677f \u5e7f\u544a\u663e\u793a\u6210\u529f")}).catch(function(e){console.log("\u539f\u751f\u6a21\u677f \u5e7f\u544a\u663e\u793a\u5931\u8d25",e),t(0)}),o.custom1=n}),n.onError(function(e){console.log("\u539f\u751f\u6a21\u677fCustomAd \u5e7f\u544a\u52a0\u8f7d\u5931\u8d25\uff1a",e),t(0)})}},t.prototype.showCustomAd3=function(t){return n(this,void 0,void 0,function(){var e,o,n,s=this;return i(this,function(){return CC_WECHATGAME?(e=r.default.ins.Platforms[2].customId[1],this.qq.getSystemInfoSync(),o={top:76,width:375,fixed:0},(n=this.qq.createBlockAd({adUnitId:e,orientation:"vertical",size:1,style:o})).onLoad(function(){console.log("\u539f\u751f\u6a21\u677f \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),t(1),n.show().then(function(){return console.log("\u539f\u751f\u6a21\u677f \u5e7f\u544a\u663e\u793a\u6210\u529f")}).catch(function(e){console.log("\u539f\u751f\u6a21\u677f \u5e7f\u544a\u663e\u793a\u5931\u8d25",e),t(0)}),s.custom3=n}),n.onError(function(e){console.log("\u539f\u751f\u6a21\u677fCustomAd \u5e7f\u544a\u52a0\u8f7d\u5931\u8d25\uff1a",e),t(0)}),[2]):[2]})})},t.prototype.hideCustomAd=function(){this.custom&&(this.custom=null)},t.prototype.showInterstitialAd=function(t){if(void 0===t&&(t=0),CC_WECHATGAME){var e=r.default.ins.Platforms[2].intersitialId[0],o=this.qq.createInterstitialAd({adUnitId:e});o&&(o.load().then(function(){console.log("\u63d2\u5c4f \u5e7f\u544a\u52a0\u8f7d\u6210\u529f")}),o.onClose(function(t){console.log("\u5173\u95ed\u63d2\u5c4f\u5e7f\u544a",t)}),o.onError(function(t){console.log("err:\u63d2\u5c4f\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25",t)}),setTimeout(function(){o.show().catch(function(t){console.log("\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u5931\u8d25",t)})},1e3*t))}},t.prototype.showRewardVideo=function(t){var e=this,o=r.default.ins.Platforms[2].videoId[0];null!=this.rewardVideo2&&this.rewardVideo2.offClose(s);var n=this.qq.createRewardedVideoAd({adUnitId:o});this.rewardVideo2=n,n.load().then(function(){e.qq.showToast({title:"\u52a0\u8f7d\u4e2d\uff0c\u8bf7\u7a0d\u540e",icon:"success",duration:1500,mask:!1,success:function(){},fail:function(){},complete:function(){}}),console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),n.show()});var i=!1;n.onError(function(o){console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u663e\u793a\u5931\u8d25",o),i||(i=!0,e.qq.showToast({title:"\u8bf7\u7a0d\u540e\u518d\u8bd5",icon:"fail",duration:1500,mask:!1,success:function(){},fail:function(){},complete:function(){}}),t(2))});var s=function(e){e&&e.isEnded?(console.log("res:  ",e),t(1),n.offClose(s)):(console.log("\u64ad\u653e\u4e2d\u9014\u9000\u51fa"),t(0))};n.onClose(s)},t}();o.QQPlatform=s,cc._RF.pop()},{"../manager/Main":void 0}],ResMgr:[function(t,e,o){"use strict";cc._RF.push(e,"ea555+Z+wJAP4xZ/cjfbSBs","ResMgr");var n=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function s(t){try{a(n.next(t))}catch(e){r(e)}}function c(t){try{a(n.throw(t))}catch(e){r(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,c)}a((n=n.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var o,n,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return a([t,e])}}function a(r){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,n=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(c){r=[6,c],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../Global"),s=t("../enum/Enums"),c=t("./PoolMgr"),a=function(){function t(){this._abBundleMap={},this._atlasMap={},this._spinMap=[],this._frameMap={},this._jsonAssetMap={},this._clipMap={},this._matMap={},this._loadStemp=null,this.loadTime=0,this._totalTime=0}return Object.defineProperty(t,"ins",{get:function(){return this._ins||(this._ins=new t),this._ins},enumerable:!1,configurable:!0}),t.prototype.printTimer=function(t,e){void 0===t&&(t=""),void 0===e&&(e=!1),this.loadTime=Date.now()-this._loadStemp,this._loadStemp=Date.now(),this._totalTime+=this.loadTime,console.log(t+"\uff0cload time===",this.loadTime,"ms"),e&&console.log("Load finish, total time===",this._totalTime,"ms")},t.prototype.loadBundle=function(t,e){return void 0===e&&(e=0),n(this,void 0,Promise,function(){var o,n,s=this;return i(this,function(){return this._loadStemp||(this._loadStemp=Date.now()),o=r.Global.LoadingRate,n="Bundle"+t,[2,new Promise(function(i){cc.assetManager.loadBundle(n,function(n,c){n?console.error("Bundle"+t+" load error, error==",n):(2!=t&&(s._abBundleMap[t]=c),s.printTimer("Bundle"+t+"__load success"),r.Global.LoadingRate=o+e,i&&i())})})]})})},t.prototype.loadRes=function(t,e,o){return void 0===o&&(o=0),n(this,void 0,Promise,function(){var n,a=this;return i(this,function(){return n=r.Global.LoadingRate,[2,new Promise(function(i){console.log(" loadRes~~~~~~~~ Type.Path:: ",e.path," Type.Type:: ",e.type),a._abBundleMap[t].loadDir(e.path,e.type,function(t,e){o>0&&(r.Global.LoadingRate=n+o*t/e)},function(o,n){var l;switch(o&&(console.error("Error===",o),i&&i()),e){case s.Assets.UiPrefab:for(var u=0;u<n.length;u++){var h=(l=n[u]).data.name;console.log(" resName == ",h),c.PoolMgr.ins.setPrefab(h,l),r.Global.Debug&&console.log("prefab name==",h)}break;case s.Assets.CommonPrefab:for(console.log(" CommonPrefab ================= assets.length:: ",n.length),u=0;u<n.length;u++)h=(l=n[u]).data.name,c.PoolMgr.ins.setPrefab(h,l),r.Global.Debug&&console.log("prefab name==",h);break;case s.Assets.Sound:for(u=0;u<n.length;u++)l=n[u],r.Global.Debug&&console.log("clip name==",l.name),a._clipMap[l.name]||(a._clipMap[l.name]=l);break;case s.Assets.UiFrame:for(u=0;u<n.length;u++)l=n[u],r.Global.Debug&&console.log("Frame name==",l.name),a._frameMap[l.name]||(a._frameMap[l.name]=l);break;case s.Assets.Json:for(u=0;u<n.length;u++)l=n[u],r.Global.Debug&&console.log("json name==",l.name),a._jsonAssetMap[l.name]||(a._jsonAssetMap[l.name]=l)}a.printTimer("Bundle"+t+"__"+e.path+"loaded success"),i&&i()})})]})})},t.prototype.loadBgm=function(){return n(this,void 0,Promise,function(){var t,e=this;return i(this,function(){return t=this,[2,new Promise(function(o){e._abBundleMap[5].load("bgm",function(e,n){e&&(console.error("Error info===",e),o&&o()),t._clipMap[n.name]||(t._clipMap[n.name]=n),o&&o()})})]})})},t.prototype.loadPrefab=function(t){return n(this,void 0,Promise,function(){var e=this;return i(this,function(){return r.Global.LoadingRate,console.log(" LoadPrefab:::: Path: ",t.path," Name: ",t.name),[2,new Promise(function(o){e._abBundleMap[t.bundle].load(t.path+t.name,function(e,n){e&&(console.log(" LoadError.....Name: ",t.name),console.error("Error info===",e),o&&o()),c.PoolMgr.ins.setPrefab(t.name,n),o&&o()})})]})})},t.prototype.getAtlas=function(t){return this._atlasMap[t]},t.prototype.getFrameMap=function(t){return this._frameMap[t]},t.prototype.getPrefab=function(t,e){return n(this,void 0,void 0,function(){return i(this,function(o){switch(o.label){case 0:return c.PoolMgr.ins.getPrefab(t.name)?[2,c.PoolMgr.ins.getNode(t.name,e)]:[4,this.loadPrefab(t)];case 1:return o.sent(),[2,c.PoolMgr.ins.getNode(t.name,e)]}})})},t.prototype.getJson=function(t){return this._jsonAssetMap[t]},t.prototype.getClip=function(t){return this._clipMap[t]},t.prototype.getMat=function(t){return this._matMap[t]},t.prototype.getSpin=function(t){return this._spinMap.find(function(e){return e.name==t})},t.prototype.getUI=function(t,e){return n(this,void 0,void 0,function(){var o;return i(this,function(n){switch(n.label){case 0:if(t.clear&&!e&&r.Global.layer[t.layer].children[0]){if(r.Global.layer[t.layer].children[0].name==t.name)return[2];c.PoolMgr.ins.putNode(r.Global.layer[t.layer].children[0])}return o=e||r.Global.layer[t.layer],[4,this.getPrefab(t,o)];case 1:return[2,n.sent()]}})})},t._ins=null,t}();o.default=a,cc._RF.pop()},{"../Global":"Global","../enum/Enums":"Enums","./PoolMgr":"PoolMgr"}],SettingView:[function(t,e,o){"use strict";cc._RF.push(e,"14034n8+wxG167GC8UZhqzK","SettingView");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.SpriteFrameState=void 0;var s=t("../Global"),c=t("../enum/Enums"),a=t("./BaseView"),l=cc._decorator,u=l.ccclass,h=l.property,p=function(){function t(){this.on=null,this.off=null}return r([h(cc.SpriteFrame)],t.prototype,"on",void 0),r([h(cc.SpriteFrame)],t.prototype,"off",void 0),r([u("SpriteFrameState")],t)}();o.SpriteFrameState=p;var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sound=null,e.soundSprite=null,e}return i(e,t),e.prototype.start=function(){this.checkSpriteFrame()},e.prototype.checkSpriteFrame=function(){1==s.Global.sound?this.soundSprite.spriteFrame=this.sound.on:this.soundSprite.spriteFrame=this.sound.off},e.prototype.changeSound=function(){s.Global.sound*=-1,this.checkSpriteFrame(),cc.director.emit(c.events.ChangeSound,"sound")},e.prototype.close=function(){t.prototype.close.call(this),this.node.destroy()},r([h(p)],e.prototype,"sound",void 0),r([h(cc.Sprite)],e.prototype,"soundSprite",void 0),r([u],e)}(a.default);o.default=d,cc._RF.pop()},{"../Global":"Global","../enum/Enums":"Enums","./BaseView":"BaseView"}],ShopItemView:[function(t,e,o){"use strict";cc._RF.push(e,"50996x6FWdCfZTXVbJba2jt","ShopItemView");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.ShopModalItemSpriteFrames=void 0;var s=cc._decorator,c=s.ccclass,a=s.property,l=function(){function t(){this.default=null,this.have=null,this.check=null}return r([a(cc.SpriteFrame)],t.prototype,"default",void 0),r([a(cc.SpriteFrame)],t.prototype,"have",void 0),r([a(cc.SpriteFrame)],t.prototype,"check",void 0),r([c("ShopModalItemSpriteFrames")],t)}();o.ShopModalItemSpriteFrames=l;var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.imgs=null,e}return i(e,t),e.prototype.checkState=function(t){switch(t){case"have":this.node.getComponent(cc.Sprite).spriteFrame=this.imgs.have;break;case"check":this.node.getComponent(cc.Sprite).spriteFrame=this.imgs.check}},r([a(l)],e.prototype,"imgs",void 0),r([c],e)}(cc.Component);o.default=u,cc._RF.pop()},{}],ShopView:[function(t,e,o){"use strict";cc._RF.push(e,"a36eed/FhtOyaiomX/lyfL6","ShopView");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function s(t){try{a(n.next(t))}catch(e){r(e)}}function c(t){try{a(n.throw(t))}catch(e){r(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,c)}a((n=n.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var o,n,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return a([t,e])}}function a(r){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,n=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(c){r=[6,c],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Global"),l=t("../enum/Enums"),u=t("../manager/SoundMgr"),h=t("../manager/CoinMgr"),p=t("../manager/ResMgr"),d=t("../utils/Tools"),f=t("./BaseView"),y=t("./GetCupView"),g=t("./ShopItemView"),v=cc._decorator,m=v.ccclass,_=v.property,b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cupsFrame=[],e.shopCardItem=null,e.scrollView=null,e.content=null,e.costCoinLabel=null,e.getCoinLabel=null,e.spacing=20,e.rowNum=2,e.shopItems=["01","02","03","04","05","06","07","08","09","10","11","12"],e}return i(e,t),e.prototype.init=function(t){d.scrollFunc({list:t,spacing:2*this.spacing,row:this.rowNum,scrollView:this.scrollView,content:this.content,receiveItemHeight:this.shopCardItem.data.height,cb:this.setPreFab.bind(this)})},e.prototype.setPreFab=function(t){var e,o,n,i=this;e=a.Global.cupSetting,o=a.Global.setCupCurrent,n=this.cupsFrame;var r=cc.instantiate(this.shopCardItem),s=r.getComponent(g.default),c=e.current,l=e.haveList;r.on("click",function(){l.includes(t)&&c!=t&&(o(t),i.init(i.shopItems))}),c==t?(s.checkState("check"),r.getChildByName("node").getComponent(cc.Sprite).spriteFrame=n[+t.replace("C","")-1],r.getChildByName("node").active=!0):l.includes(t)&&(s.checkState("have"),r.getChildByName("node").getComponent(cc.Sprite).spriteFrame=n[+t.replace("C","")-1],r.getChildByName("node").active=!0),r.parent=this.content},e.prototype.onLoad=function(){this.init(this.shopItems)},e.prototype.goBack=function(){t.prototype.close.call(this),this.node.destroy()},e.prototype.start=function(){this.setNeedCoinLabel(),this.setGetCoinLabel()},e.prototype.getNeedCoin=function(){a.Global.cupSetting.haveList.length;return 200},e.prototype.setNeedCoinLabel=function(){var t=this.getNeedCoin();this.costCoinLabel.string=t.toString()},e.prototype.setGetCoinLabel=function(){this.getCoinLabel.string=a.Global.watchAdReward.toString()},e.prototype.buyCupClick=function(){var t=this.getNeedCoin(),e=a.Global.getCurrentCoin(),o=a.Global.cupSetting.haveList.length;this.costCoinLabel.string=t.toString();var n=this.shopItems.length,i=(o+1).toString();if(o<9&&(i="0"+i),o>=n){var r="All cup is unlock.";cc.director.emit(l.events.Toast,r)}else e<t?(r="Need "+t+" coins.",cc.director.emit(l.events.Toast,r)):this.showGetItemView(i,t)},e.prototype.showGetItemView=function(t,e){return s(this,void 0,void 0,function(){var o,n,i;return c(this,function(r){switch(r.label){case 0:return u.SoundMgr.ins.playSound(l.Clips.modal,.5),[4,p.default.ins.getUI(l.ui.GetCupView)];case 1:return o=r.sent(),(n=o.getComponent(y.default)).setTitleImg(),i=this.cupsFrame[a.Global.cupSetting.haveList.length],n.setPropImg(i),o.parent=this.node,a.Global.setCupHavaList(t),this.init(this.shopItems),a.Global.subCoin(e),h.default.ins.setCoinLabel(),[2]}})})},r([_([cc.SpriteFrame])],e.prototype,"cupsFrame",void 0),r([_(cc.Prefab)],e.prototype,"shopCardItem",void 0),r([_(cc.ScrollView)],e.prototype,"scrollView",void 0),r([_(cc.Node)],e.prototype,"content",void 0),r([_(cc.Label)],e.prototype,"costCoinLabel",void 0),r([_(cc.Label)],e.prototype,"getCoinLabel",void 0),r([_(cc.Integer)],e.prototype,"spacing",void 0),r([_(cc.Integer)],e.prototype,"rowNum",void 0),r([m],e)}(f.default);o.default=b,cc._RF.pop()},{"../Global":"Global","../enum/Enums":"Enums","../manager/CoinMgr":"CoinMgr","../manager/ResMgr":"ResMgr","../manager/SoundMgr":"SoundMgr","../utils/Tools":"Tools","./BaseView":"BaseView","./GetCupView":"GetCupView","./ShopItemView":"ShopItemView"}],SoundMgr:[function(t,e,o){"use strict";cc._RF.push(e,"94af7xSM7tCtKbJaeG6PfRw","SoundMgr");var n=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function s(t){try{a(n.next(t))}catch(e){r(e)}}function c(t){try{a(n.throw(t))}catch(e){r(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,c)}a((n=n.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var o,n,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return a([t,e])}}function a(r){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,n=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(c){r=[6,c],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.SoundMgr=void 0;var r=t("../Global"),s=t("./ResMgr"),c=t("../enum/Enums"),a=function(){function t(){this._audioComp=null,this._curLoopAudioName=""}return Object.defineProperty(t,"ins",{get:function(){return this._ins||(this._ins=new t,this._ins.initAudio()),this._ins},enumerable:!1,configurable:!0}),t.prototype.initAudio=function(){this._audioComp=new cc.AudioSource,this._audioComp.loop=!0},t.prototype.stopSound=function(){this._audioComp.stop()},t.prototype.playSound=function(t,e){return void 0===e&&(e=1),n(this,void 0,void 0,function(){var o;return i(this,function(n){switch(n.label){case 0:return r.Global.sound==c.SoundStatus.off?[2]:(this._audioComp&&this.stopSound(),[4,s.default.ins.getClip(t)]);case 1:return o=n.sent(),cc.audioEngine.play(o,!1,e),[2]}})})},Object.defineProperty(t.prototype,"curLoopAudioName",{get:function(){return this._curLoopAudioName},enumerable:!1,configurable:!0}),t.prototype.playSoundAtTime=function(t,e){return n(this,void 0,void 0,function(){var o,n,a=this;return i(this,function(i){switch(i.label){case 0:return r.Global.sound==c.SoundStatus.off?[2]:[4,s.default.ins.getClip(t)];case 1:return o=i.sent(),n=cc.audioEngine.play(o,!1,1),this._audioComp.clip=o,this._audioComp.play(),this._audioComp.scheduleOnce(function(){cc.audioEngine.stop(n),a._audioComp.stop()},2*e),[2]}})})},t._ins=null,t}();o.SoundMgr=a,cc._RF.pop()},{"../Global":"Global","../enum/Enums":"Enums","./ResMgr":"ResMgr"}],ToastCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"f6ca7yTc+FBrr1t8pzVCsYH","ToastCtrl");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./enum/Enums"),c=cc._decorator,a=c.ccclass,l=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.text=null,e.toast=null,e._tw=new cc.Tween,e.time=1,e}return i(e,t),e.prototype.onEnable=function(){cc.director.on(s.events.Toast,this.showToast,this),this.toast.opacity=0,this._tw.target(this.toast),this._tw.set({opacity:0}).to(.6,{opacity:255}).delay(this.time).to(.25,{opacity:0})},e.prototype.onDisable=function(){cc.director.off(s.events.Toast,this.showToast,this)},e.prototype.showToast=function(t,e){void 0===e&&(e=2),this.time=e,this.text.string=t,this._tw.start()},r([l(cc.Label)],e.prototype,"text",void 0),r([l(cc.Node)],e.prototype,"toast",void 0),r([a],e)}(cc.Component);o.default=u,cc._RF.pop()},{"./enum/Enums":"Enums"}],Tools:[function(t,e,o){"use strict";function n(t){var e=document.createElement("div");return e.style.position="absolute",e.style.left="-10000px",e.style.top="-10000px",e.textContent=t,document.body.appendChild(e),e}function i(t){var e=document.createRange();e.selectNodeContents(t);var o=window.getSelection();o.removeAllRanges(),o.addRange(e)}cc._RF.push(e,"859c4IGX/ZFBq3OPUhXZN9I","Tools"),Object.defineProperty(o,"__esModule",{value:!0}),o.Tools=o.scrollFunc=o.getDate=o.load=o.save=void 0,o.save=function(t,e){"number"==typeof e&&(e=""+e),cc.sys.localStorage.setItem(t,e||"")},o.load=function(t,e){void 0===e&&(e=1);var o=cc.sys.localStorage.getItem(t);if(o){switch(e){case 0:break;case 1:o=Number(o);break;case 2:o=JSON.parse(o)}return o}return null},o.getDate=function(){var t=new Date;return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()},o.scrollFunc=function(t){var e=t.list,o=t.spacing,n=t.row,i=t.scrollView,r=t.content,s=t.receiveItemHeight,c=t.cb;r.removeAllChildren();var a=e.length;r.height=Math.ceil(a/n)*(s+o);for(var l=0;l<a;l++)c&&c(e[l],l,e);i.scrollToTop(0)};var r=function(){function t(){}return t.fadeIn=function(t,e){void 0===e&&(e=.2),cc.tween(t).set({scale:0}).to(e,{scale:1}).start()},t.copyToClipboard=function(t){var e=t;return new Promise(function(t,o){if(window.clipboardData)window.clipboardData.setData("Text",e);else{var r=n(e);i(r);try{t(document.execCommand("copy",!1,null))}catch(s){o(s)}document.body.removeChild(r)}})},t}();o.Tools=r,cc._RF.pop()},{}],VictoryView:[function(t,e,o){"use strict";cc._RF.push(e,"880b4jObvVCVJjx7VQ6E+4k","VictoryView");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./BaseView"),c=t("../Global"),a=t("../enum/Enums"),l=t("../base/Math"),u=t("../manager/CoinMgr"),h=cc._decorator,p=h.ccclass,d=h.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.curAwardLabel=null,e.curToolIcon=null,e.curToolLabel=null,e.curAwardCoin=null,e.curAwardTool=null,e.tubeFrame=null,e.fallbackFrame=null,e.coinReward=0,e.tubeReward=0,e.fallbackReward=0,e}return i(e,t),e.prototype.init=function(){this.coinReward=c.Global.rewardCoin,this.curAwardLabel.string="+"+this.coinReward.toString();var t=l.randomNum(1,100),e=l.randomNum(1,10);console.log(" RandomNumber1:: ",t," RandomNumber2: ",e),t>=50?(e>=5?(this.curToolIcon.spriteFrame=this.fallbackFrame,this.fallbackReward=1):(this.curToolIcon.spriteFrame=this.tubeFrame,this.tubeReward=1),this.curToolLabel.string="+1"):(this.curAwardCoin.position=new cc.Vec3(-50,0,0),this.curAwardTool.active=!1)},e.prototype.onNextLevelClick=function(){this.tubeReward>0&&(c.Global.addToolSetting("tube",1),cc.director.emit(a.events.AddTube)),this.fallbackReward>0&&(c.Global.addToolSetting("back",1),cc.director.emit(a.events.Back)),c.Global.addCoin(this.coinReward),u.default.ins.setCoinLabel(),this.loadNextLvel()},e.prototype.onMoreAwardClick=function(){this.coinReward=5*c.Global.rewardCoin,this.curAwardLabel.string="+"+this.coinReward.toString()},e.prototype.loadNextLvel=function(){t.prototype.close.call(this),this.node.destroy(),cc.director.emit(a.events.Start)},r([d(cc.Label)],e.prototype,"curAwardLabel",void 0),r([d(cc.Sprite)],e.prototype,"curToolIcon",void 0),r([d(cc.Label)],e.prototype,"curToolLabel",void 0),r([d(cc.Node)],e.prototype,"curAwardCoin",void 0),r([d(cc.Node)],e.prototype,"curAwardTool",void 0),r([d(cc.SpriteFrame)],e.prototype,"tubeFrame",void 0),r([d(cc.SpriteFrame)],e.prototype,"fallbackFrame",void 0),r([p],e)}(s.default);o.default=f,cc._RF.pop()},{"../Global":"Global","../base/Math":"Math","../enum/Enums":"Enums","../manager/CoinMgr":"CoinMgr","./BaseView":"BaseView"}],WaterFlow:[function(t,e,o){"use strict";cc._RF.push(e,"89a60u2p+5LCaWjYEQt3c4x","WaterFlow");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.WaterFlow=void 0;var r=t("../enum/Enums"),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._toPt=cc.v2(),e.from=cc.v2(),e}return i(e,t),e.prototype.onLoad=function(){this.lineWidth=r.dft_lingWidth,this.lineCap=cc.Graphics.LineCap.ROUND},Object.defineProperty(e.prototype,"toPt",{get:function(){return this._toPt},set:function(t){this._toPt=t,this.clear(),this.moveTo(this.from.x,this.from.y),this.lineTo(this._toPt.x,this._toPt.y),this.stroke()},enumerable:!1,configurable:!0}),e.prototype.playFlowAni=function(t,e,o,n,i){this.clear(),this.from=n?e:t,this.moveTo(this.from.x,this.from.y),cc.tween(this).set({toPt:t}).to(o,{toPt:e}).call(i).start()},e.prototype.setLineScale=function(t){this.lineWidth=r.dft_lingWidth*t},e}(cc.Graphics);o.WaterFlow=s,cc._RF.pop()},{"../enum/Enums":"Enums"}],Water:[function(t,e,o){"use strict";cc._RF.push(e,"607d01cGPpC1Y4XE+JkcAAc","Water");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../base/Math"),c=t("../enum/Enums"),a=cc._decorator,l=a.ccclass,u=a.property,h=(a.requireComponent,a.executeInEditMode),p=(a.disallowMultiple,a.executionOrder,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._ratio=1,e.effect=null,e._tiltAngle=0,e.material=null,e._action=c.PourAction.none,e.infos=[],e.stopIdx=-1,e.curIdx=0,e._actionHeight=0,e.eventState=!1,e.onInFInish=null,e.onOutStart=null,e.onOutFinish=null,e}return i(e,t),Object.defineProperty(e.prototype,"tiltAngle",{get:function(){return this._tiltAngle},set:function(t){t=Math.round(100*t)/100,this._tiltAngle=t,this.updateAngleHeight()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"actionHeight",{get:function(){return this._actionHeight},set:function(t){if(t>c.HEIGHT_FACTOR&&(t=c.HEIGHT_FACTOR),t<0)throw new Error("Water height can't less than zero");this._actionHeight=t},enumerable:!1,configurable:!0}),e.prototype.changeAction=function(t){console.log(" Water.ChangeAnction:: ",this.node.name),this._action=t},e.prototype.addInfo=function(t){console.log(" Water.AddInfo:: ",this.node.name," WaterInfo:: ",t);var e=this.actionHeight;this.actionHeight=t.height,t.height=0;var o=this.infos[this.curIdx];this._action===c.PourAction.in&&(this.actionHeight+=e-((null==o?void 0:o.height)||0)),this._action=c.PourAction.in,o&&o.colorId==t.colorId?this.actionHeight+=o.height:this.infos.push(t),this.curIdx=this.infos.length-1,this.initSizeColor()},e.prototype.onLoad=function(){var t=this.node.getComponent(cc.Sprite);t.spriteFrame&&(t.spriteFrame.getTexture().packable=!1),this.effect&&(this.material=cc.Material.create(this.effect),t.setMaterial(0,this.material)),this.material=t.getMaterial(0),this._ratio=this.node.height/this.node.width},e.prototype.initInfos=function(t){this.infos=this.waterHandle(t),this.curIdx=this.infos.length-1,this.initSizeColor(),this.updateAngleHeight()},e.prototype.waterHandle=function(t){for(var e=[],o=0;o<t.length;o++){var n=t[o];e[e.length-1]&&e[e.length-1].colorId==n.colorId?e[e.length-1].height+=n.height:e.push(n)}return e},e.prototype.initSizeColor=function(){for(var t=new Float32Array(c.MAX_ARR_LEN*c.BASIC_DATA.BYTE),e=0;e<this.infos.length;e++){var o=this.infos[e].color;t[e*c.BASIC_DATA.BYTE]=o.r/c.BASIC_DATA.color_range,t[e*c.BASIC_DATA.BYTE+c.BASIC_DATA.color_alpha2]=o.g/c.BASIC_DATA.color_range,t[e*c.BASIC_DATA.BYTE+c.BASIC_DATA.color_alpha3]=o.b/c.BASIC_DATA.color_range,t[e*c.BASIC_DATA.BYTE+c.BASIC_DATA.color_alpha4]=c.BASIC_DATA.color_alpha}this.material.setProperty("colors",t),this.material.setProperty("iResult",cc.v2(this.node.width,this.node.height)),this.material.setProperty("corrugationType",c.PourAction.none)},e.prototype.updateAngleHeight=function(){for(var t=new Float32Array(c.MAX_ARR_LEN*c.BASIC_DATA.BYTE),e=0;e<this.infos.length;e++)t[e*c.BASIC_DATA.BYTE]=this.infos[e].height;this.material.setProperty("heights",t),this.material.setProperty("tiltAngle",this._tiltAngle);var o=c.PourAction.none;this._action==c.PourAction.in?o=c.PourAction.in:this._action==c.PourAction.out&&(o=c.PourAction.out),this.material.setProperty("corrugationType",o)},e.prototype.upHeight=function(){if(this.isFull())return this.actionHeight=0,void(this._action=c.PourAction.none);if(!(this.curIdx<0)){var t=this.infos[this.curIdx];t.height+=c.ANGLE_FACTOR,t.height>=this.actionHeight&&(t.height=this.actionHeight,this.actionHeight=0,this._action=c.PourAction.none,this.onInFInish&&(this.onInFInish(),this.onInFInish=null)),this.isFull(),this.updateAngleHeight()}},e.prototype.downHeight=function(){if(this.stopIdx<0)this._action=c.PourAction.none;else{var t=this.infos[this.curIdx];(this.isAtBottleTop()||t.height<.05)&&(this.eventState=!0,this.onOutStart&&(this.onOutStart(),this.onOutStart=null),t.height-=c.ANGLE_FACTOR,this.actionHeight<0&&(this.actionHeight=0),t.height<=this.actionHeight&&(t.height=this.actionHeight,this.actionHeight<=0&&(this.infos.pop(),this.curIdx--,this.stopIdx=-1),this.eventState=!1,this.onOutFinish&&(this.onOutFinish(),this.onOutFinish=null),this._action=c.PourAction.none,this.actionHeight=0),this.updateAngleHeight())}},e.prototype.isFull=function(){return this.infos.reduce(function(t,e){return t+e.height},0)>=c.HEIGHT_FACTOR},e.prototype.isEmpty=function(){return 0==this.infos.length},e.prototype.getTopInfo=function(){return this.infos[this.curIdx]},e.prototype.getPourStartAngle=function(){console.log(" Water.GetPourStartAngle ",this.node.name);for(var t=0,e=0;e<=this.curIdx;e++)t+=this.infos[e].height;return this.getCriticalAngleWithHeight(t)},e.prototype.getPourEndAngle=function(){console.log(" Water.getPourEndAngle ",this.node.name),this.stopIdx=this.curIdx-this.getTopSameColorNum();for(var t=0,e=0;e<=this.stopIdx;e++)t+=this.infos[e].height;return this.getCriticalAngleWithHeight(t)},e.prototype.getCriticalAngleWithHeight=function(t){var e=0;if(0==t)return 90;if(t<.5){var o=this._ratio/(2*t);e=Math.atan(o)}else o=2*this._ratio*(1-t),e=Math.atan(o);return e=s.radian2angle(e),console.log(" Water.GetCriticalAngleWithHeight::: ",this.node.name," Angle: ",e),e},e.prototype.onStartPour=function(t){console.log(" Water.OnStartPour::: "),this._action=c.PourAction.out;var e=c.HEIGHT_FACTOR/c.SPLIT_COUNT;t&&(this.actionHeight=this.infos[this.curIdx].height-t*e),this.actionHeight<=0&&(this.actionHeight=0),this.stopIdx=this.curIdx-this.getTopSameColorNum(),this.stopIdx<0&&(this.stopIdx=0)},e.prototype.getTopSameColorNum=function(){for(var t=0,e=null,o=this.curIdx;o>=0;o--)if(null==e)t++,e=this.infos[o].colorId;else{if(this.infos[o].colorId!=e)break;t++}return t},e.prototype.isAtBottleTop=function(){for(var t=0,e=0;e<=this.curIdx;e++)t+=this.infos[e].height;var o=this.tiltAngle%360*Math.PI/180,n=Math.abs(Math.tan(o));if(t<.5)return n>this._ratio/(2*t);var i=1-t;return n>2*this._ratio*i},e.prototype.update=function(){this._action==c.PourAction.out?this.downHeight():this._action==c.PourAction.in&&this.upHeight()},e.prototype.setPourInCallback=function(t){this.onInFInish=t},e.prototype.setPourOutCallback=function(t,e){this.onOutStart=t,this.onOutFinish=e},r([u(cc.EffectAsset)],e.prototype,"effect",void 0),r([u],e.prototype,"_tiltAngle",void 0),r([u({tooltip:!1})],e.prototype,"tiltAngle",null),r([l,h],e)}(cc.Component));o.default=p,cc._RF.pop()},{"../base/Math":"Math","../enum/Enums":"Enums"}],WxPlatform:[function(t,e,o){"use strict";cc._RF.push(e,"53d6cQ5YNFKYL96X+NiCobr","WxPlatform");var n=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function s(t){try{a(n.next(t))}catch(e){r(e)}}function c(t){try{a(n.throw(t))}catch(e){r(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,c)}a((n=n.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var o,n,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return a([t,e])}}function a(r){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,n=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(c){r=[6,c],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.WxPlatform=void 0;var r=t("../manager/Main"),s=function(){function t(){this.wx=window.wx}return Object.defineProperty(t,"ins",{get:function(){return this._ins?this._ins:(this._ins=new t,this._ins.init(),this._ins)},enumerable:!1,configurable:!0}),t.prototype.init=function(){this.wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]}),this.initCustomAd1();var t=r.default.ins.Shares[0].sharePics;t.length>0&&(this.wx.onShareAppMessage(function(){var e=Math.floor(Math.random()*t.length);return{title:t[e].shareText,imageUrlId:t[e].shareId,imageUrl:t[e].shareLink}}),this.wx.onShareTimeline(function(){var e=Math.floor(Math.random()*t.length);return{title:t[e].shareText,imageUrl:t[e].shareLink,query:""}}))},t.prototype.getLaunchOption=function(){return this.wx.getLaunchOptionsSync().query},t.prototype.getScene=function(){return this.wx.getLaunchOptionsSync().scene},t.prototype.showShare=function(t){if(void 0===t&&(t=""),r.default.ins.Shares[0]){var e=r.default.ins.Shares[0].sharePics;if(!(e.length<=0)){var o=Math.floor(Math.random()*e.length);CC_WECHATGAME&&this.wx.shareAppMessage({title:e[o].shareText,imageUrlId:e[o].shareId,imageUrl:e[o].shareLink,query:t})}}},t.prototype.hideBanner=function(){null!=this.banner&&(this.banner.destroy(),this.banner=null)},t.prototype.showBanner=function(t){var e=this;void 0===t&&(t=2);var o=r.default.ins.Platforms[1].bannerId[0];if(CC_WECHATGAME&&o){if(null!=this.banner)return this.banner.destroy(),void(this.banner=null);var n=this.wx.getSystemInfoSync();console.log(o,"id");var i,s=this.wx.createBannerAd({adUnitId:o,adIntervals:30,style:{left:0,top:500,width:300}});i=1==t?n.windowWidth-s.style.realWidth:2==t?n.windowWidth/2-s.style.realWidth/2:0,s.onResize(function(){s.style.top=n.windowHeight-s.style.realHeight,s.style.left=i}),s.onLoad(function(){console.log("banner \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),e.banner=s}),s.onError(function(t){console.log("banner \u5e7f\u544a\u52a0\u8f7d\u9519\u8bef",t)}),s.show()}},t.prototype.showCustomAd=function(t){var e=this;this.timeId&&(clearTimeout(this.timeId),this.timeId=null);var o=r.default.ins.Platforms[1].customId[0];if(CC_WECHATGAME&&o){var n,i=this.wx.getSystemInfoSync();if(n={width:i.screenWidth/1.5,left:(i.screenWidth-i.screenWidth/1.5)/.4-15,top:100,fixed:0},this.custom)this.custom.show();else{var s=this.wx.createCustomAd({adUnitId:o,style:n});s.onLoad(function(){console.log("\u539f\u751f\u6a21\u677f \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),t(1),s.show().then(function(){return console.log("\u539f\u751f\u6a21\u677f \u5e7f\u544a\u663e\u793a\u6210\u529f")}).catch(function(o){e.custom=null,e.timeId=setTimeout(function(){return e.showCustomAd(t)},5e3),console.log("\u539f\u751f\u6a21\u677f \u5e7f\u544a\u663e\u793a\u5931\u8d25",o),t(0)}),e.custom=s}),s.onClose(function(o){e.custom=null,e.timeId=setTimeout(function(){return e.showCustomAd(t)},5e3),console.log("\u5173\u95ed\u539f\u751f\u6a21\u677f\u5e7f\u544a",o)}),s.onError(function(o){e.custom=null,e.timeId=setTimeout(function(){return e.showCustomAd(t)},5e3),console.log("\u539f\u751f\u6a21\u677fCustomAd \u5e7f\u544a\u52a0\u8f7d\u5931\u8d25\uff1a",o),t(0)})}}},t.prototype.hideCustomAd1=function(){this.custom1&&this.custom1.hide()},t.prototype.initCustomAd1=function(){var t=this,e=r.default.ins.Platforms[1].customId[1];if(CC_WECHATGAME&&e){var o,n=this.wx.getSystemInfoSync();o={width:.85*n.screenWidth,left:.08*n.screenWidth,top:105,fixed:0};var i=this.wx.createCustomAd({adUnitId:e,style:o});i.onLoad(function(){t.custom1=i}),i.onClose(function(t){console.log("\u5173\u95ed\u539f\u751f\u6a21\u677f\u5e7f\u544a",t)}),i.onError(function(t){console.log("\u539f\u751f\u6a21\u677fCustomAd \u5e7f\u544a\u52a0\u8f7d\u5931\u8d25\uff1a",t)})}},t.prototype.showCustomAd1=function(t){this.custom1&&this.custom1.show().then(function(){return t(1)}).catch(function(){return t(0)})},t.prototype.showCustomAd3=function(t){return n(this,void 0,void 0,function(){var e,o,n,s=this;return i(this,function(){return e=r.default.ins.Platforms[1].customId[0],CC_WECHATGAME&&e?(this.wx.getSystemInfoSync(),o={top:76,width:375,fixed:0},(n=this.wx.createCustomAd({adUnitId:e,style:o})).onLoad(function(){console.log("\u539f\u751f\u6a21\u677f \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),t(1),n.show().then(function(){return console.log("\u539f\u751f\u6a21\u677f \u5e7f\u544a\u663e\u793a\u6210\u529f")}).catch(function(e){console.log("\u539f\u751f\u6a21\u677f \u5e7f\u544a\u663e\u793a\u5931\u8d25",e),t(0)}),s.custom3=n}),n.onClose(function(t){console.log("\u5173\u95ed\u539f\u751f\u6a21\u677f\u5e7f\u544a",t)}),n.onError(function(e){console.log("\u539f\u751f\u6a21\u677fCustomAd \u5e7f\u544a\u52a0\u8f7d\u5931\u8d25\uff1a",e),t(0)}),[2]):[2]})})},t.prototype.hideCustomAd=function(){this.custom},t.prototype.showInterstitialAd=function(t){void 0===t&&(t=0);var e=r.default.ins.Platforms[1].intersitialId[0];if(CC_WECHATGAME&&e){var o=this.wx.createInterstitialAd({adUnitId:e});o&&(o.load().then(function(){console.log("\u63d2\u5c4f \u5e7f\u544a\u52a0\u8f7d\u6210\u529f")}),o.onClose(function(t){console.log("\u5173\u95ed\u63d2\u5c4f\u5e7f\u544a",t)}),o.onError(function(t){console.log("err:\u63d2\u5c4f\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25",t)}),setTimeout(function(){o.show().catch(function(t){console.log("\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u5931\u8d25",t)})},1e3*t))}},t.prototype.showRewardVideo=function(t){var e=this,o=r.default.ins.Platforms[1].videoId[0];null!=this.rewardVideo2&&this.rewardVideo2.offClose(s);var n=this.wx.createRewardedVideoAd({adUnitId:o});this.rewardVideo2=n,n.load().then(function(){e.wx.showToast({title:"\u52a0\u8f7d\u4e2d\uff0c\u8bf7\u7a0d\u540e",icon:"success",duration:1500,mask:!1,success:function(){},fail:function(){},complete:function(){}}),console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),n.show()});var i=!1;n.onError(function(o){console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u663e\u793a\u5931\u8d25",o),i||(i=!0,e.wx.showToast({title:"\u8bf7\u7a0d\u540e\u518d\u8bd5",icon:"fail",duration:1500,mask:!1,success:function(){},fail:function(){},complete:function(){}}),t(2))});var s=function(e){e&&e.isEnded?(console.log("res:  ",e),t(1),n.offClose(s)):(console.log("\u64ad\u653e\u4e2d\u9014\u9000\u51fa"),t(0))};n.onClose(s)},t}();o.WxPlatform=s,cc._RF.pop()},{"../manager/Main":void 0}]},{},["Global","Main","ToastCtrl","AdMgr","AndroidAD","DyPlatform","DyRecorderManager","QQPlatform","WxPlatform","Interface","Math","Enums","Cup","Water","WaterFlow","GuideFinger","GuideTask","GuideTaskMgr","LoadCtrl","CoinMgr","CupMgr","GameMgr","PoolMgr","PropBlockMgr","PropMgr","ResMgr","SoundMgr","Tools","BaseView","GameView","GetCupView","LevelItemView","LevelView","MainView","SettingView","ShopItemView","ShopView","VictoryView"]);