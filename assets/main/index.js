window.__require=function t(e,o,n){function r(a,c){if(!o[a]){if(!e[a]){var s=a.split("/");if(s=s[s.length-1],!e[s]){var u="function"==typeof __require&&__require;if(!c&&u)return u(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+a+"'")}a=s}var l=o[a]={exports:{}};e[a][0].call(l.exports,function(t){return r(e[a][1][t]||t)},l,l.exports,t,e,o,n)}return o[a].exports}for(var i="function"==typeof __require&&__require,a=0;a<n.length;a++)r(n[a]);return r}({AdMgr:[function(t,e,o){"use strict";cc._RF.push(e,"1e5df/DgoRAAJ3KjQ8JunDt","AdMgr"),Object.defineProperty(o,"__esModule",{value:!0}),o.AdMgr=void 0;var n=t("./crazySDK/CrazySDK"),r=function(){function t(){}return t.closeAd=function(){cc.sys.platform},t.showBanner=function(){cc.sys.platform},t.showInterstial=function(t){void 0===t&&(t=0),cc.sys.platform},t.showCustomAd=function(){cc.sys.platform},t.showCustomAd1=function(){cc.sys.platform},t.hideCustomAd1=function(){cc.sys.platform},t.showRewardVideo=function(t){void 0===t&&(t=null),console.log(" AdMgr.showRewardVideo.......... "),n.default.ad.requestAd("rewarded",{adError:function(t){console.log("Rewarded video error",t)},adStarted:function(){console.log("Rewarded video started")},adFinished:function(){console.log("Rewarded video finished")}})},t.shareFn=function(){},t.shareVideoFn=function(){},t.prototype.showCustomAd=function(){},t.bannerOn=!1,t.customOn=!1,t.customOn1=!1,t}();o.AdMgr=r,cc._RF.pop()},{"./crazySDK/CrazySDK":"CrazySDK"}],AndroidAD:[function(t,e,o){"use strict";cc._RF.push(e,"0dab2sI4NNNhYvkib9Bn4d0","AndroidAD"),Object.defineProperty(o,"__esModule",{value:!0}),o.AndroidAD=void 0;var n=t("../Main"),r=function(){function t(){}return Object.defineProperty(t,"ins",{get:function(){return this._ins||(this._ins=new t),this._ins},enumerable:!1,configurable:!0}),t.prototype.showRewardVideo=function(){var t=n.default.ins.Platforms[2].videoId[0];jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","jiaZaiJiLiShiPin","(Ljava/lang/String;)V",t)},t.prototype.showInterstitial=function(){var t=n.default.ins.Platforms[2].intersitialId[0];jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","jiaZaiChaPing","(Ljava/lang/String;)V",t,300,450)},t.prototype.showBanner=function(){var t=n.default.ins.Platforms[3].bannerId[0];jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","jiaZaiBanner","(Ljava/lang/String;)V",t,600,50)},t}();o.AndroidAD=r,cc._RF.pop()},{"../Main":"Main"}],BaseView:[function(t,e,o){"use strict";cc._RF.push(e,"fb67fEaisdFoqMmY6i2kNSB","BaseView");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../enum/Enums"),c=t("../manager/SoundMgr"),s=t("../manager/PoolMgr"),u=t("../utils/Tools"),l=cc._decorator,p=l.ccclass,h=l.property,f=cc.Button.prototype._onTouchEnded;cc.Button.prototype._onTouchEnded=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];f.apply(this,t),c.SoundMgr.ins.playSound(a.Clips.Button_Click,.5)};var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tweenView=!0,e.root=null,e.tweenTime=.25,e.playBtnClip=!0,e}return r(e,t),e.prototype.onDisable=function(){},e.prototype.onLoad=function(){},e.prototype.onEnable=function(){var t=this;this.playBtnClip&&c.SoundMgr.ins.playSound(a.Clips.Button_Click,.5),this.tweenView&&(this.root?u.Tools.fadeIn(this.root):(this.root=this.node,this.scheduleOnce(function(){u.Tools.fadeIn(t.root)})))},e.prototype.close=function(){this.playBtnClip&&c.SoundMgr.ins.playSound(a.Clips.Button_Click,.5),this.tweenView?this.root||(this.root=this.node):s.PoolMgr.ins.putNode(this.node)},i([h({})],e.prototype,"tweenView",void 0),i([h({type:cc.Node,visible:function(){return this.tweenView}})],e.prototype,"root",void 0),i([h({visible:function(){return this.tweenView}})],e.prototype,"tweenTime",void 0),i([h({})],e.prototype,"playBtnClip",void 0),i([p],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../enum/Enums":"Enums","../manager/PoolMgr":"PoolMgr","../manager/SoundMgr":"SoundMgr","../utils/Tools":"Tools"}],1:[function(t,e){var o,n,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function c(t){if(o===setTimeout)return setTimeout(t,0);if((o===i||!o)&&setTimeout)return o=setTimeout,setTimeout(t,0);try{return o(t,0)}catch(e){try{return o.call(null,t,0)}catch(e){return o.call(this,t,0)}}}function s(t){if(n===clearTimeout)return clearTimeout(t);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{return n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(function(){try{o="function"==typeof setTimeout?setTimeout:i}catch(t){o=i}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(t){n=a}})();var u,l=[],p=!1,h=-1;function f(){p&&u&&(p=!1,u.length?l=u.concat(l):h=-1,l.length&&d())}function d(){if(!p){var t=c(f);p=!0;for(var e=l.length;e;){for(u=l,l=[];++h<e;)u&&u[h].run();h=-1,e=l.length}u=null,p=!1,s(t)}}function y(t,e){this.fun=t,this.array=e}function v(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)e[o-1]=arguments[o];l.push(new y(t,e)),1!==l.length||p||c(d)},y.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=v,r.addListener=v,r.once=v,r.off=v,r.removeListener=v,r.removeAllListeners=v,r.emit=v,r.prependListener=v,r.prependOnceListener=v,r.listeners=function(){return[]},r.binding=function(){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},{}],CoinMgr:[function(t,e,o){"use strict";cc._RF.push(e,"94b6e1i2uxOzqLY2ErzBVGT","CoinMgr");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Global"),c=cc._decorator,s=c.ccclass,u=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.coinLabel=null,e}var o;return r(e,t),o=e,e.prototype.start=function(){console.log(" CoinMgr.Start............. "),o.ins=this,this.setCoinLabel()},e.prototype.setCoinLabel=function(){this.coinLabel.string=a.Global.getCurrentCoin().toString()},e.prototype.getLabelPosition=function(){return this.coinLabel.node.position},e.ins=null,i([u(cc.Label)],e.prototype,"coinLabel",void 0),o=i([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../Global":"Global"}],"CrazySDK.types":[function(t,e,o){"use strict";cc._RF.push(e,"b581fU4oyxMdp3d+3NdYqW4","CrazySDK.types");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.BannerError=o.DataError=o.UserError=o.AdError=o.GeneralError=void 0;var i=function(t,e){this.code=t,this.message=e};o.GeneralError=i;var a=function(t){function e(e,o){var n=t.call(this,e,o)||this;return n.code=e,n.message=o,n}return r(e,t),e}(i);o.AdError=a;var c=function(t){function e(e,o){var n=t.call(this,e,o)||this;return n.code=e,n.message=o,n}return r(e,t),e}(i);o.UserError=c;var s=function(t){function e(e,o){var n=t.call(this,e,o)||this;return n.code=e,n.message=o,n}return r(e,t),e}(i);o.DataError=s;var u=function(t){function e(e,o,n){var r=t.call(this,e,o)||this;return r.code=e,r.message=o,r.containerId=n,r}return r(e,t),e}(i);o.BannerError=u,cc._RF.pop()},{}],CrazySDK:[function(t,e,o){"use strict";cc._RF.push(e,"954943rZC9D25RCFh4kmaEB","CrazySDK");var n=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{s(n.next(t))}catch(e){i(e)}}function c(t){try{s(n.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}s((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return s([t,e])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},i=this&&this.__spreadArrays||function(){for(var t=0,e=0,o=arguments.length;e<o;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<o;e++)for(var i=arguments[e],a=0,c=i.length;a<c;a++,r++)n[r]=i[a];return n};Object.defineProperty(o,"__esModule",{value:!0});var a,c=function(){function t(){}return t.Log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];console.log.apply(console,i(["[CrazySDK]"],t))},t}();(function(t){t[t.UNINITIALIZED=0]="UNINITIALIZED",t[t.REQUESTED=1]="REQUESTED",t[t.INITIALIZED=2]="INITIALIZED"})(a||(a={}));var s=new(function(){function t(){this.initResolvers=[],this.initState=a.UNINITIALIZED,this._version="2.0.0"}return Object.defineProperty(t.prototype,"isSupportedPlatform",{get:function(){return this._isSupportedPlatform},enumerable:!1,configurable:!0}),t.prototype.ensureInitialized=function(){if(this.initState!==a.INITIALIZED)throw new Error("CrazySDK is not initialized yet. Please call CrazySDK.init() first.")},Object.defineProperty(t.prototype,"environment",{get:function(){return this.ensureInitialized(),this.sdk.environment},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isQaTool",{get:function(){return this.ensureInitialized(),this.sdk.isQaTool},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ad",{get:function(){return this.ensureInitialized(),this.sdk.ad},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"game",{get:function(){return this.ensureInitialized(),this.sdk.game},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"user",{get:function(){return this.ensureInitialized(),this.sdk.user},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this.ensureInitialized(),this.sdk.data},enumerable:!1,configurable:!0}),t.prototype.initInternal=function(){var t=this;if(this.initState===a.UNINITIALIZED){this.initState=a.REQUESTED;var e=document.createElement("script");e.src="https://sdk.crazygames.com/crazygames-sdk-v3.js",e.async=!0,e.onload=function(){return n(t,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return c.Log("JS SDK loaded"),this.sdk=window.CrazyGames.SDK,[4,this.sdk.init({wrapper:{engine:"cocos",sdkVersion:this._version}})];case 1:return t.sent(),this.initState=a.INITIALIZED,this.initResolvers.forEach(function(t){return t()}),this.initResolvers=[],[2]}})})},e.onerror=function(){return console.error("Failed to load CrazySDK JS. Please check your internet connection.")},document.head.appendChild(e)}},t.prototype.init=function(){var t=this;if(!this.isSupportedPlatform)throw new Error("CrazySDK is not enabled on this platform");return new Promise(function(e){t.initState===a.INITIALIZED?e():(t.initResolvers.push(e),t.initInternal())})},t}());o.default=s,cc._RF.pop()},{}],CupMgr:[function(t,e,o){"use strict";cc._RF.push(e,"89a06/Izi1Nqq2YBjp55jPJ","CupMgr");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},a=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{s(n.next(t))}catch(e){i(e)}}function c(t){try{s(n.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}s((n=n.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return s([t,e])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../Global"),u=t("../enum/Enums"),l=t("../game/Cup"),p=t("../game/WaterFlow"),h=t("./CoinMgr"),f=cc._decorator,d=f.ccclass,y=f.property,v=f.executeInEditMode,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cupPrefab=null,e.levelCfg=null,e._debugLevel=0,e._isPlaying=!1,e._waterFlow=null,e.selectedCup=null,e.layout_v=null,e._cups=[],e.curCfg=[],e}var o;return r(e,t),o=e,Object.defineProperty(e.prototype,"debugLevel",{get:function(){return this._debugLevel},set:function(t){this._debugLevel=t,s.Global.setLv(t),this.startGame()},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){var t=new cc.Node;t.parent=this.node,this._waterFlow=t.addComponent(p.WaterFlow),this.startGame()},e.prototype.onClickCup=function(t){console.log(" CupMgr.OnClickCup............ Cup\uff1a ",t.node.name),1!=t.getFinishState()?this.selectedCup?this.selectedCup==t?(this.doSelect(t,!1),this.selectedCup=null):this.checkPour(this.selectedCup,t)?this.startPour(this.selectedCup,t):(this.doSelect(this.selectedCup,!1),this.selectedCup=null):(this.selectedCup=t,this.doSelect(t,!0)):cc.director.emit(u.events.Toast,"Cup is Full")},e.prototype.doSelect=function(t,e){var o=t.orignPt.y+(e?t.node.height*u.AnimationTime.moveTime:0);cc.tween(t.node).stop(),cc.tween(t.node).to(u.AnimationTime.moveTime,{y:o}).start()},e.prototype.startPour=function(t,e){var o=this;console.log("  CupMgr.StartPour.........  ");var n=cc.v2(e.node.position),r=e.node.parent.convertToWorldSpaceAR(n),i=cc.view.getVisibleSize(),a=r.x>.5*i.width,c=JSON.parse(JSON.stringify(t.getTop())),s=Math.min(c.topColorNum,e.getTop().emptyNum),u=this.pourLiquid(t,e,{dstPt:n,dstGlobal:r,viewSize:i,isRight:a});n=u.dstPt,a=u.isRight,this.selectedCup=null,this._isPlaying=!0,t.moveToPour(n,a,s),t.setPourOutCallback(function(){return o.onPourStart(t,e,c)},function(){return o.onPourFinish(t,e,o._waterFlow)})},e.prototype.onPourFinish=function(t,e,o){var n=t.node.convertToWorldSpaceAR(cc.v2());n=o.node.parent.convertToNodeSpaceAR(n);var r=cc.v2(n.x,e.getWaterSurfacePosY(!0));(r=o.node.parent.convertToNodeSpaceAR(r)).x=n.x,o.playFlowAni(n,r,u.AnimationTime.moveTime,!0,function(){o.clear()}),t.setNormalAnchor();var i=t.orignPt;cc.tween(t.node).to(u.AnimationTime.moveTime,{x:i.x,y:i.y,angle:0},{easing:"sineOut"}).call(function(){t.node.zIndex=0,t.node.parent.zIndex=0}).start()},e.prototype.checkPour=function(t,e){var o=t.getTop(),n=o.topColorId,r=(o.topColorNum,e.getTop()),i=r.topColorId,a=r.emptyNum;return!(!n||i&&i!==n||!a)},e.prototype.createCupNode=function(t){var e=s.Global.cupSetting.current,o=cc.instantiate(this.cupPrefab),n=o.getComponent(l.default);return n.changeImg(+e-1),this.node.addChild(o),n.setCupInfo(t),console.log(" CreateCupNode:::: SetOnClick........ "),n.setOnClick(this.onClickCup.bind(this,n)),n},e.prototype.initCfg=function(){this.curCfg=[];var t=s.Global.lv;console.log(" CupMgr.initCfg::::::: ",t);for(var e=this.levelCfg.json[t-1],o=0;o<e.length;){var n={colorIds:[e[o],e[o+1]||0,e[o+2]||0,e[o+3]||0]};this.curCfg.push(n),o+=4}},e.prototype._createLayout=function(t,e,o){var n=new cc.Node(o);n.parent=e;var r=n.addComponent(cc.Layout);return r.type=t,r.resizeMode=cc.Layout.ResizeMode.CONTAINER,r},e.prototype.pourLiquid=function(t,e,o){var n=o.dstPt,r=o.dstGlobal,i=o.viewSize,a=o.isRight;return e.node.zIndex=0,e.node.parent.zIndex=0,t.node.zIndex=10,t.node.parent.zIndex=10,Math.abs(r.x-.5*i.width)<2&&(a=t.node.parent.convertToWorldSpaceAR(cc.v2(t.node.position)).x<.5*i.width),n.y+=30+.5*e.node.height,n.x=n.x+(a?-0:0),n=e.node.parent.convertToWorldSpaceAR(n),t.setPourAnchor(a),{dstPt:n=t.node.parent.convertToNodeSpaceAR(n),isRight:a}},e.prototype.onPourStart=function(t,e,o){var n=this;console.log(" CupMgr.onPourStart:::: SRC::: ",t,"  DST::: ",e);var r=this._waterFlow;r.setLineScale(this.layout_v.node.scale);var i=t.node.convertToWorldSpaceAR(cc.v2());i=r.node.parent.convertToNodeSpaceAR(i);var a=cc.v2(i.x,e.getWaterSurfacePosY());(a=r.node.parent.convertToNodeSpaceAR(a)).x=i.x,r.strokeColor=(new cc.Color).fromHEX(o.colorHex);var c=Math.min(o.topColorNum,e.getTop().emptyNum),s=function(){n._isPlaying=!1,n.onPourOneFinished(t,e,o.topColorId,c)};e.setStartAddWater(o.topColorId,c),r.playFlowAni(i,a,u.AnimationTime.moveTime,!1,function(){e.setPourInCallback(s),e.startAddWater(o.topColorId,c)})},e.prototype.onPourOneFinished=function(t,e,o,n){console.log(" CupMgr.OnPourOneFinished::: From: ",t," To: ",e);var r=this._cups.indexOf(t),i=this._cups.indexOf(e);s.Global.action_list.length==s.Global.action_step&&s.Global.action_list.shift(),s.Global.action_list.push({from:r,to:i,colorId:o,num:n}),this.checkIsAllFinished()?cc.director.emit(u.events.LevelFinish):cc.director.emit(u.events.Pour)},e.prototype.checkIsAllFinished=function(){console.log("Check  Is  All  Finished \u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026",this._cups);for(var t=0,e=this._cups;t<e.length;t++)if(!e[t].checkFinishImpDontChangeState())return!1;return!0},e.prototype.createCups=function(){return a(this,void 0,void 0,function(){var t,e,o,n,r,i,a,s,l,p,h,f,d;return c(this,function(){if(this.layout_v&&this.layout_v.node.destroyAllChildren(),this._cups=[],0==(t=this.curCfg.length))return[2];for(i=0;i<t;i++)e=this.curCfg[i],(d=this.createCupNode(e)).setCupIndex(i),this._cups.push(d);for(this.layout_v||(this.layout_v=this._createLayout(cc.Layout.Type.VERTICAL,this.node,"layout_v"),this.layout_v.node.zIndex=1),o=[],n=this.createCupIndexGroups(t),console.log(" CupMgr.CreateCups::::::::::::: ",n),r=1,i=0;i<n.length;i++)a=n[i],r=a.length,p=this.createCupLayout(n,this._cups[0].node.getContentSize(),r,u.spacesArr,i),o.push(p);for(this.layout_v.enabled=!0,this.layout_v.node.scale=u.spacesArr[r][1],this.layout_v.spacingY=u.spacesArr[r][2]||40,s=0,l=o;s<l.length;s++)(p=l[s]).updateLayout(),p.enabled=!1;for(this.layout_v.updateLayout(),this.layout_v.enabled=!1,h=0,f=this._cups;h<f.length;h++)(d=f[h]).setOrignPt(d.node.position);return[2]})})},e.prototype.createCupIndexGroups=function(t){var e=[];if(t<=4){for(var o=[],n=0;n<this._cups.length;n++)o.push(n);e.push(o)}else if(t<=15){o=[],n=0;for(var r=t/2;n<r;n++)o.push(n);for(e.push(o),o=[];n<t;n++)o.push(n);e.push(o),o=[]}return e},e.prototype.createCupLayout=function(t,e,o,n,r){void 0===r&&(r=0);var i=this._createLayout(cc.Layout.Type.HORIZONTAL,this.layout_v.node,"layout_h_"+r);i.node.height=e.height,console.log("  createCupLayout.Size::::  MaxNum ",o," \u95f4\u9694Value:  ",n[o][0]),i.spacingX=n[o][0],i.node.scale=1,i.spacingY=n[o][2]||40;for(var a=t[r],c=0;c<a.length;c++){var s=a[c];this._cups[s].node.parent=i.node}return i},e.prototype.start=function(){o.ins=this,cc.director.on(u.events.Reset,this.resetLv,this),cc.director.on(u.events.Back,this.undoAction,this),cc.director.on(u.events.Start,this.startGame,this),cc.director.on(u.events.AddTube,this.addcup,this)},e.prototype.onDisable=function(){cc.director.off(u.events.Reset,this.resetLv,this),cc.director.off(u.events.Back,this.undoAction,this),cc.director.off(u.events.Start,this.startGame,this),cc.director.off(u.events.AddTube,this.addcup,this)},e.prototype.resetLv=function(){s.Global.action_list=[],this.startGame()},e.prototype.startGame=function(){s.Global.action_list=[],this._isPlaying||(this.initCfg(),this.createCups(),1===s.Global.lv&&(console.log(" startGame........... LV:: ",s.Global.lv),setTimeout(function(){cc.systemEvent.emit(u.events.ExcuteGuideTask,{taskFlie:"GuideTask",stepIndex:0})},300)))},e.prototype.undoAction=function(t){return a(this,void 0,void 0,function(){var e,o,n,r,i,a,u,l,p;return c(this,function(){return this.checkCanUndo()?t&&!t()?[2,!1]:null==(e=s.Global.action_list.pop())?[2,!1]:(o=e.from,n=e.to,r=e.num,i=e.colorId,a=this._cups[n],u=this._cups[o],l=a.checkFinishImp(!1),p=u.checkFinishImp(!1),1==l&&(a.resetCheckFinishedState(),s.Global.subCoin(s.Global.tubeRewardCoin),h.default.ins.setCoinLabel()),1==p&&(u.resetCheckFinishedState(),s.Global.subCoin(s.Global.tubeRewardCoin),h.default.ins.setCoinLabel()),a.isPouring()||u.isPouring()?[2,!1]:(a.removeTopWaterImmediately(r),u.addWaterImmediately(i,r),[2,!0])):[2]})})},e.prototype.addcup=function(){this.checkCanAddTube()&&(this.selectedCup&&(this.doSelect(this.selectedCup,!1),this.selectedCup=null),this._waterFlow.clear(),this.curCfg.push({colorIds:[0,0,0,0]}),this.createCups())},e.prototype.checkCanUndo=function(){return!this._isPlaying&&s.Global.action_list.length>0},e.prototype.checkCanAddTube=function(){return!this._isPlaying&&this.curCfg.length<s.Global.maxTube},e.ins=null,i([y(cc.Prefab)],e.prototype,"cupPrefab",void 0),i([y(cc.JsonAsset)],e.prototype,"levelCfg",void 0),i([y],e.prototype,"_debugLevel",void 0),i([y({tooltip:!1})],e.prototype,"debugLevel",null),o=i([d,v],e)}(cc.Component);o.default=g,cc._RF.pop()},{"../Global":"Global","../enum/Enums":"Enums","../game/Cup":"Cup","../game/WaterFlow":"WaterFlow","./CoinMgr":"CoinMgr"}],Cup:[function(t,e,o){"use strict";cc._RF.push(e,"72491RYDJhHaIEzhn1QrUBe","Cup");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.CupImgs=void 0;var a=t("../base/Math"),c=t("../enum/Enums"),s=t("../manager/SoundMgr"),u=t("../view/GameView"),l=t("./Water"),p=cc._decorator,h=p.ccclass,f=p.property,d=p.executeInEditMode,y=function(){function t(){this.tub=null,this.mask=null}return i([f(cc.SpriteFrame)],t.prototype,"tub",void 0),i([f(cc.SpriteFrame)],t.prototype,"mask",void 0),i([h("CupImgs")],t)}();o.CupImgs=y;var v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.water=null,e.info=null,e._finishState=!1,e._cupIndex=0,e.tubeNode=null,e.maskNode=null,e.finishMaskNode=null,e.cupImgs=[],e._colors=[],e._default_color="",e.tween=null,e._orignPt=null,e._upInfo=null,e.onClick=null,e}return r(e,t),e.prototype.changeImg=function(t){this.tubeNode.spriteFrame=this.cupImgs[t].tub,this.maskNode.spriteFrame=this.cupImgs[t].mask,this.finishMaskNode.spriteFrame=this.cupImgs[t].mask,this.finishMaskNode.enabled=!1},e.prototype.setWaterColor=function(t,e){void 0===t&&(t=c.WaterColors),void 0===e&&(e=c.defaultColor),this._colors=t,this._default_color=e},e.prototype.onLoad=function(){this.setWaterColor(),this._finishState=!1},e.prototype.getCupIndex=function(){return this._cupIndex},e.prototype.setCupIndex=function(t){this._cupIndex=t},e.prototype.initWater=function(){for(var t=this,e=this.info,o=[],n=c.SPLIT_COUNT-1;n>=0;n--){var r=e.colorIds[n];if(0!=r){var i=o[o.length-1];i&&i==r?i.height+=1/c.SPLIT_COUNT:o.push({height:1/c.SPLIT_COUNT,colorId:r})}}o.forEach(function(e){var o=t._colors[e.colorId]||t._default_color;e.color=(new cc.Color).fromHEX(o),e.height*=c.HEIGHT_FACTOR}),this.water.initInfos(o)},e.prototype.setCupInfo=function(t){this.info=t,this.initWater()},e.prototype.update=function(){this.water.tiltAngle!=this.node.angle&&(this.water.tiltAngle=this.node.angle)},e.prototype.getFinishState=function(){return this._finishState},e.prototype.checkIsFinshed=function(t){return 1==this._finishState?this._finishState:this.checkFinishImp(t)},e.prototype.checkFinishImp=function(t){for(var e=!1,o=this.info.colorIds,n=o[0],r=0,i=0;i<c.SPLIT_COUNT&&n==o[i];i++)r++;return r==c.SPLIT_COUNT&&0!=n&&(e=!0),console.log(" Check is finish. SplitCount:::: ",r," CupIndex: ",this._cupIndex," FinishState: ",e," TmpId: ",n),0==this._finishState&&1==e&&(t&&u.default.ins.playCoinAnimation(this.node),this.finishMaskNode.enabled=!0,this._finishState=!0),e},e.prototype.checkFinishImpDontChangeState=function(){for(var t=!1,e=this.info.colorIds,o=e[0],n=0,r=0;r<c.SPLIT_COUNT&&o==e[r];r++)n++;return n==c.SPLIT_COUNT&&(t=!0),t},e.prototype.resetCheckFinishedState=function(){this._finishState=!1,this.finishMaskNode.enabled=!1},e.prototype.setStartAddWater=function(t,e){for(var o=0,n=c.SPLIT_COUNT-1;n>=0&&(0!=this.info.colorIds[n]||(this.info.colorIds[n]=t,++o!=e));n--);},e.prototype.startAddWater=function(t,e){var o=this._colors[t]||this._default_color;this.water.addInfo({colorId:t,height:e/c.SPLIT_COUNT*c.HEIGHT_FACTOR,color:(new cc.Color).fromHEX(o)}),s.SoundMgr.ins.playSoundAtTime(c.Clips.pourWater,e/c.SPLIT_COUNT)},Object.defineProperty(e.prototype,"orignPt",{get:function(){return this._orignPt},enumerable:!1,configurable:!0}),e.prototype.setOrignPt=function(t){this._orignPt=t},e.prototype.setPourAnchor=function(t){var e=cc.v2(3,2);e.x=t?this.node.width-e.x:e.x,e.y=this.node.height-e.y,e.x=e.x/this.node.width,e.y=e.y/this.node.height,this.setAnchor(e)},e.prototype.setAnchor=function(t){var e=this.node.getAnchorPoint(),o=this.node.getPosition(),n=this.water.node.getPosition();this.node.setAnchorPoint(t);var r=cc.v2(t.x-e.x,t.y-e.y),i=cc.v2(r.x*this.node.width,r.y*this.node.height);i=a.rotatePt(i,this.node.angle),o.x+=i.x,o.y+=i.y,this.node.setPosition(o),n.x-=r.x*this.node.width,n.y-=r.y*this.node.height,this.water.node.setPosition(n)},e.prototype.moveToPour=function(t,e,o){var n=this,r=this.water.getPourStartAngle(),i=this.water.getPourEndAngle();this.water.onStartPour(o),e&&(r*=-1,i*=-1);var a=c.AnimationTime.moveTime,s=c.AnimationTime.pourTime;this.tween=cc.tween(this.node).set({angle:0}).to(a,{x:t.x,y:t.y,angle:r}).to(s,{angle:i}).call(function(){n.tween=null}).start(),this.pourSameColor(o)},e.prototype.backToInitPos=function(){var t=this;this.tween&&(this.tween.stop(),this.tween=null),this.tween=cc.tween(this.node).to(c.AnimationTime.moveTime,{position:this._orignPt,angle:0}).call(function(){t.tween=null}).start()},Object.defineProperty(e.prototype,"upCupInfo",{get:function(){return this._upInfo},enumerable:!1,configurable:!0}),e.prototype.pourSameColor=function(t){var e=0,o=this.getTop(),n=this.info.colorIds;this._upInfo=JSON.parse(JSON.stringify(o));for(var r=0;r<c.SPLIT_COUNT;r++){var i=n[r];if(0!=i){if(o.topColorId!=i)break;if(e++==t)break;n[r]=0}}},e.prototype.getTop=function(){for(var t=this.info.colorIds,e=0,o=0,n=0,r=0;r<c.SPLIT_COUNT;r++)if(0!=t[r]){if(0!=o&&o!=t[r])break;o=t[r],n++}else e++;return{emptyNum:e,topColorId:o,topColorNum:n,colorHex:this._colors[o]||this._default_color}},e.prototype.getBottleMouthCenter=function(){return{x:this.node.x,y:this.node.y+this.node.width/2}},e.prototype.setOnClick=function(t){this.onClick=t},e.prototype.changeCheckedState=function(){this.isPouring()||this.onClick&&this.onClick(this)},e.prototype.isPouring=function(){return Math.abs(this.node.angle)>1},e.prototype.getWaterSurfacePosY=function(t){void 0===t&&(t=!1);var e=this.getTop(),o=(c.SPLIT_COUNT-e.emptyNum)/c.SPLIT_COUNT;o<.02?o=.02:t&&(o-=1/c.SPLIT_COUNT*c.HEIGHT_FACTOR),o*=c.HEIGHT_FACTOR,o-=.5;var n=cc.v2(0,this.water.node.height*o);return(n=this.water.node.convertToWorldSpaceAR(n)).y},e.prototype.setPourInCallback=function(t){var e=this;console.log(" SetPourInCallBack  Cup Index: ",this._cupIndex),this.water.setPourInCallback(function(){e._upInfo=null;var o=e.checkIsFinshed(!0);t&&t(e,o),o&&(console.log(" Cup.SetPourInCallBack.Finished.... "),s.SoundMgr.ins.playSound(c.Clips.ContainerFinish,.3))}.bind(this))},e.prototype.setPourOutCallback=function(t,e){console.log(" setPourOutCallback  Cup Index: ",this.node.name),this.water.setPourOutCallback(function(){t&&t(this)}.bind(this),function(){this.tween&&(this.tween.stop(),this.tween=null),e&&e(this)}.bind(this))},e.prototype.setNormalAnchor=function(){this.setAnchor(cc.v2(.5,.5))},e.prototype.addWaterImmediately=function(t,e){for(var o=0,n=c.SPLIT_COUNT-1;n>=0&&(0!=this.info.colorIds[n]||(this.info.colorIds[n]=t,++o!=e));n--);this.initWater()},e.prototype.removeTopWaterImmediately=function(t){console.log(" removeTopWaterImmediately \u676f\u5b50: ",this.node.name);for(var e=0,o=this.getTop(),n=this.info.colorIds,r=0;r<c.SPLIT_COUNT;r++){var i=n[r];if(0!=i){if(o.topColorId!=i)break;if(n[r]=0,++e>=t)break}}return this.initWater(),o},i([f(l.default)],e.prototype,"water",void 0),i([f(cc.Sprite)],e.prototype,"tubeNode",void 0),i([f(cc.Sprite)],e.prototype,"maskNode",void 0),i([f(cc.Sprite)],e.prototype,"finishMaskNode",void 0),i([f([y])],e.prototype,"cupImgs",void 0),i([h,d],e)}(cc.Component);o.default=v,cc._RF.pop()},{"../base/Math":"Math","../enum/Enums":"Enums","../manager/SoundMgr":"SoundMgr","../view/GameView":"GameView","./Water":"Water"}],2:[function(t,e,o){(function(t){var n;n=function(e){"use strict";function o(t,...e){return(...o)=>t(...e,...o)}function n(t){return function(...e){var o=e.pop();return t.call(this,e,o)}}var r="function"==typeof queueMicrotask&&queueMicrotask,i="function"==typeof setImmediate&&setImmediate,a="object"==typeof t&&"function"==typeof t.nextTick;function c(t){setTimeout(t,0)}function s(t){return(e,...o)=>t(()=>e(...o))}var u=s(r?queueMicrotask:i?setImmediate:a?t.nextTick:c);function l(t){return f(t)?function(...e){const o=e.pop();return p(t.apply(this,e),o)}:n(function(e,o){var n;try{n=t.apply(this,e)}catch(r){return o(r)}if(n&&"function"==typeof n.then)return p(n,o);o(null,n)})}function p(t,e){return t.then(t=>{h(e,null,t)},t=>{h(e,t&&t.message?t:new Error(t))})}function h(t,e,o){try{t(e,o)}catch(n){u(t=>{throw t},n)}}function f(t){return"AsyncFunction"===t[Symbol.toStringTag]}function d(t){return"AsyncGenerator"===t[Symbol.toStringTag]}function y(t){return"function"==typeof t[Symbol.asyncIterator]}function v(t){if("function"!=typeof t)throw new Error("expected a function");return f(t)?l(t):t}function g(t,e=t.length){if(!e)throw new Error("arity is undefined");return function(...o){return"function"==typeof o[e-1]?t.apply(this,o):new Promise((n,r)=>{o[e-1]=(t,...e)=>{if(t)return r(t);n(e.length>1?e:e[0])},t.apply(this,o)})}}function m(t){return function(e,...o){return g(function(n){var r=this;return t(e,(t,e)=>{v(t).apply(r,o.concat(e))},n)})}}function _(t,e,o,n){e=e||[];var r=[],i=0,a=v(o);return t(e,(t,e,o)=>{var n=i++;a(t,(t,e)=>{r[n]=e,o(t)})},t=>{n(t,r)})}function b(t){return t&&"number"==typeof t.length&&t.length>=0&&t.length%1==0}const w={};function S(t){function e(...e){if(null!==t){var o=t;t=null,o.apply(this,e)}}return Object.assign(e,t),e}function C(t){return t[Symbol.iterator]&&t[Symbol.iterator]()}function P(t){var e=-1,o=t.length;return function(){return++e<o?{value:t[e],key:e}:null}}function T(t){var e=-1;return function(){var o=t.next();return o.done?null:(e++,{value:o.value,key:e})}}function O(t){if(b(t))return P(t);var e,o,n,r,i=C(t);return i?T(i):(o=(e=t)?Object.keys(e):[],n=-1,r=o.length,function t(){var i=o[++n];return"__proto__"===i?t():n<r?{value:e[i],key:i}:null})}function A(t){return function(...e){if(null===t)throw new Error("Callback was already called.");var o=t;t=null,o.apply(this,e)}}function L(t,e,o,n){let r=!1,i=!1,a=!1,c=0,s=0;function u(){c>=e||a||r||(a=!0,t.next().then(({value:t,done:e})=>{if(!i&&!r){if(a=!1,e)return r=!0,void(c<=0&&n(null));c++,o(t,s,l),s++,u()}}).catch(p))}function l(t,e){if(c-=1,!i)return t?p(t):!1===t?(r=!0,void(i=!0)):e===w||r&&c<=0?(r=!0,n(null)):void u()}function p(t){i||(a=!1,r=!0,n(t))}u()}var I=t=>(e,o,n)=>{if(n=S(n),t<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!e)return n(null);if(d(e))return L(e,t,o,n);if(y(e))return L(e[Symbol.asyncIterator](),t,o,n);var r=O(e),i=!1,a=!1,c=0,s=!1;function u(t,e){if(!a)if(c-=1,t)i=!0,n(t);else if(!1===t)i=!0,a=!0;else{if(e===w||i&&c<=0)return i=!0,n(null);s||l()}}function l(){for(s=!0;c<t&&!i;){var e=r();if(null===e)return i=!0,void(c<=0&&n(null));c+=1,o(e.value,e.key,A(u))}s=!1}l()},M=g(function(t,e,o,n){return I(e)(t,v(o),n)},4);function R(t,e,o){o=S(o);var n=0,r=0,{length:i}=t,a=!1;function c(t,e){!1===t&&(a=!0),!0!==a&&(t?o(t):++r!==i&&e!==w||o(null))}for(0===i&&o(null);n<i;n++)e(t[n],n,A(c))}function k(t,e,o){return M(t,1/0,e,o)}var x=g(function(t,e,o){return(b(t)?R:k)(t,v(e),o)},3),E=g(function(t,e,o){return _(x,t,e,o)},3),F=m(E),G=g(function(t,e,o){return M(t,1,e,o)},3),j=g(function(t,e,o){return _(G,t,e,o)},3),N=m(j);const V=Symbol("promiseCallback");function B(){let t,e;function o(o,...n){if(o)return e(o);t(n.length>1?n:n[0])}return o[V]=new Promise((o,n)=>{t=o,e=n}),o}function D(t,e,o){"number"!=typeof e&&(o=e,e=null),o=S(o||B());var n=Object.keys(t).length;if(!n)return o(null);e||(e=n);var r={},i=0,a=!1,c=!1,s=Object.create(null),u=[],l=[],p={};function h(t,e){u.push(()=>g(t,e))}function f(){if(!a){if(0===u.length&&0===i)return o(null,r);for(;u.length&&i<e;)u.shift()()}}function d(t,e){var o=s[t];o||(o=s[t]=[]),o.push(e)}function y(t){(s[t]||[]).forEach(t=>t()),f()}function g(t,e){if(!c){var n=A((e,...n)=>{if(i--,!1!==e)if(n.length<2&&([n]=n),e){var u={};if(Object.keys(r).forEach(t=>{u[t]=r[t]}),u[t]=n,c=!0,s=Object.create(null),a)return;o(e,u)}else r[t]=n,y(t);else a=!0});i++;var u=v(e[e.length-1]);e.length>1?u(r,n):u(n)}}function m(e){var o=[];return Object.keys(t).forEach(n=>{const r=t[n];Array.isArray(r)&&r.indexOf(e)>=0&&o.push(n)}),o}return Object.keys(t).forEach(e=>{var o=t[e];if(!Array.isArray(o))return h(e,[o]),void l.push(e);var n=o.slice(0,o.length-1),r=n.length;if(0===r)return h(e,o),void l.push(e);p[e]=r,n.forEach(i=>{if(!t[i])throw new Error("async.auto task `"+e+"` has a non-existent dependency `"+i+"` in "+n.join(", "));d(i,()=>{0==--r&&h(e,o)})})}),function(){for(var t=0;l.length;)t++,m(l.pop()).forEach(t=>{0==--p[t]&&l.push(t)});if(t!==n)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}(),f(),o[V]}var W=/^(?:async\s+)?(?:function)?\s*\w*\s*\(\s*([^)]+)\s*\)(?:\s*{)/,z=/^(?:async\s+)?\(?\s*([^)=]+)\s*\)?(?:\s*=>)/,H=/,/,U=/(=.+)?(\s*)$/;function K(t){let e="",o=0,n=t.indexOf("*/");for(;o<t.length;)if("/"===t[o]&&"/"===t[o+1]){let e=t.indexOf("\n",o);o=-1===e?t.length:e}else if(-1!==n&&"/"===t[o]&&"*"===t[o+1]){let r=t.indexOf("*/",o);-1!==r?(o=r+2,n=t.indexOf("*/",o)):(e+=t[o],o++)}else e+=t[o],o++;return e}function J(t){const e=K(t.toString());let o=e.match(W);if(o||(o=e.match(z)),!o)throw new Error("could not parse args in autoInject\nSource:\n"+e);let[,n]=o;return n.replace(/\s/g,"").split(H).map(t=>t.replace(U,"").trim())}function q(t,e){var o={};return Object.keys(t).forEach(e=>{var n,r=t[e],i=f(r),a=!i&&1===r.length||i&&0===r.length;if(Array.isArray(r))n=[...r],r=n.pop(),o[e]=n.concat(n.length>0?c:r);else if(a)o[e]=r;else{if(n=J(r),0===r.length&&!i&&0===n.length)throw new Error("autoInject task functions require explicit parameters.");i||n.pop(),o[e]=n.concat(c)}function c(t,e){var o=n.map(e=>t[e]);o.push(e),v(r)(...o)}}),D(o,e)}class Z{constructor(){this.head=this.tail=null,this.length=0}removeLink(t){return t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev,t.prev=t.next=null,this.length-=1,t}empty(){for(;this.head;)this.shift();return this}insertAfter(t,e){e.prev=t,e.next=t.next,t.next?t.next.prev=e:this.tail=e,t.next=e,this.length+=1}insertBefore(t,e){e.prev=t.prev,e.next=t,t.prev?t.prev.next=e:this.head=e,t.prev=e,this.length+=1}unshift(t){this.head?this.insertBefore(this.head,t):Y(this,t)}push(t){this.tail?this.insertAfter(this.tail,t):Y(this,t)}shift(){return this.head&&this.removeLink(this.head)}pop(){return this.tail&&this.removeLink(this.tail)}toArray(){return[...this]}*[Symbol.iterator](){for(var t=this.head;t;)yield t.data,t=t.next}remove(t){for(var e=this.head;e;){var{next:o}=e;t(e)&&this.removeLink(e),e=o}return this}}function Y(t,e){t.length=1,t.head=t.tail=e}function X(t,e,o){if(null==e)e=1;else if(0===e)throw new RangeError("Concurrency must not be zero");var n=v(t),r=0,i=[];const a={error:[],drain:[],saturated:[],unsaturated:[],empty:[]};function c(t,e){a[t].push(e)}function s(t,e){const o=(...n)=>{l(t,o),e(...n)};a[t].push(o)}function l(t,e){return t?e?void(a[t]=a[t].filter(t=>t!==e)):a[t]=[]:Object.keys(a).forEach(t=>a[t]=[])}function p(t,...e){a[t].forEach(t=>t(...e))}var h=!1;function f(t,e,o,n){if(null!=n&&"function"!=typeof n)throw new Error("task callback must be a function");var r,i;function a(t,...e){return t?o?i(t):r():e.length<=1?r(e[0]):void r(e)}_.started=!0;var c=_._createTaskItem(t,o?a:n||a);if(e?_._tasks.unshift(c):_._tasks.push(c),h||(h=!0,u(()=>{h=!1,_.process()})),o||!n)return new Promise((t,e)=>{r=t,i=e})}function d(t){return function(e,...o){r-=1;for(var n=0,a=t.length;n<a;n++){var c=t[n],s=i.indexOf(c);0===s?i.shift():s>0&&i.splice(s,1),c.callback(e,...o),null!=e&&p("error",e,c.data)}r<=_.concurrency-_.buffer&&p("unsaturated"),_.idle()&&p("drain"),_.process()}}function y(t){return!(0!==t.length||!_.idle()||(u(()=>p("drain")),0))}const g=t=>e=>{if(!e)return new Promise((e,o)=>{s(t,(t,n)=>{if(t)return o(t);e(n)})});l(t),c(t,e)};var m=!1,_={_tasks:new Z,_createTaskItem:(t,e)=>({data:t,callback:e}),*[Symbol.iterator](){yield*_._tasks[Symbol.iterator]()},concurrency:e,payload:o,buffer:e/4,started:!1,paused:!1,push(t,e){if(Array.isArray(t)){if(y(t))return;return t.map(t=>f(t,!1,!1,e))}return f(t,!1,!1,e)},pushAsync(t,e){if(Array.isArray(t)){if(y(t))return;return t.map(t=>f(t,!1,!0,e))}return f(t,!1,!0,e)},kill(){l(),_._tasks.empty()},unshift(t,e){if(Array.isArray(t)){if(y(t))return;return t.map(t=>f(t,!0,!1,e))}return f(t,!0,!1,e)},unshiftAsync(t,e){if(Array.isArray(t)){if(y(t))return;return t.map(t=>f(t,!0,!0,e))}return f(t,!0,!0,e)},remove(t){_._tasks.remove(t)},process(){if(!m){for(m=!0;!_.paused&&r<_.concurrency&&_._tasks.length;){var t=[],e=[],o=_._tasks.length;_.payload&&(o=Math.min(o,_.payload));for(var a=0;a<o;a++){var c=_._tasks.shift();t.push(c),i.push(c),e.push(c.data)}r+=1,0===_._tasks.length&&p("empty"),r===_.concurrency&&p("saturated");var s=A(d(t));n(e,s)}m=!1}},length:()=>_._tasks.length,running:()=>r,workersList:()=>i,idle:()=>_._tasks.length+r===0,pause(){_.paused=!0},resume(){!1!==_.paused&&(_.paused=!1,u(_.process))}};return Object.defineProperties(_,{saturated:{writable:!1,value:g("saturated")},unsaturated:{writable:!1,value:g("unsaturated")},empty:{writable:!1,value:g("empty")},drain:{writable:!1,value:g("drain")},error:{writable:!1,value:g("error")}}),_}function Q(t,e){return X(t,1,e)}function $(t,e,o){return X(t,e,o)}var tt=g(function(t,e,o,n){n=S(n);var r=v(o);return G(t,(t,o,n)=>{r(e,t,(t,o)=>{e=o,n(t)})},t=>n(t,e))},4);function et(...t){var e=t.map(v);return function(...t){var o=this,n=t[t.length-1];return"function"==typeof n?t.pop():n=B(),tt(e,t,(t,e,n)=>{e.apply(o,t.concat((t,...e)=>{n(t,e)}))},(t,e)=>n(t,...e)),n[V]}}function ot(...t){return et(...t.reverse())}var nt=g(function(t,e,o,n){return _(I(e),t,o,n)},4),rt=g(function(t,e,o,n){var r=v(o);return nt(t,e,(t,e)=>{r(t,(t,...o)=>t?e(t):e(t,o))},(t,e)=>{for(var o=[],r=0;r<e.length;r++)e[r]&&(o=o.concat(...e[r]));return n(t,o)})},4),it=g(function(t,e,o){return rt(t,1/0,e,o)},3),at=g(function(t,e,o){return rt(t,1,e,o)},3);function ct(...t){return function(...e){return e.pop()(null,...t)}}function st(t,e){return(o,n,r,i)=>{var a,c=!1;const s=v(r);o(n,(o,n,r)=>{s(o,(n,i)=>n||!1===n?r(n):t(i)&&!a?(c=!0,a=e(!0,o),r(null,w)):void r())},t=>{if(t)return i(t);i(null,c?a:e(!1))})}}var ut=g(function(t,e,o){return st(t=>t,(t,e)=>e)(x,t,e,o)},3),lt=g(function(t,e,o,n){return st(t=>t,(t,e)=>e)(I(e),t,o,n)},4),pt=g(function(t,e,o){return st(t=>t,(t,e)=>e)(I(1),t,e,o)},3);function ht(t){return(e,...o)=>v(e)(...o,(e,...o)=>{"object"==typeof console&&(e?console.error&&console.error(e):console[t]&&o.forEach(e=>console[t](e)))})}var ft=ht("dir"),dt=g(function(t,e,o){o=A(o);var n,r=v(t),i=v(e);function a(t,...e){if(t)return o(t);!1!==t&&(n=e,i(...e,c))}function c(t,e){return t?o(t):!1!==t?e?void r(a):o(null,...n):void 0}return c(null,!0)},3);function yt(t,e,o){const n=v(e);return dt(t,(...t)=>{const e=t.pop();n(...t,(t,o)=>e(t,!o))},o)}function vt(t){return(e,o,n)=>t(e,n)}var gt=g(function(t,e,o){return x(t,vt(v(e)),o)},3),mt=g(function(t,e,o,n){return I(e)(t,vt(v(o)),n)},4),_t=g(function(t,e,o){return mt(t,1,e,o)},3);function bt(t){return f(t)?t:function(...e){var o=e.pop(),n=!0;e.push((...t)=>{n?u(()=>o(...t)):o(...t)}),t.apply(this,e),n=!1}}var wt=g(function(t,e,o){return st(t=>!t,t=>!t)(x,t,e,o)},3),St=g(function(t,e,o,n){return st(t=>!t,t=>!t)(I(e),t,o,n)},4),Ct=g(function(t,e,o){return st(t=>!t,t=>!t)(G,t,e,o)},3);function Pt(t,e,o,n){var r=new Array(e.length);t(e,(t,e,n)=>{o(t,(t,o)=>{r[e]=!!o,n(t)})},t=>{if(t)return n(t);for(var o=[],i=0;i<e.length;i++)r[i]&&o.push(e[i]);n(null,o)})}function Tt(t,e,o,n){var r=[];t(e,(t,e,n)=>{o(t,(o,i)=>{if(o)return n(o);i&&r.push({index:e,value:t}),n(o)})},t=>{if(t)return n(t);n(null,r.sort((t,e)=>t.index-e.index).map(t=>t.value))})}function Ot(t,e,o,n){return(b(e)?Pt:Tt)(t,e,v(o),n)}var At=g(function(t,e,o){return Ot(x,t,e,o)},3),Lt=g(function(t,e,o,n){return Ot(I(e),t,o,n)},4),It=g(function(t,e,o){return Ot(G,t,e,o)},3),Mt=g(function(t,e){var o=A(e),n=v(bt(t));return function t(e){if(e)return o(e);!1!==e&&n(t)}()},2),Rt=g(function(t,e,o,n){var r=v(o);return nt(t,e,(t,e)=>{r(t,(o,n)=>o?e(o):e(o,{key:n,val:t}))},(t,e)=>{for(var o={},{hasOwnProperty:r}=Object.prototype,i=0;i<e.length;i++)if(e[i]){var{key:a}=e[i],{val:c}=e[i];r.call(o,a)?o[a].push(c):o[a]=[c]}return n(t,o)})},4);function kt(t,e,o){return Rt(t,1/0,e,o)}function xt(t,e,o){return Rt(t,1,e,o)}var Et=ht("log"),Ft=g(function(t,e,o,n){n=S(n);var r={},i=v(o);return I(e)(t,(t,e,o)=>{i(t,e,(t,n)=>{if(t)return o(t);r[e]=n,o(t)})},t=>n(t,r))},4);function Gt(t,e,o){return Ft(t,1/0,e,o)}function jt(t,e,o){return Ft(t,1,e,o)}function Nt(t,e=(t=>t)){var o=Object.create(null),r=Object.create(null),i=v(t),a=n((t,n)=>{var a=e(...t);a in o?u(()=>n(null,...o[a])):a in r?r[a].push(n):(r[a]=[n],i(...t,(t,...e)=>{t||(o[a]=e);var n=r[a];delete r[a];for(var i=0,c=n.length;i<c;i++)n[i](t,...e)}))});return a.memo=o,a.unmemoized=t,a}var Vt=s(a?t.nextTick:i?setImmediate:c),Bt=g((t,e,o)=>{var n=b(e)?[]:{};t(e,(t,e,o)=>{v(t)((t,...r)=>{r.length<2&&([r]=r),n[e]=r,o(t)})},t=>o(t,n))},3);function Dt(t,e){return Bt(x,t,e)}function Wt(t,e,o){return Bt(I(e),t,o)}function zt(t,e){var o=v(t);return X((t,e)=>{o(t[0],e)},e,1)}class Ht{constructor(){this.heap=[],this.pushCount=Number.MIN_SAFE_INTEGER}get length(){return this.heap.length}empty(){return this.heap=[],this}percUp(t){let e;for(;t>0&&Kt(this.heap[t],this.heap[e=Ut(t)]);){let o=this.heap[t];this.heap[t]=this.heap[e],this.heap[e]=o,t=e}}percDown(t){let e;for(;(e=1+(t<<1))<this.heap.length&&(e+1<this.heap.length&&Kt(this.heap[e+1],this.heap[e])&&(e+=1),!Kt(this.heap[t],this.heap[e]));){let o=this.heap[t];this.heap[t]=this.heap[e],this.heap[e]=o,t=e}}push(t){t.pushCount=++this.pushCount,this.heap.push(t),this.percUp(this.heap.length-1)}unshift(t){return this.heap.push(t)}shift(){let[t]=this.heap;return this.heap[0]=this.heap[this.heap.length-1],this.heap.pop(),this.percDown(0),t}toArray(){return[...this]}*[Symbol.iterator](){for(let t=0;t<this.heap.length;t++)yield this.heap[t].data}remove(t){let e=0;for(let o=0;o<this.heap.length;o++)t(this.heap[o])||(this.heap[e]=this.heap[o],e++);this.heap.splice(e);for(let o=Ut(this.heap.length-1);o>=0;o--)this.percDown(o);return this}}function Ut(t){return(t+1>>1)-1}function Kt(t,e){return t.priority!==e.priority?t.priority<e.priority:t.pushCount<e.pushCount}function Jt(t,e){var o=zt(t,e),{push:n,pushAsync:r}=o;function i(t,e){return Array.isArray(t)?t.map(t=>({data:t,priority:e})):{data:t,priority:e}}return o._tasks=new Ht,o._createTaskItem=({data:t,priority:e},o)=>({data:t,priority:e,callback:o}),o.push=function(t,e=0,o){return n(i(t,e),o)},o.pushAsync=function(t,e=0,o){return r(i(t,e),o)},delete o.unshift,delete o.unshiftAsync,o}var qt=g(function(t,e){if(e=S(e),!Array.isArray(t))return e(new TypeError("First argument to race must be an array of functions"));if(!t.length)return e();for(var o=0,n=t.length;o<n;o++)v(t[o])(e)},2);function Zt(t,e,o,n){var r=[...t].reverse();return tt(r,e,o,n)}function Yt(t){var e=v(t);return n(function(t,o){return t.push((t,...e)=>{let n={};if(t&&(n.error=t),e.length>0){var r=e;e.length<=1&&([r]=e),n.value=r}o(null,n)}),e.apply(this,t)})}function Xt(t){var e;return Array.isArray(t)?e=t.map(Yt):(e={},Object.keys(t).forEach(o=>{e[o]=Yt.call(this,t[o])})),e}function Qt(t,e,o,n){const r=v(o);return Ot(t,e,(t,e)=>{r(t,(t,o)=>{e(t,!o)})},n)}var $t=g(function(t,e,o){return Qt(x,t,e,o)},3),te=g(function(t,e,o,n){return Qt(I(e),t,o,n)},4),ee=g(function(t,e,o){return Qt(G,t,e,o)},3);function oe(t){return function(){return t}}const ne=5,re=0;function ie(t,e,o){var n={times:ne,intervalFunc:oe(re)};if(arguments.length<3&&"function"==typeof t?(o=e||B(),e=t):(ae(n,t),o=o||B()),"function"!=typeof e)throw new Error("Invalid arguments for async.retry");var r=v(e),i=1;return function t(){r((e,...r)=>{!1!==e&&(e&&i++<n.times&&("function"!=typeof n.errorFilter||n.errorFilter(e))?setTimeout(t,n.intervalFunc(i-1)):o(e,...r))})}(),o[V]}function ae(t,e){if("object"==typeof e)t.times=+e.times||ne,t.intervalFunc="function"==typeof e.interval?e.interval:oe(+e.interval||re),t.errorFilter=e.errorFilter;else{if("number"!=typeof e&&"string"!=typeof e)throw new Error("Invalid arguments for async.retry");t.times=+e||ne}}function ce(t,e){e||(e=t,t=null);let o=t&&t.arity||e.length;f(e)&&(o+=1);var r=v(e);return n((e,n)=>{function i(t){r(...e,t)}return(e.length<o-1||null==n)&&(e.push(n),n=B()),t?ie(t,i,n):ie(i,n),n[V]})}function se(t,e){return Bt(G,t,e)}var ue=g(function(t,e,o){return st(Boolean,t=>t)(x,t,e,o)},3),le=g(function(t,e,o,n){return st(Boolean,t=>t)(I(e),t,o,n)},4),pe=g(function(t,e,o){return st(Boolean,t=>t)(G,t,e,o)},3),he=g(function(t,e,o){var n=v(e);return E(t,(t,e)=>{n(t,(o,n)=>{if(o)return e(o);e(o,{value:t,criteria:n})})},(t,e)=>{if(t)return o(t);o(null,e.sort(r).map(t=>t.value))});function r(t,e){var o=t.criteria,n=e.criteria;return o<n?-1:o>n?1:0}},3);function fe(t,e,o){var r=v(t);return n((n,i)=>{var a,c=!1;n.push((...t)=>{c||(i(...t),clearTimeout(a))}),a=setTimeout(function(){var e=t.name||"anonymous",n=new Error('Callback function "'+e+'" timed out.');n.code="ETIMEDOUT",o&&(n.info=o),c=!0,i(n)},e),r(...n)})}function de(t){for(var e=Array(t);t--;)e[t]=t;return e}function ye(t,e,o,n){var r=v(o);return nt(de(t),e,r,n)}function ve(t,e,o){return ye(t,1/0,e,o)}function ge(t,e,o){return ye(t,1,e,o)}function me(t,e,o,n){arguments.length<=3&&"function"==typeof e&&(n=o,o=e,e=Array.isArray(t)?[]:{}),n=S(n||B());var r=v(o);return x(t,(t,o,n)=>{r(e,t,o,n)},t=>n(t,e)),n[V]}var _e=g(function(t,e){var o,n=null;return _t(t,(t,e)=>{v(t)((t,...r)=>{if(!1===t)return e(t);r.length<2?[o]=r:o=r,n=t,e(t?null:{})})},()=>e(n,o))});function be(t){return(...e)=>(t.unmemoized||t)(...e)}var we=g(function(t,e,o){o=A(o);var n=v(e),r=v(t),i=[];function a(t,...e){if(t)return o(t);i=e,!1!==t&&r(c)}function c(t,e){return t?o(t):!1!==t?e?void n(a):o(null,...i):void 0}return r(c)},3);function Se(t,e,o){const n=v(t);return we(t=>n((e,o)=>t(e,!o)),e,o)}var Ce=g(function(t,e){if(e=S(e),!Array.isArray(t))return e(new Error("First argument to waterfall must be an array of functions"));if(!t.length)return e();var o=0;function n(e){v(t[o++])(...e,A(r))}function r(r,...i){if(!1!==r)return r||o===t.length?e(r,...i):void n(i)}n([])}),Pe={apply:o,applyEach:F,applyEachSeries:N,asyncify:l,auto:D,autoInject:q,cargo:Q,cargoQueue:$,compose:ot,concat:it,concatLimit:rt,concatSeries:at,constant:ct,detect:ut,detectLimit:lt,detectSeries:pt,dir:ft,doUntil:yt,doWhilst:dt,each:gt,eachLimit:mt,eachOf:x,eachOfLimit:M,eachOfSeries:G,eachSeries:_t,ensureAsync:bt,every:wt,everyLimit:St,everySeries:Ct,filter:At,filterLimit:Lt,filterSeries:It,forever:Mt,groupBy:kt,groupByLimit:Rt,groupBySeries:xt,log:Et,map:E,mapLimit:nt,mapSeries:j,mapValues:Gt,mapValuesLimit:Ft,mapValuesSeries:jt,memoize:Nt,nextTick:Vt,parallel:Dt,parallelLimit:Wt,priorityQueue:Jt,queue:zt,race:qt,reduce:tt,reduceRight:Zt,reflect:Yt,reflectAll:Xt,reject:$t,rejectLimit:te,rejectSeries:ee,retry:ie,retryable:ce,seq:et,series:se,setImmediate:u,some:ue,someLimit:le,someSeries:pe,sortBy:he,timeout:fe,times:ve,timesLimit:ye,timesSeries:ge,transform:me,tryEach:_e,unmemoize:be,until:Se,waterfall:Ce,whilst:we,all:wt,allLimit:St,allSeries:Ct,any:ue,anyLimit:le,anySeries:pe,find:ut,findLimit:lt,findSeries:pt,flatMap:it,flatMapLimit:rt,flatMapSeries:at,forEach:gt,forEachSeries:_t,forEachLimit:mt,forEachOf:x,forEachOfSeries:G,forEachOfLimit:M,inject:tt,foldl:tt,foldr:Zt,select:At,selectLimit:Lt,selectSeries:It,wrapSync:l,during:we,doDuring:dt};e.default=Pe,e.apply=o,e.applyEach=F,e.applyEachSeries=N,e.asyncify=l,e.auto=D,e.autoInject=q,e.cargo=Q,e.cargoQueue=$,e.compose=ot,e.concat=it,e.concatLimit=rt,e.concatSeries=at,e.constant=ct,e.detect=ut,e.detectLimit=lt,e.detectSeries=pt,e.dir=ft,e.doUntil=yt,e.doWhilst=dt,e.each=gt,e.eachLimit=mt,e.eachOf=x,e.eachOfLimit=M,e.eachOfSeries=G,e.eachSeries=_t,e.ensureAsync=bt,e.every=wt,e.everyLimit=St,e.everySeries=Ct,e.filter=At,e.filterLimit=Lt,e.filterSeries=It,e.forever=Mt,e.groupBy=kt,e.groupByLimit=Rt,e.groupBySeries=xt,e.log=Et,e.map=E,e.mapLimit=nt,e.mapSeries=j,e.mapValues=Gt,e.mapValuesLimit=Ft,e.mapValuesSeries=jt,e.memoize=Nt,e.nextTick=Vt,e.parallel=Dt,e.parallelLimit=Wt,e.priorityQueue=Jt,e.queue=zt,e.race=qt,e.reduce=tt,e.reduceRight=Zt,e.reflect=Yt,e.reflectAll=Xt,e.reject=$t,e.rejectLimit=te,e.rejectSeries=ee,e.retry=ie,e.retryable=ce,e.seq=et,e.series=se,e.setImmediate=u,e.some=ue,e.someLimit=le,e.someSeries=pe,e.sortBy=he,e.timeout=fe,e.times=ve,e.timesLimit=ye,e.timesSeries=ge,e.transform=me,e.tryEach=_e,e.unmemoize=be,e.until=Se,e.waterfall=Ce,e.whilst=we,e.all=wt,e.allLimit=St,e.allSeries=Ct,e.any=ue,e.anyLimit=le,e.anySeries=pe,e.find=ut,e.findLimit=lt,e.findSeries=pt,e.flatMap=it,e.flatMapLimit=rt,e.flatMapSeries=at,e.forEach=gt,e.forEachSeries=_t,e.forEachLimit=mt,e.forEachOf=x,e.forEachOfSeries=G,e.forEachOfLimit=M,e.inject=tt,e.foldl=tt,e.foldr=Zt,e.select=At,e.selectLimit=Lt,e.selectSeries=It,e.wrapSync=l,e.during=we,e.doDuring=dt,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof o&&void 0!==e?n(o):"function"==typeof define&&define.amd?define(["exports"],n):n(this.async={})}).call(this,t("_process"))},{_process:1}],Enums:[function(t,e,o){"use strict";cc._RF.push(e,"860e9yo5Z5FdpwLnSS14+jg","Enums");var n,r=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.prop=o.ui=o.events=o.Key=o.Assets=o.Clips=o.SoundStatus=o.spacesArr=o.dft_lingWidth=o.CUP_SELECTED_MOVE_HEIGHT=o.AnimationTime=o.defaultColor=o.WaterColors=o.SPLIT_COUNT=o.ANGLE_FACTOR=o.HEIGHT_FACTOR=o.PourAction=o.BASIC_DATA=o.MAX_ARR_LEN=o.shareVideoConfig=o.shareConfig=o.shareVideoContent=o.shareContent=o.adConfig=void 0;var i=cc._decorator,a=i.ccclass,c=i.property,s=function(){function t(){this.platform="platform",this.id=0,this.bannerId=[],this.intersitialId=[],this.videoId=[],this.customId=[]}return r([c()],t.prototype,"platform",void 0),r([c({type:cc.Integer})],t.prototype,"id",void 0),r([c({type:cc.String})],t.prototype,"bannerId",void 0),r([c({type:cc.String})],t.prototype,"intersitialId",void 0),r([c({type:cc.String})],t.prototype,"videoId",void 0),r([c({type:cc.String})],t.prototype,"customId",void 0),r([a("adConfig")],t)}();o.adConfig=s;var u=function(){function t(){this.shareId="",this.shareLink="",this.shareText="Share Title"}return r([c()],t.prototype,"shareId",void 0),r([c()],t.prototype,"shareLink",void 0),r([c()],t.prototype,"shareText",void 0),r([a("shareContent")],t)}();o.shareContent=u;var l=function(){function t(){this.shareId="",this.title="Share Title",this.desc="",this.videoTopics=[]}return r([c()],t.prototype,"shareId",void 0),r([c()],t.prototype,"title",void 0),r([c()],t.prototype,"desc",void 0),r([c({type:cc.String})],t.prototype,"videoTopics",void 0),r([a("shareVideoContent")],t)}();o.shareVideoContent=l;var p=function(){function t(){this.platform="platform",this.sharePics=[]}return r([c()],t.prototype,"platform",void 0),r([c({type:u})],t.prototype,"sharePics",void 0),r([a("shareConfig")],t)}();o.shareConfig=p;var h=function(){function t(){this.platform="platform",this.sharePics=[]}return r([c()],t.prototype,"platform",void 0),r([c({type:l})],t.prototype,"sharePics",void 0),r([a("shareVideoConfig")],t)}();o.shareVideoConfig=h,o.MAX_ARR_LEN=6,function(t){t[t.color_alpha=1]="color_alpha",t[t.color_range=255]="color_range",t[t.BYTE=4]="BYTE",t[t.color_alpha2=1]="color_alpha2",t[t.color_alpha3=2]="color_alpha3",t[t.color_alpha4=3]="color_alpha4"}(o.BASIC_DATA||(o.BASIC_DATA={})),function(t){t[t.none=0]="none",t[t.in=1]="in",t[t.out=2]="out"}(o.PourAction||(o.PourAction={})),o.HEIGHT_FACTOR=.8,o.ANGLE_FACTOR=.01,o.SPLIT_COUNT=4,o.WaterColors=["#7595d4","#F2C90F","#BD2656","#F0791F","#ec35e9","#0ce0f4","#9adb8e","#ef149b","#16cd09","#DD2E44","#E5C69A","#65DC8E","#B068F0","#6e7a79","#538849"],o.defaultColor="#538849",function(t){t[t.pourTime=.2]="pourTime",t[t.moveTime=.1]="moveTime"}(o.AnimationTime||(o.AnimationTime={})),o.CUP_SELECTED_MOVE_HEIGHT=100,o.dft_lingWidth=6,o.spacesArr=((n={})[1]=[40,1],n[2]=[80,1],n[3]=[60,1],n[4]=[45,.9],n[5]=[35,.85],n[6]=[35,.85],n[7]=[25,.7],n[8]=[15,.7],n),function(t){t[t.on=1]="on",t[t.off=-1]="off"}(o.SoundStatus||(o.SoundStatus={})),o.Clips={Button_Click:"Button_Click",ContainerFinish:"ContainerFinish",firework_1:"firework_1",modal:"modal",pourWater:"pourWater",Show_Victory:"Show_Victory",reward:"reward"},o.Assets={UiPrefab:{type:cc.Prefab,path:"Preload/Prefabs/UI/"},CommonPrefab:{type:cc.Prefab,path:"Preload/Prefabs/Common/"},Json:{type:cc.JsonAsset,path:"Preload/Jsons/"},Sound:{type:cc.AudioClip,path:"Preload/Clips/"},UiFrame:{type:cc.SpriteFrame,path:"Preload/UI/"}},o.Key={ToolSetting:"ToolSetting",Lv:"Lv",Today:"Today",CupSetting:"CupSetting",ReceiveList:"ReceiveList",ReceiveListTime:"ReceiveListTime",SideReward:"SideReward",CodeList:"CodeList",CoinCount:"CoinCount",CurMaxLevel:"CurMaxLevel"},o.events={GameStart:"GameStart",Toast:"Toast",ChangeSound:"ChangeSound",Reset:"Reset",Back:"Back",AddTube:"AddTube",Start:"Start",TimeStop:"TimeStop",LevelFinish:"LevelFinish",Pour:"Pour",ExcuteGuideTask:"ExcuteGuideTask",Pause:"Pause",LevelSelectChange:"LevelSelectChange",BackToMain:"BackToMain"},o.ui={GameView:{name:"GameView",layer:3,clear:!1},MainView:{name:"MainView",layer:3,clear:!1},VictoryView:{name:"VictoryView",layer:3,clear:!1},ShopView:{name:"ShopView",layer:3,clear:!1},LevelView:{name:"LevelView",layer:3,clear:!1},GetCupView:{name:"GetCupView",layer:3,clear:!1},ToastView:{name:"ToastView",layer:6,clear:!1},SettingView:{name:"SettingView",layer:6,clear:!1}},o.prop={reset:{name:"reset",layer:3,clear:!1},back:{name:"back",layer:3,clear:!1},tube:{name:"tube",layer:3,clear:!1}},cc._RF.pop()},{}],GameMgr:[function(t,e,o){"use strict";cc._RF.push(e,"fc646V3p1hLl4EMPJbOXsZW","GameMgr");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../enum/Enums"),c=t("./SoundMgr"),s=cc._decorator,u=s.ccclass,l=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.start=function(){cc.director.on(a.events.Pour,this.onPour,this),cc.director.on(a.events.LevelFinish,this.onLevelFinish,this)},e.prototype.onDisable=function(){cc.director.off(a.events.Pour,this.onPour,this),cc.director.off(a.events.LevelFinish,this.onLevelFinish,this)},e.prototype.onPour=function(){console.log("===================================="),console.log("onPour"),console.log("====================================")},e.prototype.onLevelFinish=function(){console.log("===================================="),console.log("onLevelFinish"),console.log("===================================="),c.SoundMgr.ins.playSound(a.Clips.Show_Victory)},i([u],e)}(cc.Component));o.default=l,cc._RF.pop()},{"../enum/Enums":"Enums","./SoundMgr":"SoundMgr"}],GameView:[function(t,e,o){"use strict";cc._RF.push(e,"945b0ldndVLiZvMb+WPC41w","GameView");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},a=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{s(n.next(t))}catch(e){i(e)}}function c(t){try{s(n.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}s((n=n.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return s([t,e])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../Global"),u=t("../enum/Enums"),l=t("../manager/PropMgr"),p=t("../manager/SoundMgr"),h=t("../manager/CoinMgr"),f=t("../manager/CupMgr"),d=t("../manager/ResMgr"),y=t("../utils/Tools"),v=t("./BaseView"),g=t("./VictoryView"),m=cc._decorator,_=m.ccclass,b=m.property,w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lvLabel=null,e.resetMgr=null,e.backMgr=null,e.tubeMgr=null,e.coinPrefab=null,e.effectRoot=null,e.coinBgNode=null,e.coinManagerNode=null,e.initLevel=s.Global.lv,e.onceAdd=!1,e.tween=null,e}var o;return r(e,t),o=e,e.prototype.onEnable=function(){cc.director.on(u.events.LevelFinish,this.GameResult,this),cc.director.on(u.events.LevelSelectChange,this.eventLevelChange,this),cc.director.on(u.events.AddTube,this.toolCountChange,this),cc.director.on(u.events.Back,this.toolCountChange,this)},e.prototype.onDisable=function(){cc.director.off(u.events.LevelFinish,this.GameResult,this),cc.director.off(u.events.LevelSelectChange,this.eventLevelChange,this),cc.director.off(u.events.AddTube,this.toolCountChange,this),cc.director.off(u.events.Back,this.toolCountChange,this)},e.prototype.start=function(){y.save("isPlayGame",!0),o.ins=this,console.log(" GameView:::::::::::  Start.... ")},e.prototype.setLvLabel=function(t){var e=t;console.log(" _Lv:::: ",t,"  Global.Lv:::  ",s.Global.lv),null!=t&&0!=t||(e=s.Global.lv),this.lvLabel.string="<b><color=#608bc1><outline color=#000000 width=2>level </outline></c><color=#FAFAFA><outline color=#000000 width=2>"+e+"</outline></c></b>"},e.prototype.onResetClick=function(){console.log(s.Global.getToolSetting("reset")),this.onceAdd=!1,s.Global.getToolSetting("reset")>0&&(s.Global.addToolSetting("reset",-1),cc.director.emit(u.events.Reset)),this.setProps(s.Global._toolSetting)},e.prototype.onBackClick=function(){f.default.ins.checkCanUndo()&&(s.Global.getToolSetting("back")>0&&(s.Global.addToolSetting("back",-1),cc.director.emit(u.events.Back)),this.setProps(s.Global._toolSetting))},e.prototype.onAddTubeClick=function(t){this.onceAdd?cc.director.emit(u.events.Toast,"Only add one tuber per level"):f.default.ins.checkCanAddTube()&&(s.Global.getToolSetting("tube")>0?(s.Global.addToolSetting("tube",-1),this.onceAdd=!0,cc.director.emit(u.events.AddTube)):console.log(t.target),this.setProps(s.Global._toolSetting))},e.prototype.onTimeStopClick=function(t){console.log(t.target)},e.prototype.onBackMainClick=function(){t.prototype.close.call(this),this.node.destroy(),cc.director.emit(u.events.BackToMain),console.log("  emit  BackMain Event. ")},e.prototype.playCoinAnimation=function(t){var e=this,o=t.position,n=(t.parent.convertToWorldSpaceAR(o),cc.instantiate(this.coinPrefab)),r=h.default.ins.getLabelPosition(),i=h.default.ins.coinLabel.node.parent.convertToWorldSpaceAR(r);this.coinManagerNode.convertToWorldSpaceAR(i),this.effectRoot.convertToNodeSpaceAR(i),this.effectRoot.addChild(n),n.position=o,this.tween=cc.tween(n).to(1,{x:r.x,y:r.y,angle:360},{easing:"quartIn"}).call(function(){e.tween=null,n.destroy(),s.Global.addCoin(s.Global.tubeRewardCoin),h.default.ins.setCoinLabel()}).start()},e.prototype.GameResult=function(){return a(this,void 0,void 0,function(){var t;return c(this,function(e){switch(e.label){case 0:return this.onceAdd=!1,s.Global.addLv(),p.SoundMgr.ins.playSound(u.Clips.Show_Victory),this.init(),[4,d.default.ins.getUI(u.ui.VictoryView)];case 1:return t=e.sent(),cc.find("Canvas").addChild(t),t.getComponent(g.default).init(),[2]}})})},e.prototype.init=function(t){this.initLevel=t,null!=t&&(s.Global.lv=t),this.setLvLabel(t);var e=y.load(u.Key.ToolSetting,2);s.Global._toolSetting=e||s.Global._toolSetting,this.setProps(s.Global._toolSetting)},e.prototype.onLevelClick=function(){return a(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,d.default.ins.getUI(u.ui.LevelView)];case 1:return t.sent().parent=this.node.parent,[2]}})})},e.prototype.toolCountChange=function(){this.setProps(s.Global._toolSetting)},e.prototype.setProps=function(t){this.resetMgr.setNum(t.reset),this.backMgr.setNum(t.back),this.tubeMgr.setNum(t.tube)},e.prototype.eventLevelChange=function(){this.setLvLabel()},e.ins=null,i([b(cc.RichText)],e.prototype,"lvLabel",void 0),i([b(l.default)],e.prototype,"resetMgr",void 0),i([b(l.default)],e.prototype,"backMgr",void 0),i([b(l.default)],e.prototype,"tubeMgr",void 0),i([b(cc.Prefab)],e.prototype,"coinPrefab",void 0),i([b(cc.Node)],e.prototype,"effectRoot",void 0),i([b(cc.Node)],e.prototype,"coinBgNode",void 0),i([b(cc.Node)],e.prototype,"coinManagerNode",void 0),o=i([_],e)}(v.default);o.default=w,cc._RF.pop()},{"../Global":"Global","../enum/Enums":"Enums","../manager/CoinMgr":"CoinMgr","../manager/CupMgr":"CupMgr","../manager/PropMgr":"PropMgr","../manager/ResMgr":"ResMgr","../manager/SoundMgr":"SoundMgr","../utils/Tools":"Tools","./BaseView":"BaseView","./VictoryView":"VictoryView"}],GetCupView:[function(t,e,o){"use strict";cc._RF.push(e,"e2db6D/v1VA2YRr1aZaw11b","GetCupView");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./BaseView"),c=cc._decorator,s=c.ccclass,u=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.propSprite=null,e.rootNode=null,e}return r(e,t),e.prototype.start=function(){console.log(" GetCupView. Starttttt.... ")},e.prototype.setTitleImg=function(){},e.prototype.setPropImg=function(t){this.propSprite.spriteFrame=t},e.prototype.setScale=function(t){this.rootNode.scale=t},e.prototype.close=function(){this.node.destroy(),this.cancelFn&&this.cancelFn()},i([u(cc.Sprite)],e.prototype,"propSprite",void 0),i([u(cc.Node)],e.prototype,"rootNode",void 0),i([s],e)}(a.default);o.default=l,cc._RF.pop()},{"./BaseView":"BaseView"}],Global:[function(t,e,o){"use strict";cc._RF.push(e,"97215z3FR9KQZoWbMciCTCo","Global"),Object.defineProperty(o,"__esModule",{value:!0}),o.Global=void 0;var n=t("./enum/Enums"),r=t("./utils/Tools"),i=function(){function t(){}return Object.defineProperty(t,"receiveList",{get:function(){return t._receiveList},set:function(t){this._receiveList=t},enumerable:!1,configurable:!0}),t.setReceiveList=function(e){t._receiveList.push(e),this.saveReceiveListLocal()},t.saveReceiveListLocal=function(){r.save(n.Key.ReceiveList,JSON.stringify(t._receiveList)),r.save(n.Key.ReceiveListTime,r.getDate())},t.clearReceiveList=function(){t._receiveList=[],this.saveReceiveListLocal()},Object.defineProperty(t,"codeList",{get:function(){return this._codeList},set:function(t){this._codeList=t},enumerable:!1,configurable:!0}),t.setCodeList=function(t){this._codeList.push(t),r.save(n.Key.CodeList,JSON.stringify(this._codeList))},Object.defineProperty(t,"cupSetting",{get:function(){return this._cupSetting},set:function(t){this._cupSetting=t},enumerable:!1,configurable:!0}),t.setCupCurrent=function(e){t._cupSetting.current=e==t._cupSetting.current?null:e,r.save(n.Key.CupSetting,JSON.stringify(t._cupSetting))},t.setCupHavaList=function(e){t._cupSetting.haveList.includes(e)||(t._cupSetting.haveList.push(e),r.save(n.Key.CupSetting,JSON.stringify(t._cupSetting)))},t.resetCupHaveList=function(){t._cupSetting.haveList=["01"],t._cupSetting.current="01"},t.addToolSetting=function(t,e){this._toolSetting[t]+=+e,r.save(n.Key.ToolSetting,JSON.stringify(this._toolSetting))},t.getToolSetting=function(t){return+this._toolSetting[t]},t.addLv=function(){this.lv<this.maxLv&&this.lv++,this.lv>this.currentMaxLv&&(this.currentMaxLv=this.lv,r.save(n.Key.CurMaxLevel,this.currentMaxLv),console.log(" Save New Max Level::::: ",this.currentMaxLv)),r.save(n.Key.Lv,this.lv)},t.subLv=function(){this.lv>1&&this.lv--,r.save(n.Key.Lv,this.lv)},t.setLv=function(t){t>0&&t<=this.maxLv&&(this.lv=t),r.save(n.Key.Lv,this.lv)},t.addCoin=function(t){this.currentCoin=this.currentCoin+t,r.save(n.Key.CoinCount,this.currentCoin)},t.subCoin=function(t){t>this.currentCoin?console.error("Sub coin is not enough \uff01\uff01\uff01\uff01"):(this.currentCoin=this.currentCoin-t,r.save(n.Key.CoinCount,this.currentCoin))},t.getCurrentCoin=function(){return this.currentCoin},t.Pause=function(e){void 0===e&&(e=!0),cc.director.emit(n.events.Pause,e),t.start=!e},t.Debug=!0,t.bgm=n.SoundStatus.on,t.sound=n.SoundStatus.on,t.LoadingRate=0,t.enableShareAd=!0,t.start=!1,t.layer=[],t.lv=1,t.maxLv=300,t.currentMaxLv=1,t.maxTube=15,t.action_list=[],t.action_step=5,t.startCoin=0,t.currentCoin=0,t.tubeRewardCoin=5,t.rewardCoin=10,t.watchAdReward=50,t._receiveList=[],t._toolSetting={reset:1,back:1,tube:1},t._cupSetting={haveList:["01"],current:"01"},t._codeList=[],t}();o.Global=i,cc._RF.pop()},{"./enum/Enums":"Enums","./utils/Tools":"Tools"}],GuideFinger:[function(t,e,o){"use strict";cc._RF.push(e,"a98d3lGMCVFDoOpdeXCzU2K","GuideFinger");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.GuideFinger=void 0;var a=cc._decorator,c=a.ccclass,s=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),i([c],e)}(cc.Component));o.GuideFinger=s,cc._RF.pop()},{}],GuideTaskMgr:[function(t,e,o){"use strict";cc._RF.push(e,"0ea37Q85FJO/Iq13E7CO66f","GuideTaskMgr");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.GuideTaskMgr=void 0;var a=cc._decorator,c=a.ccclass,s=a.property,u=t("async"),l=t("../enum/Enums"),p=cc.v3(),h=function(e){function o(){var t=null!==e&&e.apply(this,arguments)||this;return t.FINGER_PREFAB=null,t._finger=null,t._isOpenMaskInfo=!0,t}var n;return r(o,e),n=o,o.prototype.onLoad=function(){this.FINGER_PREFAB&&(this._finger=cc.instantiate(this.FINGER_PREFAB),this._finger.parent=this.node,this._finger.active=!1),this.node.setContentSize(cc.winSize),cc.systemEvent.on(l.events.ExcuteGuideTask,this.ExcuteGuideTask,this),this.node.on(cc.Node.EventType.TOUCH_START,this.addSetSwallowTouchesEventListener,this),this._mask=this.node.getComponentInChildren(cc.Mask),console.log(" GuideTaskManager.Mask:::: ",this._mask," Finger:::::: ",this._finger),this._maskInfo=this._mask.node.getChildByName("info"),this._mask.node.active=!1,this._maskInfo.active=this._isOpenMaskInfo},o.prototype.ExcuteGuideTask=function(e){var o=this;this._mask.node.active=!0;var r=e.taskFlie,i=e.stepIndex,a=t(r).task,c=a.steps[i];console.log(" ExcuteGuideTask Index::::::: ",i," Step:::: ",c),this._targetNode=null;var s=function(){console.log("ExcuteGuideTask guideFn ::::::: "),u.default.series({stepStart:function(t){console.log("ExcuteGuideTask stepStart ::::::: "),c.onStart?c.onStart(function(){t()}):t()},stepExcute:function(t){console.log("ExcuteGuideTask stepExcute ::::::: ",o._mask.node),c.onExcute&&c.onExcute(function(){o._mask.node.getChildByName("label").getComponent(cc.Label).string=c.command.text,o.scheduleOnce(function(){var e=n[c.command.cmd];e&&e(o,c,function(e){t(e)})},c.delayTime||0)})},stepEnd:function(t){console.log("ExcuteGuideTask stepEnd ::::::: "),c.onEnd?c.onEnd(function(){t()}):t(),(c=a.steps[++i])?(console.log("ExcuteGuideTask Start Next Step ::::::: "),s()):(o._mask._graphics.clear(),o._mask.node.active=!1,o._finger.active=!1)}},function(){})};console.log("ExcuteGuideTask guideFn Up::::::: "),s()},o.prototype.addSetSwallowTouchesEventListener=function(t){if(this._mask.node.active)if(this._targetNode){if(cc.isValid(this._targetNode)){var e=this._targetNode.getBoundingBox();console.log(this._targetNode.getPosition(),t.getLocation(),"event.getLocation()event.getLocation()event.getLocation()");var o=this._targetNode.getWorldPosition(p);console.log(o);var n=t.getLocation(),r=e.width/2,i=e.height/2;n.x>=o.x-r&&n.x<=o.x+e.width+r&&n.y>=o.y-i&&n.y<=o.y+e.height+i?this.node._touchListener.setSwallowTouches(!1):this.node._touchListener.setSwallowTouches(!0)}}else this.node._touchListener.setSwallowTouches(!0);else this.node._touchListener.setSwallowTouches(!1)},o.movefinger=function(t,e,o){console.log(" movefinger~~~~~~~ ");var n=e.command;t._targetNode=null,t.find(n.args,function(e){var n=e;t.fingerToNode(n,function(){t._targetNode=n,e.once(cc.Node.EventType.TOUCH_END,function(){o()})})})},o.prototype.find=function(t,e){var o=this;console.log(" GuideManager.Find::: ",t," CB:::: ",e);var n=cc.find("Canvas");this.locateNode(n,t,function(t,n){if(!t){var r=o._focusToNode(n);console.log(r,"rectrectrectrect"),e&&e(n,r)}})},o.prototype.parse=function(t){for(var e,o=[],n={},r=0,i=t.split(/[.,//,>,#]/g);r<i.length;r++){var a=i[r],c=new RegExp("[.,//,>,#]+"+a,"g"),s=t.match(c),u=s&&(null===(e=s[n[a]||0])||void 0===e?void 0:e.replace(a,""))||"/";n[a]?n[a]++:n[a]=1,o.push({symbol:u,name:a.trim(),index:n[a]-1||0})}return o},o.prototype.locateNode=function(t,e,o){for(var n,r=this.parse(e),i=t,a=function(t){var e=r[t];switch(console.log("locateNode111::: ItemName: ",e.name,"ItemSymbol::: ",e.symbol),e.symbol){case"/":console.log("locateNode::: ,ItemName: ",e.name),n=i.getChildByName(e.name);break;case",":n=i.parent.children.filter(function(t){return t.name==e.name})[e.index]}if(!n)return i=null,"break";i=n,console.log("In Loop::::: ",i)},c=0;c<r.length&&"break"!==a(c);c++);return console.log(" locateNode::Node::: ",i),i&&i.active&&o?o(null,i):o(e),i},o.prototype._focusToNode=function(t){this._mask._graphics.clear();var e=t.getBoundingBoxToWorld(),o=this.node.convertToNodeSpaceAR(e.origin);return e.x=o.x,e.y=o.y,this._mask._graphics.fillRect(e.x,e.y,e.width,e.height),e},o.prototype.fingerToNode=function(t,e){this._finger||e(),this._finger.active=!0,this._finger.stopAllActions();var o=this.node.convertToNodeSpaceAR(t.parent.convertToWorldSpaceAR(t.position));o.y-=160,this._finger.setPosition(o),e()},o.FINGER="movefinger",o.typeList=[n.FINGER],i([s(cc.Prefab)],o.prototype,"FINGER_PREFAB",void 0),n=i([c],o)}(cc.Component);o.GuideTaskMgr=h,cc._RF.pop()},{"../enum/Enums":"Enums",async:2}],GuideTask:[function(t,e,o){"use strict";cc._RF.push(e,"a4f296uOsBCoau1POJLaXqn","GuideTask"),Object.defineProperty(o,"__esModule",{value:!0}),o.task=void 0,o.task={name:"Task",debug:!0,steps:[{order:0,name:"GuideTask",command:{cmd:"movefinger",text:"Please select this cup",args:"game/GameView/bgColor/cupBg/cupMgr/layout_v/layout_h_0/cup_p",index:0},delayTime:.1,onStart:function(t){t()},onExcute:function(t){t()},onEnd:function(t){t()}},{order:1,name:"GuideBag",command:{cmd:"movefinger",text:"Fill the same cup with water of the same color",args:"game/GameView/bgColor/cupBg/cupMgr/layout_v/layout_h_0/cup_p,cup_p",index:1},delayTime:.2,onStart:function(t){t()},onExcute:function(t){t()},onEnd:function(t){t()}}]},cc._RF.pop()},{}],Interface:[function(t,e,o){"use strict";cc._RF.push(e,"c617e36IrhJPoiy7JE4PJ9O","Interface"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],LevelItemView:[function(t,e,o){"use strict";cc._RF.push(e,"d98edtUJidBdqBX5mvxs9Em","LevelItemView");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.default=null,e.select=null,e.isOpen=null,e}return r(e,t),e.prototype.start=function(){},e.prototype.SetLevelIndex=function(t){this.label.string=t.toString()},e.prototype.SetLevelState=function(t){this.node.getComponent(cc.Sprite).spriteFrame=1==t?this.select:this.default},e.prototype.SetOpenState=function(t){this.isOpen.enabled=!t},i([s(cc.Label)],e.prototype,"label",void 0),i([s(cc.SpriteFrame)],e.prototype,"default",void 0),i([s(cc.SpriteFrame)],e.prototype,"select",void 0),i([s(cc.Sprite)],e.prototype,"isOpen",void 0),i([c],e)}(cc.Component);o.default=u,cc._RF.pop()},{}],LevelView:[function(t,e,o){"use strict";cc._RF.push(e,"f1a14JxH+xDT46JBr7kMyOB","LevelView");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./BaseView"),c=t("../utils/Tools"),s=t("./LevelItemView"),u=t("../Global"),l=t("../enum/Enums"),p=cc._decorator,h=p.ccclass,f=p.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scrollView=null,e.content=null,e.levelItem=null,e}return r(e,t),e.prototype.init=function(){for(var t=[1,2],e=3;e<=300;e++)t.push(e);c.scrollFunc({list:t,spacing:30,row:5,scrollView:this.scrollView,content:this.content,receiveItemHeight:30,cb:this.setPreFab.bind(this)})},e.prototype.setPreFab=function(e,o){var n=this,r=o+1,i=cc.instantiate(this.levelItem),a=i.getComponent(s.default);a.SetLevelIndex(r),i.on("click",function(){r>u.Global.currentMaxLv||(u.Global.lv=r,cc.director.emit(l.events.LevelSelectChange),t.prototype.close.call(n),n.node.destroy())}),r>u.Global.currentMaxLv?a.SetOpenState(!1):(a.SetOpenState(!0),r==u.Global.lv?a.SetLevelState(!0):a.SetLevelState(!1)),i.parent=this.content},e.prototype.start=function(){this.init()},e.prototype.onCloseClick=function(){t.prototype.close.call(this),this.node.destroy()},i([f(cc.ScrollView)],e.prototype,"scrollView",void 0),i([f(cc.Node)],e.prototype,"content",void 0),i([f(cc.Prefab)],e.prototype,"levelItem",void 0),i([h],e)}(a.default);o.default=d,cc._RF.pop()},{"../Global":"Global","../enum/Enums":"Enums","../utils/Tools":"Tools","./BaseView":"BaseView","./LevelItemView":"LevelItemView"}],LoadCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"b4c8dowH5FE/5w1IPRr0ufz","LoadCtrl");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},a=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{s(n.next(t))}catch(e){i(e)}}function c(t){try{s(n.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}s((n=n.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return s([t,e])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../Global"),u=t("../enum/Enums"),l=t("../manager/ResMgr"),p=cc._decorator,h=p.ccclass,f=p.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.load=null,e.loadingNode=null,e.isload=!0,e.once=!1,e}return r(e,t),e.prototype.closeLoad=function(){return a(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,l.default.ins.getUI(u.ui.MainView)];case 1:return t.sent().parent=this.node.parent,this.isload=!1,this.loadingNode.active=!1,this.node.destroy(),[2]}})})},e.prototype.update=function(){this.isload&&(this.load.progress=s.Global.LoadingRate,s.Global.LoadingRate>=.99&&!this.once&&(this.once=!0,this.closeLoad()))},i([f(cc.ProgressBar)],e.prototype,"load",void 0),i([f(cc.Node)],e.prototype,"loadingNode",void 0),i([h],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../Global":"Global","../enum/Enums":"Enums","../manager/ResMgr":"ResMgr"}],MainView:[function(t,e,o){"use strict";cc._RF.push(e,"7a12ciUtJ5JVo+/8W5Q9aEg","MainView");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},a=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{s(n.next(t))}catch(e){i(e)}}function c(t){try{s(n.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}s((n=n.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return s([t,e])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./BaseView"),u=t("./GameView"),l=t("../manager/ResMgr"),p=t("../Global"),h=t("../enum/Enums"),f=t("../ad/crazySDK/CrazySDK"),d=cc._decorator,y=d.ccclass,v=d.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.content=null,e.lvLabel=null,e}var o;return r(e,t),o=e,e.prototype.onEnable=function(){cc.director.on(h.events.LevelSelectChange,this.eventLevelChange,this),cc.director.on(h.events.BackToMain,this.eventBackToMain,this)},e.prototype.onDisable=function(){cc.director.off(h.events.LevelSelectChange,this.eventLevelChange,this),cc.director.off(h.events.BackToMain,this.eventBackToMain,this)},e.prototype.start=function(){this.setLvLabel(),o.ins=this,f.default.isSupportedPlatform&&f.default.game.loadingStop()},e.prototype.setLvLabel=function(t){var e=t;null!=t&&0!=t||(e=p.Global.lv),this.lvLabel.string="<b><color=#FAFAFA><outline color=#000000 width=4>Level </outline></c><color=#FAFAFA><outline color=#000000 width=4>"+e+"</outline></c></b>"},e.prototype.onStartGameClick=function(){return a(this,void 0,void 0,function(){var t;return c(this,function(e){switch(e.label){case 0:return[4,l.default.ins.getUI(h.ui.GameView)];case 1:return(t=e.sent()).getComponent(u.default).init(),t.parent=this.node.parent,[2]}})})},e.prototype.onSettingClick=function(){return a(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,l.default.ins.getUI(h.ui.SettingView)];case 1:return t.sent().parent=this.node.parent,[2]}})})},e.prototype.onShopClick=function(){return a(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,l.default.ins.getUI(h.ui.ShopView)];case 1:return t.sent().parent=this.node.parent,[2]}})})},e.prototype.onLvClick=function(){return a(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,l.default.ins.getUI(h.ui.LevelView)];case 1:return t.sent().parent=this.node.parent,[2]}})})},e.prototype.eventLevelChange=function(){this.setLvLabel()},e.prototype.eventBackToMain=function(){this.setLvLabel()},e.ins=null,i([v(cc.Label)],e.prototype,"label",void 0),i([v(cc.Node)],e.prototype,"content",void 0),i([v(cc.RichText)],e.prototype,"lvLabel",void 0),o=i([y],e)}(s.default);o.default=g,cc._RF.pop()},{"../Global":"Global","../ad/crazySDK/CrazySDK":"CrazySDK","../enum/Enums":"Enums","../manager/ResMgr":"ResMgr","./BaseView":"BaseView","./GameView":"GameView"}],Main:[function(t,e,o){"use strict";cc._RF.push(e,"76bc6IsaypCZIihqXEele4k","Main");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},a=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{s(n.next(t))}catch(e){i(e)}}function c(t){try{s(n.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}s((n=n.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return s([t,e])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./Global"),u=t("./enum/Enums"),l=t("./utils/Tools"),p=t("./ad/crazySDK/CrazySDK"),h=t("./manager/ResMgr"),f=cc._decorator,d=f.ccclass,y=f.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.maxLevel=300,e.currentLevel=5,e.Platforms=[],e.Shares=[],e.ShareVideoes=[],e}var o;return r(e,t),o=e,e.prototype.onLoad=function(){cc.debug.setDisplayStats(!1),this.initAdSdk(),this.loadData(),o.ins=this},e.prototype.start=function(){return a(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.loadRes()];case 1:return t.sent(),[2]}})})},e.prototype.loadRes=function(){return a(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return console.log("  Main.......LoadRes"),s.Global.LoadingRate=.04,[4,h.default.ins.loadBundle(1,.01)];case 1:return t.sent(),[4,h.default.ins.loadRes(1,u.Assets.Json,.03)];case 2:return t.sent(),[4,h.default.ins.loadRes(1,u.Assets.UiFrame,.1)];case 3:return t.sent(),[4,h.default.ins.loadRes(1,u.Assets.Sound,.2)];case 4:return t.sent(),[4,h.default.ins.loadRes(1,u.Assets.UiPrefab,.35)];case 5:return t.sent(),[4,h.default.ins.loadRes(1,u.Assets.CommonPrefab,.35)];case 6:return t.sent(),h.default.ins.getUI(u.ui.ToastView),[2]}})})},e.prototype.initAdSdk=function(){console.log(" Main.Init AD SDK.............. "),console.log("Supported platform: "+(p.default.isSupportedPlatform?"yes":"no")),p.default.isSupportedPlatform&&p.default.init().then(function(){console.log("Environment: "+p.default.environment)}).catch(function(t){console.error("Initialization failed "+t)})},e.prototype.loadData=function(){s.Global.maxLv=this.maxLevel;var t=l.load(u.Key.Lv);t||(t=this.currentLevel||1),s.Global.setLv(t);var e=l.load(u.Key.CurMaxLevel),o=cc.sys.platform;console.log(" LoadData.CurMaxLevel:::: ",e," Current System:: ",o," OS.Window\uff1a\uff1a ",cc.sys.DESKTOP_BROWSER),e?s.Global.currentMaxLv=e:(e=t,s.Global.currentMaxLv=e,console.log(" Current Max Level::: ",t));var n=l.load(u.Key.ToolSetting,2);s.Global._toolSetting=n||s.Global._toolSetting;var r=l.load(u.Key.CupSetting,2);s.Global.cupSetting=r||s.Global._cupSetting;var i=l.load(u.Key.ReceiveList,2);s.Global.receiveList=i||s.Global._receiveList;var a=l.load(u.Key.CodeList,2);s.Global.codeList=a||s.Global._codeList;var c=l.load(u.Key.CoinCount);s.Global.currentCoin=c},e.ins=null,i([y({type:cc.Integer,tooltip:"Max Level"})],e.prototype,"maxLevel",void 0),i([y({type:cc.Integer,tooltip:"Current Level"})],e.prototype,"currentLevel",void 0),i([y({type:u.adConfig,tooltip:"Ad Config"})],e.prototype,"Platforms",void 0),i([y({type:u.shareConfig,tooltip:"Share Config"})],e.prototype,"Shares",void 0),i([y({type:u.shareVideoConfig,tooltip:"Share Video Config"})],e.prototype,"ShareVideoes",void 0),o=i([d],e)}(cc.Component);o.default=v,cc._RF.pop()},{"./Global":"Global","./ad/crazySDK/CrazySDK":"CrazySDK","./enum/Enums":"Enums","./manager/ResMgr":"ResMgr","./utils/Tools":"Tools"}],Math:[function(t,e,o){"use strict";function n(t){for(;t>360;)t-=360;for(;t<-360;)t+=360;return t%360*Math.PI/180}cc._RF.push(e,"e6b58UKm01IBZaaoeLDHIFB","Math"),Object.defineProperty(o,"__esModule",{value:!0}),o.rotatePt=o.randomNum=o.radian2angle=void 0,o.radian2angle=function(t){return t/Math.PI*180},o.randomNum=function(t,e){switch(arguments.length){case 1:return parseInt(Math.random()*t+"");case 2:return parseInt(Math.random()*(e-t+1)+t+"");default:return 0}},o.rotatePt=function(t,e){var o=n(e),r=cc.v2();return r.x=t.x*Math.cos(o)-t.y*Math.sin(o),r.y=t.x*Math.sin(o)+t.y*Math.cos(o),r},cc._RF.pop()},{}],PoolMgr:[function(t,e,o){"use strict";cc._RF.push(e,"b9306dIq49BWp865ZnBWsam","PoolMgr"),Object.defineProperty(o,"__esModule",{value:!0}),o.PoolMgr=void 0;var n=function(){function t(){this._dictPool={},this._dictPrefab={}}return Object.defineProperty(t,"ins",{get:function(){return this._ins?this._ins:(this._ins=new t,this._ins)},enumerable:!1,configurable:!0}),t.prototype.copyNode=function(t,e){var o=t.name,n=null;if(this._dictPool.hasOwnProperty(o))n=(r=this._dictPool[o]).size()>0?r.get():cc.instantiate(t);else{var r=new cc.NodePool;this._dictPool[o]=r,n=cc.instantiate(t)}return e&&(n.parent=e,n.active=!0),n},t.prototype.getNode=function(t,e,o){var n,r,i;if("string"==typeof t?(n=this._dictPrefab[t],r=t):(n=t,r=t.data.name),this._dictPool.hasOwnProperty(r))if((a=this._dictPool[r]).size()>0)i=a.get();else{if(!n)return console.log("Pool invalid prefab name = ",r),null;i=cc.instantiate(n)}else{if(!n)return console.log("Pool invalid prefab name = ",r),null;var a=new cc.NodePool;this._dictPool[r]=a,i=cc.instantiate(n)}return e&&(i.parent=e,i.active=!0,o&&(i.position=o)),i},t.prototype.putNode=function(t,e){if(void 0===e&&(e=!1),t){var o=t.name,n=null;this._dictPool.hasOwnProperty(o)?n=this._dictPool[o]:(n=new cc.NodePool,this._dictPool[o]=n),n.put(t)}},t.prototype.clearPool=function(t){this._dictPool.hasOwnProperty(t)&&this._dictPool[t].clear()},t.prototype.setPrefab=function(t,e){this._dictPrefab[t]=e},t.prototype.getPrefab=function(t){return this._dictPrefab[t]},t}();o.PoolMgr=n,cc._RF.pop()},{}],PropBlockMgr:[function(t,e,o){"use strict";cc._RF.push(e,"aaa4cdODmNKgZEs8bxjVLgp","PropBlockMgr");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.labelShow=!0,e}return r(e,t),e.prototype.start=function(){this.labelShow||(this.label.node.active=!1),this.setLabelColor(new cc.Color(255,255,255)),this.setLabelFontSize(25)},e.prototype.setLabel=function(t){this.label.string=t},e.prototype.setLabelColor=function(t){this.label.node.color=t},e.prototype.setLabelFontSize=function(t){this.label.fontSize=t},i([s(cc.Label)],e.prototype,"label",void 0),i([s(cc.Boolean)],e.prototype,"labelShow",void 0),i([c],e)}(cc.Component);o.default=u,cc._RF.pop()},{}],PropMgr:[function(t,e,o){"use strict";cc._RF.push(e,"554c0mzm+1PjK6tmvsRNfvT","PropMgr");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.PropState=void 0;var a,c=cc._decorator,s=c.ccclass,u=c.property;(function(t){t[t.Video=1]="Video",t[t.Share=2]="Share"})(a=o.PropState||(o.PropState={}));var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.videoNode=null,e.shareNode=null,e.numNode=null,e.num=0,e.state=a.Video,e}return r(e,t),e.prototype.setNum=function(t){this.num=t,this.showNodeByState()},e.prototype.showNodeByState=function(){this.num>0?(this.numNode.active=!0,this.numNode.getComponent(cc.Label).string=this.num.toString(),this.videoNode.active=!1,this.shareNode.active=!1):(this.numNode.active=!1,this.state==a.Video?(this.videoNode.active=!0,this.shareNode.active=!1):(this.videoNode.active=!1,this.shareNode.active=!0))},e.prototype.setState=function(t){this.state=t},e.prototype.start=function(){},i([u(cc.Node)],e.prototype,"videoNode",void 0),i([u(cc.Node)],e.prototype,"shareNode",void 0),i([u(cc.Node)],e.prototype,"numNode",void 0),i([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],ResMgr:[function(t,e,o){"use strict";cc._RF.push(e,"ea555+Z+wJAP4xZ/cjfbSBs","ResMgr");var n=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{s(n.next(t))}catch(e){i(e)}}function c(t){try{s(n.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}s((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return s([t,e])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../Global"),a=t("../enum/Enums"),c=t("./PoolMgr"),s=function(){function t(){this._abBundleMap={},this._atlasMap={},this._spinMap=[],this._frameMap={},this._jsonAssetMap={},this._clipMap={},this._matMap={},this._loadStemp=null,this.loadTime=0,this._totalTime=0}return Object.defineProperty(t,"ins",{get:function(){return this._ins||(this._ins=new t),this._ins},enumerable:!1,configurable:!0}),t.prototype.printTimer=function(t,e){void 0===t&&(t=""),void 0===e&&(e=!1),this.loadTime=Date.now()-this._loadStemp,this._loadStemp=Date.now(),this._totalTime+=this.loadTime,console.log(t+"\uff0cload time===",this.loadTime,"ms"),e&&console.log("Load finish, total time===",this._totalTime,"ms")},t.prototype.loadBundle=function(t,e){return void 0===e&&(e=0),n(this,void 0,Promise,function(){var o,n,a=this;return r(this,function(){return this._loadStemp||(this._loadStemp=Date.now()),o=i.Global.LoadingRate,n="Bundle"+t,[2,new Promise(function(r){cc.assetManager.loadBundle(n,function(n,c){n?console.error("Bundle"+t+" load error, error==",n):(2!=t&&(a._abBundleMap[t]=c),a.printTimer("Bundle"+t+"__load success"),i.Global.LoadingRate=o+e,r&&r())})})]})})},t.prototype.loadRes=function(t,e,o){return void 0===o&&(o=0),n(this,void 0,Promise,function(){var n,s=this;return r(this,function(){return n=i.Global.LoadingRate,[2,new Promise(function(r){console.log(" loadRes~~~~~~~~ Type.Path:: ",e.path," Type.Type:: ",e.type),s._abBundleMap[t].loadDir(e.path,e.type,function(t,e){o>0&&(i.Global.LoadingRate=n+o*t/e)},function(o,n){var u;switch(o&&(console.error("Error===",o),r&&r()),e){case a.Assets.UiPrefab:for(var l=0;l<n.length;l++){var p=(u=n[l]).data.name;console.log(" resName == ",p),c.PoolMgr.ins.setPrefab(p,u),i.Global.Debug&&console.log("prefab name==",p)}break;case a.Assets.CommonPrefab:for(console.log(" CommonPrefab ================= assets.length:: ",n.length),l=0;l<n.length;l++)p=(u=n[l]).data.name,c.PoolMgr.ins.setPrefab(p,u),i.Global.Debug&&console.log("prefab name==",p);break;case a.Assets.Sound:for(l=0;l<n.length;l++)u=n[l],i.Global.Debug&&console.log("clip name==",u.name),s._clipMap[u.name]||(s._clipMap[u.name]=u);break;case a.Assets.UiFrame:for(l=0;l<n.length;l++)u=n[l],i.Global.Debug&&console.log("Frame name==",u.name),s._frameMap[u.name]||(s._frameMap[u.name]=u);break;case a.Assets.Json:for(l=0;l<n.length;l++)u=n[l],i.Global.Debug&&console.log("json name==",u.name),s._jsonAssetMap[u.name]||(s._jsonAssetMap[u.name]=u)}s.printTimer("Bundle"+t+"__"+e.path+"loaded success"),r&&r()})})]})})},t.prototype.loadBgm=function(){return n(this,void 0,Promise,function(){var t,e=this;return r(this,function(){return t=this,[2,new Promise(function(o){e._abBundleMap[5].load("bgm",function(e,n){e&&(console.error("Error info===",e),o&&o()),t._clipMap[n.name]||(t._clipMap[n.name]=n),o&&o()})})]})})},t.prototype.loadPrefab=function(t){return n(this,void 0,Promise,function(){var e=this;return r(this,function(){return i.Global.LoadingRate,console.log(" LoadPrefab:::: Path: ",t.path," Name: ",t.name),[2,new Promise(function(o){e._abBundleMap[t.bundle].load(t.path+t.name,function(e,n){e&&(console.log(" LoadError.....Name: ",t.name),console.error("Error info===",e),o&&o()),c.PoolMgr.ins.setPrefab(t.name,n),o&&o()})})]})})},t.prototype.getAtlas=function(t){return this._atlasMap[t]},t.prototype.getFrameMap=function(t){return this._frameMap[t]},t.prototype.getPrefab=function(t,e){return n(this,void 0,void 0,function(){return r(this,function(o){switch(o.label){case 0:return c.PoolMgr.ins.getPrefab(t.name)?[2,c.PoolMgr.ins.getNode(t.name,e)]:[4,this.loadPrefab(t)];case 1:return o.sent(),[2,c.PoolMgr.ins.getNode(t.name,e)]}})})},t.prototype.getJson=function(t){return this._jsonAssetMap[t]},t.prototype.getClip=function(t){return this._clipMap[t]},t.prototype.getMat=function(t){return this._matMap[t]},t.prototype.getSpin=function(t){return this._spinMap.find(function(e){return e.name==t})},t.prototype.getUI=function(t,e){return n(this,void 0,void 0,function(){var o;return r(this,function(n){switch(n.label){case 0:if(t.clear&&!e&&i.Global.layer[t.layer].children[0]){if(i.Global.layer[t.layer].children[0].name==t.name)return[2];c.PoolMgr.ins.putNode(i.Global.layer[t.layer].children[0])}return o=e||i.Global.layer[t.layer],[4,this.getPrefab(t,o)];case 1:return[2,n.sent()]}})})},t._ins=null,t}();o.default=s,cc._RF.pop()},{"../Global":"Global","../enum/Enums":"Enums","./PoolMgr":"PoolMgr"}],SettingView:[function(t,e,o){"use strict";cc._RF.push(e,"14034n8+wxG167GC8UZhqzK","SettingView");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.SpriteFrameState=void 0;var a=t("../Global"),c=t("../enum/Enums"),s=t("./BaseView"),u=cc._decorator,l=u.ccclass,p=u.property,h=function(){function t(){this.on=null,this.off=null}return i([p(cc.SpriteFrame)],t.prototype,"on",void 0),i([p(cc.SpriteFrame)],t.prototype,"off",void 0),i([l("SpriteFrameState")],t)}();o.SpriteFrameState=h;var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sound=null,e.soundSprite=null,e}return r(e,t),e.prototype.start=function(){this.checkSpriteFrame()},e.prototype.checkSpriteFrame=function(){1==a.Global.sound?this.soundSprite.spriteFrame=this.sound.on:this.soundSprite.spriteFrame=this.sound.off},e.prototype.changeSound=function(){a.Global.sound*=-1,this.checkSpriteFrame(),cc.director.emit(c.events.ChangeSound,"sound")},e.prototype.close=function(){t.prototype.close.call(this),this.node.destroy()},i([p(h)],e.prototype,"sound",void 0),i([p(cc.Sprite)],e.prototype,"soundSprite",void 0),i([l],e)}(s.default);o.default=f,cc._RF.pop()},{"../Global":"Global","../enum/Enums":"Enums","./BaseView":"BaseView"}],ShopItemView:[function(t,e,o){"use strict";cc._RF.push(e,"50996x6FWdCfZTXVbJba2jt","ShopItemView");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.ShopModalItemSpriteFrames=void 0;var a=cc._decorator,c=a.ccclass,s=a.property,u=function(){function t(){this.default=null,this.have=null,this.check=null}return i([s(cc.SpriteFrame)],t.prototype,"default",void 0),i([s(cc.SpriteFrame)],t.prototype,"have",void 0),i([s(cc.SpriteFrame)],t.prototype,"check",void 0),i([c("ShopModalItemSpriteFrames")],t)}();o.ShopModalItemSpriteFrames=u;var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.imgs=null,e}return r(e,t),e.prototype.checkState=function(t){switch(t){case"have":this.node.getComponent(cc.Sprite).spriteFrame=this.imgs.have;break;case"check":this.node.getComponent(cc.Sprite).spriteFrame=this.imgs.check}},i([s(u)],e.prototype,"imgs",void 0),i([c],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],ShopView:[function(t,e,o){"use strict";cc._RF.push(e,"a36eed/FhtOyaiomX/lyfL6","ShopView");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},a=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{s(n.next(t))}catch(e){i(e)}}function c(t){try{s(n.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}s((n=n.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return s([t,e])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../Global"),u=t("../enum/Enums"),l=t("../manager/SoundMgr"),p=t("../manager/CoinMgr"),h=t("../manager/ResMgr"),f=t("../utils/Tools"),d=t("./BaseView"),y=t("./GetCupView"),v=t("./ShopItemView"),g=cc._decorator,m=g.ccclass,_=g.property,b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cupsFrame=[],e.shopCardItem=null,e.scrollView=null,e.content=null,e.costCoinLabel=null,e.getCoinLabel=null,e.spacing=20,e.rowNum=2,e.shopItems=["01","02","03","04","05","06","07","08","09","10","11","12"],e}return r(e,t),e.prototype.init=function(t){f.scrollFunc({list:t,spacing:2*this.spacing,row:this.rowNum,scrollView:this.scrollView,content:this.content,receiveItemHeight:this.shopCardItem.data.height,cb:this.setPreFab.bind(this)})},e.prototype.setPreFab=function(t){var e,o,n,r=this;e=s.Global.cupSetting,o=s.Global.setCupCurrent,n=this.cupsFrame;var i=cc.instantiate(this.shopCardItem),a=i.getComponent(v.default),c=e.current,u=e.haveList;i.on("click",function(){u.includes(t)&&c!=t&&(o(t),r.init(r.shopItems))}),c==t?(a.checkState("check"),i.getChildByName("node").getComponent(cc.Sprite).spriteFrame=n[+t.replace("C","")-1],i.getChildByName("node").active=!0):u.includes(t)&&(a.checkState("have"),i.getChildByName("node").getComponent(cc.Sprite).spriteFrame=n[+t.replace("C","")-1],i.getChildByName("node").active=!0),i.parent=this.content},e.prototype.onLoad=function(){this.init(this.shopItems)},e.prototype.goBack=function(){t.prototype.close.call(this),this.node.destroy()},e.prototype.start=function(){this.setNeedCoinLabel(),this.setGetCoinLabel()},e.prototype.getNeedCoin=function(){var t=500;return s.Global.cupSetting.haveList.length>6&&(t=1e3),t},e.prototype.setNeedCoinLabel=function(){var t=this.getNeedCoin();this.costCoinLabel.string=t.toString()},e.prototype.setGetCoinLabel=function(){this.getCoinLabel.string=s.Global.watchAdReward.toString()},e.prototype.buyCupClick=function(){var t=this.getNeedCoin(),e=s.Global.getCurrentCoin(),o=s.Global.cupSetting.haveList.length;this.costCoinLabel.string=t.toString();var n=this.shopItems.length,r=(o+1).toString();if(o<9&&(r="0"+r),o>=n){var i="All cup is unlock.";cc.director.emit(u.events.Toast,i)}else e<t?(i="Need "+t+" coins.",cc.director.emit(u.events.Toast,i)):this.showGetItemView(r,t)},e.prototype.showGetItemView=function(t,e){return a(this,void 0,void 0,function(){var o,n,r;return c(this,function(i){switch(i.label){case 0:return l.SoundMgr.ins.playSound(u.Clips.modal,.5),[4,h.default.ins.getUI(u.ui.GetCupView)];case 1:return o=i.sent(),(n=o.getComponent(y.default)).setTitleImg(),r=this.cupsFrame[s.Global.cupSetting.haveList.length],n.setPropImg(r),o.parent=this.node,s.Global.setCupHavaList(t),this.init(this.shopItems),s.Global.subCoin(e),p.default.ins.setCoinLabel(),[2]}})})},i([_([cc.SpriteFrame])],e.prototype,"cupsFrame",void 0),i([_(cc.Prefab)],e.prototype,"shopCardItem",void 0),i([_(cc.ScrollView)],e.prototype,"scrollView",void 0),i([_(cc.Node)],e.prototype,"content",void 0),i([_(cc.Label)],e.prototype,"costCoinLabel",void 0),i([_(cc.Label)],e.prototype,"getCoinLabel",void 0),i([_(cc.Integer)],e.prototype,"spacing",void 0),i([_(cc.Integer)],e.prototype,"rowNum",void 0),i([m],e)}(d.default);o.default=b,cc._RF.pop()},{"../Global":"Global","../enum/Enums":"Enums","../manager/CoinMgr":"CoinMgr","../manager/ResMgr":"ResMgr","../manager/SoundMgr":"SoundMgr","../utils/Tools":"Tools","./BaseView":"BaseView","./GetCupView":"GetCupView","./ShopItemView":"ShopItemView"}],SoundMgr:[function(t,e,o){"use strict";cc._RF.push(e,"94af7xSM7tCtKbJaeG6PfRw","SoundMgr");var n=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{s(n.next(t))}catch(e){i(e)}}function c(t){try{s(n.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}s((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return s([t,e])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.SoundMgr=void 0;var i=t("../Global"),a=t("./ResMgr"),c=t("../enum/Enums"),s=function(){function t(){this._audioComp=null,this._curLoopAudioName=""}return Object.defineProperty(t,"ins",{get:function(){return this._ins||(this._ins=new t,this._ins.initAudio()),this._ins},enumerable:!1,configurable:!0}),t.prototype.initAudio=function(){this._audioComp=new cc.AudioSource,this._audioComp.loop=!0},t.prototype.stopSound=function(){this._audioComp.stop()},t.prototype.playSound=function(t,e){return void 0===e&&(e=1),n(this,void 0,void 0,function(){var o;return r(this,function(n){switch(n.label){case 0:return i.Global.sound==c.SoundStatus.off?[2]:(this._audioComp&&this.stopSound(),[4,a.default.ins.getClip(t)]);case 1:return o=n.sent(),cc.audioEngine.play(o,!1,e),[2]}})})},Object.defineProperty(t.prototype,"curLoopAudioName",{get:function(){return this._curLoopAudioName},enumerable:!1,configurable:!0}),t.prototype.playSoundAtTime=function(t,e){return n(this,void 0,void 0,function(){var o,n,s=this;return r(this,function(r){switch(r.label){case 0:return i.Global.sound==c.SoundStatus.off?[2]:[4,a.default.ins.getClip(t)];case 1:return o=r.sent(),n=cc.audioEngine.play(o,!1,1),this._audioComp.clip=o,this._audioComp.play(),this._audioComp.scheduleOnce(function(){cc.audioEngine.stop(n),s._audioComp.stop()},2*e),[2]}})})},t._ins=null,t}();o.SoundMgr=s,cc._RF.pop()},{"../Global":"Global","../enum/Enums":"Enums","./ResMgr":"ResMgr"}],ToastCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"f6ca7yTc+FBrr1t8pzVCsYH","ToastCtrl");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./enum/Enums"),c=cc._decorator,s=c.ccclass,u=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.text=null,e.toast=null,e._tw=new cc.Tween,e.time=1,e}return r(e,t),e.prototype.onEnable=function(){cc.director.on(a.events.Toast,this.showToast,this),this.toast.opacity=0,this._tw.target(this.toast),this._tw.set({opacity:0}).to(.6,{opacity:255}).delay(this.time).to(.25,{opacity:0})},e.prototype.onDisable=function(){cc.director.off(a.events.Toast,this.showToast,this)},e.prototype.showToast=function(t,e){void 0===e&&(e=2),this.time=e,this.text.string=t,this._tw.start()},i([u(cc.Label)],e.prototype,"text",void 0),i([u(cc.Node)],e.prototype,"toast",void 0),i([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{"./enum/Enums":"Enums"}],Tools:[function(t,e,o){"use strict";function n(t){var e=document.createElement("div");return e.style.position="absolute",e.style.left="-10000px",e.style.top="-10000px",e.textContent=t,document.body.appendChild(e),e}function r(t){var e=document.createRange();e.selectNodeContents(t);var o=window.getSelection();o.removeAllRanges(),o.addRange(e)}cc._RF.push(e,"859c4IGX/ZFBq3OPUhXZN9I","Tools"),Object.defineProperty(o,"__esModule",{value:!0}),o.Tools=o.scrollFunc=o.getDate=o.load=o.save=void 0,o.save=function(t,e){"number"==typeof e&&(e=""+e),cc.sys.localStorage.setItem(t,e||"")},o.load=function(t,e){void 0===e&&(e=1);var o=cc.sys.localStorage.getItem(t);if(o){switch(e){case 0:break;case 1:o=Number(o);break;case 2:o=JSON.parse(o)}return o}return null},o.getDate=function(){var t=new Date;return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()},o.scrollFunc=function(t){var e=t.list,o=t.spacing,n=t.row,r=t.scrollView,i=t.content,a=t.receiveItemHeight,c=t.cb;i.removeAllChildren();var s=e.length;i.height=Math.ceil(s/n)*(a+o);for(var u=0;u<s;u++)c&&c(e[u],u,e);r.scrollToTop(0)};var i=function(){function t(){}return t.fadeIn=function(t,e){void 0===e&&(e=.2),cc.tween(t).set({scale:0}).to(e,{scale:1}).start()},t.copyToClipboard=function(t){var e=t;return new Promise(function(t,o){if(window.clipboardData)window.clipboardData.setData("Text",e);else{var i=n(e);r(i);try{t(document.execCommand("copy",!1,null))}catch(a){o(a)}document.body.removeChild(i)}})},t}();o.Tools=i,cc._RF.pop()},{}],VictoryView:[function(t,e,o){"use strict";cc._RF.push(e,"880b4jObvVCVJjx7VQ6E+4k","VictoryView");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./BaseView"),c=t("../Global"),s=t("../enum/Enums"),u=t("../base/Math"),l=t("../manager/CoinMgr"),p=cc._decorator,h=p.ccclass,f=p.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.curAwardLabel=null,e.curToolIcon=null,e.curToolLabel=null,e.curAwardCoin=null,e.curAwardTool=null,e.tubeFrame=null,e.fallbackFrame=null,e.coinReward=0,e.tubeReward=0,e.fallbackReward=0,e}return r(e,t),e.prototype.init=function(){this.coinReward=c.Global.rewardCoin,this.curAwardLabel.string="+"+this.coinReward.toString();var t=u.randomNum(1,100),e=u.randomNum(1,10);console.log(" RandomNumber1:: ",t," RandomNumber2: ",e),t>=50?(e>=5?(this.curToolIcon.spriteFrame=this.fallbackFrame,this.fallbackReward=1):(this.curToolIcon.spriteFrame=this.tubeFrame,this.tubeReward=1),this.curToolLabel.string="+1"):(this.curAwardCoin.position=new cc.Vec3(-50,0,0),this.curAwardTool.active=!1)},e.prototype.onNextLevelClick=function(){this.tubeReward>0&&(c.Global.addToolSetting("tube",1),cc.director.emit(s.events.AddTube)),this.fallbackReward>0&&(c.Global.addToolSetting("back",1),cc.director.emit(s.events.Back)),c.Global.addCoin(this.coinReward),l.default.ins.setCoinLabel(),this.loadNextLvel()},e.prototype.onMoreAwardClick=function(){this.coinReward=5*c.Global.rewardCoin,this.curAwardLabel.string="+"+this.coinReward.toString()},e.prototype.loadNextLvel=function(){t.prototype.close.call(this),this.node.destroy(),cc.director.emit(s.events.Start)},i([f(cc.Label)],e.prototype,"curAwardLabel",void 0),i([f(cc.Sprite)],e.prototype,"curToolIcon",void 0),i([f(cc.Label)],e.prototype,"curToolLabel",void 0),i([f(cc.Node)],e.prototype,"curAwardCoin",void 0),i([f(cc.Node)],e.prototype,"curAwardTool",void 0),i([f(cc.SpriteFrame)],e.prototype,"tubeFrame",void 0),i([f(cc.SpriteFrame)],e.prototype,"fallbackFrame",void 0),i([h],e)}(a.default);o.default=d,cc._RF.pop()},{"../Global":"Global","../base/Math":"Math","../enum/Enums":"Enums","../manager/CoinMgr":"CoinMgr","./BaseView":"BaseView"}],WaterFlow:[function(t,e,o){"use strict";cc._RF.push(e,"89a60u2p+5LCaWjYEQt3c4x","WaterFlow");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.WaterFlow=void 0;var i=t("../enum/Enums"),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._toPt=cc.v2(),e.from=cc.v2(),e}return r(e,t),e.prototype.onLoad=function(){this.lineWidth=i.dft_lingWidth,this.lineCap=cc.Graphics.LineCap.ROUND},Object.defineProperty(e.prototype,"toPt",{get:function(){return this._toPt},set:function(t){this._toPt=t,this.clear(),this.moveTo(this.from.x,this.from.y),this.lineTo(this._toPt.x,this._toPt.y),this.stroke()},enumerable:!1,configurable:!0}),e.prototype.playFlowAni=function(t,e,o,n,r){this.clear(),this.from=n?e:t,this.moveTo(this.from.x,this.from.y),cc.tween(this).set({toPt:t}).to(o,{toPt:e}).call(r).start()},e.prototype.setLineScale=function(t){this.lineWidth=i.dft_lingWidth*t},e}(cc.Graphics);o.WaterFlow=a,cc._RF.pop()},{"../enum/Enums":"Enums"}],Water:[function(t,e,o){"use strict";cc._RF.push(e,"607d01cGPpC1Y4XE+JkcAAc","Water");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../base/Math"),c=t("../enum/Enums"),s=cc._decorator,u=s.ccclass,l=s.property,p=(s.requireComponent,s.executeInEditMode),h=(s.disallowMultiple,s.executionOrder,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._ratio=1,e.effect=null,e._tiltAngle=0,e.material=null,e._action=c.PourAction.none,e.infos=[],e.stopIdx=-1,e.curIdx=0,e._actionHeight=0,e.eventState=!1,e.onInFInish=null,e.onOutStart=null,e.onOutFinish=null,e}return r(e,t),Object.defineProperty(e.prototype,"tiltAngle",{get:function(){return this._tiltAngle},set:function(t){t=Math.round(100*t)/100,this._tiltAngle=t,this.updateAngleHeight()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"actionHeight",{get:function(){return this._actionHeight},set:function(t){if(t>c.HEIGHT_FACTOR&&(t=c.HEIGHT_FACTOR),t<0)throw new Error("Water height can't less than zero");this._actionHeight=t},enumerable:!1,configurable:!0}),e.prototype.changeAction=function(t){console.log(" Water.ChangeAnction:: ",this.node.name),this._action=t},e.prototype.addInfo=function(t){console.log(" Water.AddInfo:: ",this.node.name," WaterInfo:: ",t);var e=this.actionHeight;this.actionHeight=t.height,t.height=0;var o=this.infos[this.curIdx];this._action===c.PourAction.in&&(this.actionHeight+=e-((null==o?void 0:o.height)||0)),this._action=c.PourAction.in,o&&o.colorId==t.colorId?this.actionHeight+=o.height:this.infos.push(t),this.curIdx=this.infos.length-1,this.initSizeColor()},e.prototype.onLoad=function(){var t=this.node.getComponent(cc.Sprite);t.spriteFrame&&(t.spriteFrame.getTexture().packable=!1),this.effect&&(this.material=cc.Material.create(this.effect),t.setMaterial(0,this.material)),this.material=t.getMaterial(0),this._ratio=this.node.height/this.node.width},e.prototype.initInfos=function(t){this.infos=this.waterHandle(t),this.curIdx=this.infos.length-1,this.initSizeColor(),this.updateAngleHeight()},e.prototype.waterHandle=function(t){for(var e=[],o=0;o<t.length;o++){var n=t[o];e[e.length-1]&&e[e.length-1].colorId==n.colorId?e[e.length-1].height+=n.height:e.push(n)}return e},e.prototype.initSizeColor=function(){for(var t=new Float32Array(c.MAX_ARR_LEN*c.BASIC_DATA.BYTE),e=0;e<this.infos.length;e++){var o=this.infos[e].color;t[e*c.BASIC_DATA.BYTE]=o.r/c.BASIC_DATA.color_range,t[e*c.BASIC_DATA.BYTE+c.BASIC_DATA.color_alpha2]=o.g/c.BASIC_DATA.color_range,t[e*c.BASIC_DATA.BYTE+c.BASIC_DATA.color_alpha3]=o.b/c.BASIC_DATA.color_range,t[e*c.BASIC_DATA.BYTE+c.BASIC_DATA.color_alpha4]=c.BASIC_DATA.color_alpha}this.material.setProperty("colors",t),this.material.setProperty("iResult",cc.v2(this.node.width,this.node.height)),this.material.setProperty("corrugationType",c.PourAction.none)},e.prototype.updateAngleHeight=function(){for(var t=new Float32Array(c.MAX_ARR_LEN*c.BASIC_DATA.BYTE),e=0;e<this.infos.length;e++)t[e*c.BASIC_DATA.BYTE]=this.infos[e].height;this.material.setProperty("heights",t),this.material.setProperty("tiltAngle",this._tiltAngle);var o=c.PourAction.none;this._action==c.PourAction.in?o=c.PourAction.in:this._action==c.PourAction.out&&(o=c.PourAction.out),this.material.setProperty("corrugationType",o)},e.prototype.upHeight=function(){if(this.isFull())return this.actionHeight=0,void(this._action=c.PourAction.none);if(!(this.curIdx<0)){var t=this.infos[this.curIdx];t.height+=c.ANGLE_FACTOR,t.height>=this.actionHeight&&(t.height=this.actionHeight,this.actionHeight=0,this._action=c.PourAction.none,this.onInFInish&&(this.onInFInish(),this.onInFInish=null)),this.isFull(),this.updateAngleHeight()}},e.prototype.downHeight=function(){if(this.stopIdx<0)this._action=c.PourAction.none;else{var t=this.infos[this.curIdx];(this.isAtBottleTop()||t.height<.05)&&(this.eventState=!0,this.onOutStart&&(this.onOutStart(),this.onOutStart=null),t.height-=c.ANGLE_FACTOR,this.actionHeight<0&&(this.actionHeight=0),t.height<=this.actionHeight&&(t.height=this.actionHeight,this.actionHeight<=0&&(this.infos.pop(),this.curIdx--,this.stopIdx=-1),this.eventState=!1,this.onOutFinish&&(this.onOutFinish(),this.onOutFinish=null),this._action=c.PourAction.none,this.actionHeight=0),this.updateAngleHeight())}},e.prototype.isFull=function(){return this.infos.reduce(function(t,e){return t+e.height},0)>=c.HEIGHT_FACTOR},e.prototype.isEmpty=function(){return 0==this.infos.length},e.prototype.getTopInfo=function(){return this.infos[this.curIdx]},e.prototype.getPourStartAngle=function(){console.log(" Water.GetPourStartAngle ",this.node.name);for(var t=0,e=0;e<=this.curIdx;e++)t+=this.infos[e].height;return this.getCriticalAngleWithHeight(t)},e.prototype.getPourEndAngle=function(){console.log(" Water.getPourEndAngle ",this.node.name),this.stopIdx=this.curIdx-this.getTopSameColorNum();for(var t=0,e=0;e<=this.stopIdx;e++)t+=this.infos[e].height;return this.getCriticalAngleWithHeight(t)},e.prototype.getCriticalAngleWithHeight=function(t){var e=0;if(0==t)return 90;if(t<.5){var o=this._ratio/(2*t);e=Math.atan(o)}else o=2*this._ratio*(1-t),e=Math.atan(o);return e=a.radian2angle(e),console.log(" Water.GetCriticalAngleWithHeight::: ",this.node.name," Angle: ",e),e},e.prototype.onStartPour=function(t){console.log(" Water.OnStartPour::: "),this._action=c.PourAction.out;var e=c.HEIGHT_FACTOR/c.SPLIT_COUNT;t&&(this.actionHeight=this.infos[this.curIdx].height-t*e),this.actionHeight<=0&&(this.actionHeight=0),this.stopIdx=this.curIdx-this.getTopSameColorNum(),this.stopIdx<0&&(this.stopIdx=0)},e.prototype.getTopSameColorNum=function(){for(var t=0,e=null,o=this.curIdx;o>=0;o--)if(null==e)t++,e=this.infos[o].colorId;else{if(this.infos[o].colorId!=e)break;t++}return t},e.prototype.isAtBottleTop=function(){for(var t=0,e=0;e<=this.curIdx;e++)t+=this.infos[e].height;var o=this.tiltAngle%360*Math.PI/180,n=Math.abs(Math.tan(o));if(t<.5)return n>this._ratio/(2*t);var r=1-t;return n>2*this._ratio*r},e.prototype.update=function(){this._action==c.PourAction.out?this.downHeight():this._action==c.PourAction.in&&this.upHeight()},e.prototype.setPourInCallback=function(t){this.onInFInish=t},e.prototype.setPourOutCallback=function(t,e){this.onOutStart=t,this.onOutFinish=e},i([l(cc.EffectAsset)],e.prototype,"effect",void 0),i([l],e.prototype,"_tiltAngle",void 0),i([l({tooltip:!1})],e.prototype,"tiltAngle",null),i([u,p],e)}(cc.Component));o.default=h,cc._RF.pop()},{"../base/Math":"Math","../enum/Enums":"Enums"}]},{},["Global","Main","ToastCtrl","AdMgr","AndroidAD","CrazySDK","CrazySDK.types","Interface","Math","Enums","Cup","Water","WaterFlow","GuideFinger","GuideTask","GuideTaskMgr","LoadCtrl","CoinMgr","CupMgr","GameMgr","PoolMgr","PropBlockMgr","PropMgr","ResMgr","SoundMgr","Tools","BaseView","GameView","GetCupView","LevelItemView","LevelView","MainView","SettingView","ShopItemView","ShopView","VictoryView"]);